!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).neo4j=t()}(function(){return function n(o,i,s){function u(e,t){if(!i[e]){if(!o[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(c)return c(e,!0);throw(r=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",r}r=i[e]={exports:{}},o[e][0].call(r.exports,function(t){return u(o[e][1][t]||t)},r,r.exports,n,o,i,s)}return i[e].exports}for(var c="function"==typeof require&&require,t=0;t<s.length;t++)u(s[t]);return u}({1:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.assertTxConfigIsEmpty=r.assertDatabaseIsEmpty=void 0;var n=t("neo4j-driver-core");r.assertTxConfigIsEmpty=function(t,e,r){if(void 0===e&&(e=function(){}),t&&!t.isEmpty()){t=n.newError("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw e(t.message),r.onError(t),t}},r.assertDatabaseIsEmpty=function(t,e,r){if(void 0===e&&(e=function(){}),t){t=n.newError("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw e(t.message),r.onError(t),t}}},{"neo4j-driver-core":58}],2:[function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var f=t("./bolt-protocol-util"),o=t("../packstream"),p=n(t("./request-message")),h=t("./stream-observers"),n=t("neo4j-driver-core"),i=n.internal.bookmark.Bookmark,t=n.internal.constants,s=t.ACCESS_MODE_WRITE,u=t.BOLT_PROTOCOL_V1,c=(n.internal.logger.Logger,n.internal.txConfig.TxConfig),n=(Object.defineProperty(a.prototype,"version",{get:function(){return u},enumerable:!1,configurable:!0}),a.prototype.packer=function(){return this._packer},a.prototype.unpacker=function(){return this._unpacker},a.prototype.transformMetadata=function(t){return t},a.prototype.initialize=function(t){var e=this,r=void 0===t?{}:t,n=r.userAgent,t=r.authToken,o=r.onError,i=r.onComplete,r=new h.LoginObserver({onError:function(t){return e._onLoginError(t,o)},onCompleted:function(t){return e._onLoginCompleted(t,i)}});return this.write(p.default.init(n,t),r,!0),r},a.prototype.prepareToClose=function(){},a.prototype.beginTransaction=function(t){var e=void 0===t?{}:t,r=e.bookmark,n=e.txConfig,o=e.database,i=e.mode,s=e.beforeError,u=e.afterError,t=e.beforeComplete,e=e.afterComplete;return this.run("BEGIN",r?r.asBeginTransactionParameters():{},{bookmark:r,txConfig:n,database:o,mode:i,beforeError:s,afterError:u,beforeComplete:t,afterComplete:e,flush:!1})},a.prototype.commitTransaction=function(t){var e=void 0===t?{}:t,r=e.beforeError,n=e.afterError,t=e.beforeComplete,e=e.afterComplete;return this.run("COMMIT",{},{bookmark:i.empty(),txConfig:c.empty(),mode:s,beforeError:r,afterError:n,beforeComplete:t,afterComplete:e})},a.prototype.rollbackTransaction=function(t){var e=void 0===t?{}:t,r=e.beforeError,n=e.afterError,t=e.beforeComplete,e=e.afterComplete;return this.run("ROLLBACK",{},{bookmark:i.empty(),txConfig:c.empty(),mode:s,beforeError:r,afterError:n,beforeComplete:t,afterComplete:e})},a.prototype.run=function(t,e,r){var n=void 0===r?{}:r,o=(n.bookmark,n.txConfig),i=n.database,s=(n.mode,n.beforeKeys),u=n.afterKeys,c=n.beforeError,a=n.afterError,l=n.beforeComplete,r=n.afterComplete,n=n.flush,n=void 0===n||n,r=new h.ResultStreamObserver({server:this._server,beforeKeys:s,afterKeys:u,beforeError:c,afterError:a,beforeComplete:l,afterComplete:r});return f.assertTxConfigIsEmpty(o,this._onProtocolError,r),f.assertDatabaseIsEmpty(i,this._onProtocolError,r),this.write(p.default.run(t,e),r,!1),this.write(p.default.pullAll(),r,n),r},a.prototype.reset=function(t){var e=void 0===t?{}:t,t=e.onError,e=e.onComplete,e=new h.ResetObserver({onProtocolError:this._onProtocolError,onError:t,onComplete:e});return this.write(p.default.reset(),e,!0),e},a.prototype._createPacker=function(t){return new o.v1.Packer(t)},a.prototype._createUnpacker=function(t,e){return new o.v1.Unpacker(t,e)},a.prototype.write=function(t,e,r){var n=this;this.queueObserverIfProtocolIsNotBroken(e)&&(this._log.isDebugEnabled()&&this._log.debug("C: "+t),this.packer().packStruct(t.signature,t.fields.map(function(t){return n.packer().packable(t)})),this._chunker.messageBoundary(),r&&this._chunker.flush())},a.prototype.notifyFatalError=function(t){return this._fatalError=t,this._responseHandler._notifyErrorToObservers(t)},a.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},a.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},a.prototype.queueObserverIfProtocolIsNotBroken=function(t){return this.isBroken()?(this.notifyFatalErrorToObserver(t),!1):this._responseHandler._queueObserver(t)},a.prototype.isBroken=function(){return!!this._fatalError},a.prototype.notifyFatalErrorToObserver=function(t){t&&t.onError&&t.onError(this._fatalError)},a.prototype.resetFailure=function(){this._responseHandler._resetFailure()},a.prototype._onLoginCompleted=function(t,e){var r;t&&(r=t.server,this._server.version||(this._server.version=r)),e&&e(t)},a.prototype._onLoginError=function(t,e){this._onProtocolError(t.message),e&&e(t)},a);function a(t,e,r,n,o,i){var s=void 0===r?{}:r,r=s.disableLosslessIntegers,s=s.useBigInt;void 0===n&&(n=function(){return null}),this._server=t||{},this._chunker=e,this._packer=this._createPacker(e),this._unpacker=this._createUnpacker(r,s),this._responseHandler=n(this),this._log=o,this._onProtocolError=i,this._fatalError=null}r.default=n},{"../packstream":42,"./bolt-protocol-util":1,"./request-message":12,"./stream-observers":15,"neo4j-driver-core":58}],3:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var s,u=i(t("./bolt-protocol-v1")),c=i(t("../packstream")),a=t("neo4j-driver-core").internal.constants.BOLT_PROTOCOL_V2,o=(s=u.default,o(l,s),l.prototype._createPacker=function(t){return new c.default.Packer(t)},l.prototype._createUnpacker=function(t,e){return new c.default.Unpacker(t,e)},Object.defineProperty(l.prototype,"version",{get:function(){return a},enumerable:!1,configurable:!0}),l);function l(){return null!==s&&s.apply(this,arguments)||this}r.default=o},{"../packstream":42,"./bolt-protocol-v1":2,"neo4j-driver-core":58}],4:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var u,c=s(t("./bolt-protocol-v2")),h=s(t("./request-message")),d=t("./bolt-protocol-util"),b=t("./stream-observers"),t=t("neo4j-driver-core"),a=(t.internal.bookmark.Bookmark,t.internal.constants.BOLT_PROTOCOL_V3),l=t.internal.txConfig.TxConfig,f="context",p=new b.StreamObserver,o=(u=c.default,o(_,u),Object.defineProperty(_.prototype,"version",{get:function(){return a},enumerable:!1,configurable:!0}),_.prototype.transformMetadata=function(t){return"t_first"in t&&(t.result_available_after=t.t_first,delete t.t_first),"t_last"in t&&(t.result_consumed_after=t.t_last,delete t.t_last),t},_.prototype.initialize=function(t){var e=this,r=void 0===t?{}:t,n=r.userAgent,t=r.authToken,o=r.onError,i=r.onComplete,r=new b.LoginObserver({onError:function(t){return e._onLoginError(t,o)},onCompleted:function(t){return e._onLoginCompleted(t,i)}});return this.write(h.default.hello(n,t),r,!0),r},_.prototype.prepareToClose=function(){this.write(h.default.goodbye(),p,!0)},_.prototype.beginTransaction=function(t){var e=void 0===t?{}:t,r=e.bookmark,n=e.txConfig,o=e.database,i=e.mode,s=e.beforeError,u=e.afterError,t=e.beforeComplete,e=e.afterComplete,e=new b.ResultStreamObserver({server:this._server,beforeError:s,afterError:u,beforeComplete:t,afterComplete:e});return e.prepareToHandleSingleResponse(),d.assertDatabaseIsEmpty(o,this._onProtocolError,e),this.write(h.default.begin({bookmark:r,txConfig:n,mode:i}),e,!0),e},_.prototype.commitTransaction=function(t){var e=void 0===t?{}:t,r=e.beforeError,n=e.afterError,t=e.beforeComplete,e=e.afterComplete,e=new b.ResultStreamObserver({server:this._server,beforeError:r,afterError:n,beforeComplete:t,afterComplete:e});return e.prepareToHandleSingleResponse(),this.write(h.default.commit(),e,!0),e},_.prototype.rollbackTransaction=function(t){var e=void 0===t?{}:t,r=e.beforeError,n=e.afterError,t=e.beforeComplete,e=e.afterComplete,e=new b.ResultStreamObserver({server:this._server,beforeError:r,afterError:n,beforeComplete:t,afterComplete:e});return e.prepareToHandleSingleResponse(),this.write(h.default.rollback(),e,!0),e},_.prototype.run=function(t,e,r){var n=void 0===r?{}:r,o=n.bookmark,i=n.txConfig,s=n.database,u=n.mode,c=n.beforeKeys,a=n.afterKeys,l=n.beforeError,f=n.afterError,p=n.beforeComplete,r=n.afterComplete,n=n.flush,n=void 0===n||n,r=new b.ResultStreamObserver({server:this._server,beforeKeys:c,afterKeys:a,beforeError:l,afterError:f,beforeComplete:p,afterComplete:r});return d.assertDatabaseIsEmpty(s,this._onProtocolError,r),this.write(h.default.runWithMetadata(t,e,{bookmark:o,txConfig:i,mode:u}),r,!1),this.write(h.default.pullAll(),r,n),r},_.prototype.requestRoutingInformation=function(t){var e=t.routingContext,r=t.sessionContext,n=void 0===r?{}:r,o=t.onError,r=t.onCompleted,n=this.run("CALL dbms.cluster.routing.getRoutingTable($context)",((t={})[f]=void 0===e?{}:e,t),i(i({},n),{txConfig:l.empty()}));return new b.ProcedureRouteObserver({resultObserver:n,onProtocolError:this._onProtocolError,onError:o,onCompleted:r})},_);function _(){return null!==u&&u.apply(this,arguments)||this}r.default=o},{"./bolt-protocol-util":1,"./bolt-protocol-v2":3,"./request-message":12,"./stream-observers":15,"neo4j-driver-core":58}],5:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),u=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),c=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return u(e,t),e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var l,a=a(t("./bolt-protocol-v3")),b=c(t("./request-message")),_=t("./stream-observers"),t=t("neo4j-driver-core"),f=(t.internal.bookmark.Bookmark,t.internal.constants.BOLT_PROTOCOL_V4_0),p=t.internal.txConfig.TxConfig,h="context",d="database",o=(l=a.default,o(y,l),Object.defineProperty(y.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),y.prototype.beginTransaction=function(t){var e=void 0===t?{}:t,r=e.bookmark,n=e.txConfig,o=e.database,i=e.mode,s=e.beforeError,u=e.afterError,t=e.beforeComplete,e=e.afterComplete,e=new _.ResultStreamObserver({server:this._server,beforeError:s,afterError:u,beforeComplete:t,afterComplete:e});return e.prepareToHandleSingleResponse(),this.write(b.default.begin({bookmark:r,txConfig:n,database:o,mode:i}),e,!0),e},y.prototype.run=function(t,e,r){var n=void 0===r?{}:r,o=n.bookmark,i=n.txConfig,s=n.database,u=n.mode,c=n.beforeKeys,a=n.afterKeys,l=n.beforeError,f=n.afterError,p=n.beforeComplete,h=n.afterComplete,d=n.flush,r=void 0===d||d,d=n.reactive,d=void 0!==d&&d,n=n.fetchSize,n=void 0===n?b.ALL:n,p=new _.ResultStreamObserver({server:this._server,reactive:d,fetchSize:n,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:c,afterKeys:a,beforeError:l,afterError:f,beforeComplete:p,afterComplete:h}),h=d;return this.write(b.default.runWithMetadata(t,e,{bookmark:o,txConfig:i,database:s,mode:u}),p,h&&r),d||this.write(b.default.pull({n:n}),p,r),p},y.prototype._requestMore=function(t,e,r){this.write(b.default.pull({stmtId:t,n:e}),r,!0)},y.prototype._requestDiscard=function(t,e){this.write(b.default.discard({stmtId:t}),e,!0)},y.prototype._noOp=function(){},y.prototype.requestRoutingInformation=function(t){var e=t.routingContext,r=t.databaseName,n=void 0===r?null:r,o=t.sessionContext,i=void 0===o?{}:o,r=t.onError,o=t.onCompleted,i=this.run("CALL dbms.routing.getRoutingTable($context, $database)",((t={})[h]=void 0===e?{}:e,t[d]=n,t),s(s({},i),{txConfig:p.empty()}));return new _.ProcedureRouteObserver({resultObserver:i,onProtocolError:this._onProtocolError,onError:r,onCompleted:o})},y);function y(){return null!==l&&l.apply(this,arguments)||this}r.default=o},{"./bolt-protocol-v3":4,"./request-message":12,"./stream-observers":15,"neo4j-driver-core":58}],6:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var u,s=i(t("./bolt-protocol-v4x0")),c=i(t("./request-message")),a=t("./stream-observers"),l=t("neo4j-driver-core").internal.constants.BOLT_PROTOCOL_V4_1,o=(u=s.default,o(f,u),Object.defineProperty(f.prototype,"version",{get:function(){return l},enumerable:!1,configurable:!0}),f.prototype.initialize=function(t){var e=this,r=void 0===t?{}:t,n=r.userAgent,t=r.authToken,o=r.onError,i=r.onComplete,r=new a.LoginObserver({onError:function(t){return e._onLoginError(t,o)},onCompleted:function(t){return e._onLoginCompleted(t,i)}});return this.write(c.default.hello(n,t,this._serversideRouting),r,!0),r},f);function f(t,e,r,n,o,i,s){i=u.call(this,t,e,r,n=void 0===n?function(){return null}:n,o,i)||this;return i._serversideRouting=s,i}r.default=o},{"./bolt-protocol-v4x0":5,"./request-message":12,"./stream-observers":15,"neo4j-driver-core":58}],7:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var s,i=i(t("./bolt-protocol-v4x1")),u=t("neo4j-driver-core").internal.constants.BOLT_PROTOCOL_V4_2,o=(s=i.default,o(c,s),Object.defineProperty(c.prototype,"version",{get:function(){return u},enumerable:!1,configurable:!0}),c);function c(){return null!==s&&s.apply(this,arguments)||this}r.default=o},{"./bolt-protocol-v4x1":6,"neo4j-driver-core":58}],8:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var s,u=i(t("./bolt-protocol-v4x2")),c=i(t("./request-message")),a=t("./stream-observers"),t=t("neo4j-driver-core"),l=t.internal.bookmark.Bookmark,f=t.internal.constants.BOLT_PROTOCOL_V4_3,o=(s=u.default,o(p,s),Object.defineProperty(p.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),p.prototype.requestRoutingInformation=function(t){var e=t.routingContext,r=void 0===e?{}:e,n=t.databaseName,o=void 0===n?null:n,e=t.sessionContext,n=void 0===e?{}:e,e=t.onError,t=t.onCompleted,t=new a.RouteObserver({onProtocolError:this._onProtocolError,onError:e,onCompleted:t}),n=n.bookmark||l.empty();return this.write(c.default.route(r,n.values(),o),t,!0),t},p);function p(){return null!==s&&s.apply(this,arguments)||this}r.default=o},{"./bolt-protocol-v4x2":7,"./request-message":12,"./stream-observers":15,"neo4j-driver-core":58}],9:[function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var f=t("neo4j-driver-core"),p=n(t("./bolt-protocol-v1")),h=n(t("./bolt-protocol-v2")),d=n(t("./bolt-protocol-v3")),b=n(t("./bolt-protocol-v4x0")),_=n(t("./bolt-protocol-v4x1")),y=n(t("./bolt-protocol-v4x2")),v=n(t("./bolt-protocol-v4x3")),m=n(t("./response-handler"));r.default=function(t){var e=void 0===t?{}:t,r=e.version,n=e.chunker,o=e.dechunker,i=e.channel,s=e.disableLosslessIntegers,u=e.useBigInt,c=e.serversideRouting,t=e.server,a=e.log,l=e.observer;return function(t,e,r,n,o,i,s,u){switch(t){case 1:return new p.default(e,r,n,i,u,s);case 2:return new h.default(e,r,n,i,u,s);case 3:return new d.default(e,r,n,i,u,s);case 4:return new b.default(e,r,n,i,u,s);case 4.1:return new _.default(e,r,n,i,u,s,o);case 4.2:return new y.default(e,r,n,i,u,s,o);case 4.3:return new v.default(e,r,n,i,u,s,o);default:throw f.newError("Unknown Bolt protocol version: "+t)}}(r,t,n,{disableLosslessIntegers:s,useBigInt:u},c,function(e){var r=new m.default({transformMetadata:e.transformMetadata.bind(e),log:a,observer:l});return i.onerror=l.onError.bind(l),i.onmessage=function(t){return o.write(t)},o.onmessage=function(t){r.handleResponse(e.unpacker().unpack(t))},r},l.onProtocolError.bind(l),a)}},{"./bolt-protocol-v1":2,"./bolt-protocol-v2":3,"./bolt-protocol-v3":4,"./bolt-protocol-v4x0":5,"./bolt-protocol-v4x1":6,"./bolt-protocol-v4x2":7,"./bolt-protocol-v4x3":8,"./response-handler":13,"neo4j-driver-core":58}],10:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../channel"),i=t("neo4j-driver-core"),s=1616949271;function o(t,e){return{major:t,minor:e}}function u(){return function(t){if(4<t.length)throw i.newError("It should not have more than 4 versions of the protocol");var o=n.alloc(20);return o.writeInt32(s),t.forEach(function(t){var e,r,n;t instanceof Array?(r=(e=t[0]).major,n=e.minor,e=t[1].minor,o.writeInt32(n-e<<16|n<<8|r)):(r=t.major,n=t.minor,o.writeInt32(n<<8|r))}),o.reset(),o}([[o(4,3),o(4,2)],o(4,1),o(4,0),o(3,0)])}r.default=function(e){var o=this;return new Promise(function(r,n){function t(t){n(t)}e.onerror=t.bind(o),e._error&&t(e._error),e.onmessage=function(e){try{var t=function(t){if(72===(t=[t.readUInt8(),t.readUInt8(),t.readUInt8(),t.readUInt8()])[0]&&84===t[1]&&84===t[2]&&80===t[3])throw i.newError("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return Number(t[3]+"."+t[2])}(e);r({protocolVersion:t,consumeRemainingBuffer:function(t){e.hasRemaining()&&t(e.readSlice(e.remaining()))}})}catch(t){n(t)}},e.write(u())})}},{"../channel":26,"neo4j-driver-core":58}],11:[function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.RawRoutingTable=r.BoltProtocol=void 0;var s=i(t("./handshake")),u=i(t("./create")),c=i(t("./bolt-protocol-v4x3")),i=i(t("./routing-table-raw"));o(t("./stream-observers"),r),r.BoltProtocol=c.default,r.RawRoutingTable=i.default,r.default={handshake:s.default,create:u.default}},{"./bolt-protocol-v4x3":8,"./create":9,"./handshake":10,"./routing-table-raw":14,"./stream-observers":15}],12:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("neo4j-driver-core"),t=o.internal.constants,i=t.ACCESS_MODE_READ,n=t.FETCH_ALL,s=o.internal.util.assertString,t=(u.init=function(t,e){return new u(1,[t,e],function(){return"INIT "+t+" {...}"})},u.run=function(t,e){return new u(16,[t,e],function(){return"RUN "+t+" "+o.json.stringify(e)})},u.pullAll=function(){return l},u.reset=function(){return f},u.hello=function(t,e,r){void 0===r&&(r=null);e=Object.assign({user_agent:t},e);return r&&(e.routing=r),new u(1,[e],function(){return"HELLO {user_agent: '"+t+"', ...}"})},u.begin=function(t){var t=void 0===t?{}:t,e=c(t.bookmark,t.txConfig,t.database,t.mode);return new u(17,[e],function(){return"BEGIN "+o.json.stringify(e)})},u.commit=function(){return p},u.rollback=function(){return h},u.runWithMetadata=function(t,e,r){var r=void 0===r?{}:r,n=c(r.bookmark,r.txConfig,r.database,r.mode);return new u(16,[t,e,n],function(){return"RUN "+t+" "+o.json.stringify(e)+" "+o.json.stringify(n)})},u.goodbye=function(){return d},u.pull=function(t){var e=void 0===t?{}:t,t=e.stmtId,t=void 0===t?-1:t,e=e.n,r=a(null==t?-1:t,(void 0===e?n:e)||n);return new u(63,[r],function(){return"PULL "+o.json.stringify(r)})},u.discard=function(t){var e=void 0===t?{}:t,t=e.stmtId,t=void 0===t?-1:t,e=e.n,r=a(null==t?-1:t,(void 0===e?n:e)||n);return new u(47,[r],function(){return"DISCARD "+o.json.stringify(r)})},u.route=function(t,e,r){return new u(102,[t=void 0===t?{}:t,e=void 0===e?[]:e,r=void 0===r?null:r],function(){return"ROUTE "+o.json.stringify(t)+" "+o.json.stringify(e)+" "+r})},u);function u(t,e,r){this.signature=t,this.fields=e,this.toString=r}function c(t,e,r,n){var o={};return t.isEmpty()||(o.bookmarks=t.values()),e.timeout&&(o.tx_timeout=e.timeout),e.metadata&&(o.tx_metadata=e.metadata),r&&(o.db=s(r,"database")),n===i&&(o.mode="r"),o}function a(t,e){e={n:o.int(e)};return-1!==t&&(e.qid=o.int(t)),e}var l=new(r.default=t)(63,[],function(){return"PULL_ALL"}),f=new t(15,[],function(){return"RESET"}),p=new t(18,[],function(){return"COMMIT"}),h=new t(19,[],function(){return"ROLLBACK"}),d=new t(2,[],function(){return"GOODBYE"})},{"neo4j-driver-core":58}],13:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("neo4j-driver-core");function n(){}function i(t){return t}var s={onNext:n,onCompleted:n,onError:n},t=(u.prototype.handleResponse=function(t){var e=t.fields[0];switch(t.signature){case 113:this._log.isDebugEnabled()&&this._log.debug("S: RECORD "+o.json.stringify(t)),this._currentObserver.onNext(e);break;case 112:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS "+o.json.stringify(t));try{var r=this._transformMetadata(e);this._currentObserver.onCompleted(r)}finally{this._updateCurrentObserver()}break;case 127:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE "+o.json.stringify(t));try{var n=o.newError(e.message,e.code);this._currentFailure=this._observer.onErrorApplyTransformation(n),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case 126:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED "+o.json.stringify(t));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError(o.newError("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError(o.newError("Unknown Bolt protocol message: "+t))}},u.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift()},u.prototype._queueObserver=function(t){return(t=t||s).onCompleted=t.onCompleted||n,t.onError=t.onError||n,t.onNext=t.onNext||n,void 0===this._currentObserver?this._currentObserver=t:this._pendingObservers.push(t),!0},u.prototype._notifyErrorToObservers=function(t){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(t);0<this._pendingObservers.length;){var e=this._pendingObservers.shift();e&&e.onError&&e.onError(t)}},u.prototype.hasOngoingObservableRequests=function(){return null!=this._currentObserver||0<this._pendingObservers.length},u.prototype._resetFailure=function(){this._currentFailure=null},u);function u(t){var e=void 0===t?{}:t,r=e.transformMetadata,t=e.log,e=e.observer;this._pendingObservers=[],this._log=t,this._transformMetadata=r||i,this._observer=Object.assign({onError:n,onFailure:n,onErrorApplyTransformation:i},e)}r.default=t},{"neo4j-driver-core":58}],14:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=(s.ofRecord=function(t){return null===t?s.ofNull():new d(t)},s.ofMessageResponse=function(t){return null===t?s.ofNull():new c(t)},s.ofNull=function(){return new f},Object.defineProperty(s.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),s);function s(){}r.default=i;var u,c=(o(a,u=i),Object.defineProperty(a.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"isNull",{get:function(){return null===this._response},enumerable:!1,configurable:!0}),a);function a(t){var e=u.call(this)||this;return e._response=t,e}var l,f=(o(p,l=i),Object.defineProperty(p.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),p);function p(){return null!==l&&l.apply(this,arguments)||this}var h,d=(o(b,h=i),Object.defineProperty(b.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"isNull",{get:function(){return null===this._record},enumerable:!1,configurable:!0}),b);function b(t){var e=h.call(this)||this;return e._record=t,e}},{}],15:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.ProcedureRouteObserver=r.RouteObserver=r.CompletedObserver=r.FailedObserver=r.ResetObserver=r.LoginObserver=r.ResultStreamObserver=r.StreamObserver=void 0;var s=t("neo4j-driver-core"),p=t("./request-message"),u=i(t("./routing-table-raw")),c=s.error.PROTOCOL_ERROR,a=(l.prototype.onNext=function(t){},l.prototype.onError=function(t){},l.prototype.onCompleted=function(t){},l);function l(){}r.StreamObserver=a;var h,i=(o(f,h=a),f.prototype.onNext=function(t){var e=new s.Record(this._fieldKeys,t,this._fieldLookup);this._observers.some(function(t){return t.onNext})?this._observers.forEach(function(t){t.onNext&&t.onNext(e)}):(this._queuedRecords.push(e),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},f.prototype.onCompleted=function(t){this._state.onSuccess(this,t)},f.prototype.onError=function(t){this._state.onError(this,t)},f.prototype.cancel=function(){this._discard=!0},f.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(j.STREAMING)},f.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(j.SUCCEEDED)},f.prototype.subscribe=function(t){if(this._error)t.onError(this._error);else{if(this._head&&t.onKeys&&t.onKeys(this._head),0<this._queuedRecords.length&&t.onNext)for(var e=0;e<this._queuedRecords.length;e++)t.onNext(this._queuedRecords[e]),this._queuedRecords.length-e-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===j.READY&&this._handleStreaming());this._tail&&t.onCompleted&&t.onCompleted(this._tail),this._observers.push(t),this._state===j.READY&&this._handleStreaming()}},f.prototype._handleHasMore=function(t){this._setState(j.READY),this._handleStreaming(),delete t.has_more},f.prototype._handlePullSuccess=function(t){var e=this;this._setState(j.SUCCEEDED);var r=Object.assign(this._server?{server:this._server}:{},this._meta,t),n=null;this._beforeComplete&&(n=this._beforeComplete(r));t=function(){e._tail=r,e._observers.some(function(t){return t.onCompleted})&&e._observers.forEach(function(t){t.onCompleted&&t.onCompleted(r)}),e._afterComplete&&e._afterComplete(r)};n?Promise.resolve(n).then(t):t()},f.prototype._handleRunSuccess=function(t,e){var r=this;if(null===this._fieldKeys){if(this._fieldKeys=[],this._fieldLookup={},t.fields&&0<t.fields.length){this._fieldKeys=t.fields;for(var n=0;n<t.fields.length;n++)this._fieldLookup[t.fields[n]]=n;delete t.fields}null!==t.qid&&void 0!==t.qid&&(this._queryId=t.qid,delete t.qid),this._storeMetadataForCompletion(t);var o=null;this._beforeKeys&&(o=this._beforeKeys(this._fieldKeys));var i=function(){r._head=r._fieldKeys,r._observers.some(function(t){return t.onKeys})&&r._observers.forEach(function(t){t.onKeys&&t.onKeys(r._fieldKeys)}),r._afterKeys&&r._afterKeys(r._fieldKeys),e()};o?Promise.resolve(o).then(i):i()}},f.prototype._handleError=function(e){var t=this;this._setState(j.FAILED),this._error=e;var r=null;this._beforeError&&(r=this._beforeError(e));function n(){t._observers.some(function(t){return t.onError})&&t._observers.forEach(function(t){t.onError&&t.onError(e)}),t._afterError&&t._afterError(e)}r?Promise.resolve(r).then(n):n()},f.prototype._handleStreaming=function(){this._head&&this._observers.some(function(t){return t.onNext||t.onCompleted})&&(this._discard?(this._discardFunction(this._queryId,this),this._setState(j.STREAMING)):this._autoPull&&(this._moreFunction(this._queryId,this._fetchSize,this),this._setState(j.STREAMING)))},f.prototype._storeMetadataForCompletion=function(t){for(var e,r=Object.keys(t),n=r.length;n--;)e=r[n],this._meta[e]=t[e]},f.prototype._setState=function(t){this._state=t},f.prototype._setupAuoPull=function(t){this._autoPull=!0,t===p.ALL?(this._lowRecordWatermark=Number.MAX_VALUE,this._highRecordWatermark=Number.MAX_VALUE):(this._lowRecordWatermark=.3*t,this._highRecordWatermark=.7*t)},f);function f(t){var e=void 0===t?{}:t,r=e.reactive,n=void 0!==r&&r,o=e.moreFunction,i=e.discardFunction,s=e.fetchSize,u=void 0===s?p.ALL:s,c=e.beforeError,a=e.afterError,l=e.beforeKeys,f=e.afterKeys,t=e.beforeComplete,r=e.afterComplete,s=e.server,e=h.call(this)||this;return e._fieldKeys=null,e._fieldLookup=null,e._head=null,e._queuedRecords=[],e._tail=null,e._error=null,e._observers=[],e._meta={},e._server=s,e._beforeError=c,e._afterError=a,e._beforeKeys=l,e._afterKeys=f,e._beforeComplete=t,e._afterComplete=r,e._queryId=null,e._moreFunction=o,e._discardFunction=i,e._discard=!1,e._fetchSize=u,e._setState(n?j.READY:j.READY_STREAMING),e._setupAuoPull(u),e}r.ResultStreamObserver=i;var d,t=(o(b,d=a),b.prototype.onNext=function(t){this.onError(s.newError("Received RECORD when initializing "+s.json.stringify(t)))},b.prototype.onError=function(t){this._onError&&this._onError(t)},b.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},b);function b(t){var e=void 0===t?{}:t,r=e.onError,t=e.onCompleted,e=d.call(this)||this;return e._onError=r,e._onCompleted=t,e}r.LoginObserver=t;var _,t=(o(y,_=a),y.prototype.onNext=function(t){this.onError(s.newError("Received RECORD when resetting: received record is: "+s.json.stringify(t),c))},y.prototype.onError=function(t){t.code===c&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},y.prototype.onCompleted=function(t){this._onComplete&&this._onComplete(t)},y);function y(t){var e=void 0===t?{}:t,r=e.onProtocolError,n=e.onError,t=e.onComplete,e=_.call(this)||this;return e._onProtocolError=r,e._onError=n,e._onComplete=t,e}r.ResetObserver=t;var v,t=(o(m,v=i),m);function m(t){var e=t.error,t=t.onError,t=v.call(this,{beforeError:t})||this;return t.onError(e),t}r.FailedObserver=t;var g,i=(o(O,g=i),O);function O(){var t=g.call(this)||this;return g.prototype.markCompleted.call(t),t}r.CompletedObserver=i;var w,i=(o(S,w=a),S.prototype.onNext=function(t){this._records.push(t)},S.prototype.onError=function(t){t.code===c&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},S.prototype.onCompleted=function(){null===this._records||1===this._records.length?this._onCompleted&&this._onCompleted(u.default.ofRecord(this._records[0])):this.onError(s.newError("Illegal response from router. Received "+this._records.length+" records but expected only one.\n"+s.json.stringify(this._records),c))},S);function S(t){var e=t.resultObserver,r=t.onProtocolError,n=t.onError,o=t.onCompleted,t=w.call(this)||this;return t._resultObserver=e,t._onError=n,t._onCompleted=o,t._records=[],t._onProtocolError=r,e.subscribe(t),t}r.ProcedureRouteObserver=i;var E,a=(o(P,E=a),P.prototype.onNext=function(t){this.onError(s.newError("Received RECORD when resetting: received record is: "+s.json.stringify(t),c))},P.prototype.onError=function(t){t.code===c&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},P.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(u.default.ofMessageResponse(t))},P);function P(t){var e=void 0===t?{}:t,r=e.onProtocolError,n=e.onError,t=e.onCompleted,e=E.call(this)||this;return e._onProtocolError=r,e._onError=n,e._onCompleted=t,e}r.RouteObserver=a;var j={READY_STREAMING:{onSuccess:function(t,e){t._handleRunSuccess(e,function(){t._setState(j.STREAMING)})},onError:function(t,e){t._handleError(e)},name:function(){return"READY_STREAMING"}},READY:{onSuccess:function(t,e){t._handleRunSuccess(e,function(){return t._handleStreaming()})},onError:function(t,e){t._handleError(e)},name:function(){return"READY"}},STREAMING:{onSuccess:function(t,e){e.has_more?t._handleHasMore(e):t._handlePullSuccess(e)},onError:function(t,e){t._handleError(e)},name:function(){return"STREAMING"}},FAILED:{onError:function(t){},name:function(){return"FAILED"}},SUCCEEDED:{name:function(){return"SUCCEEDED"}}}},{"./request-message":12,"./routing-table-raw":14,"neo4j-driver-core":58}],16:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=(s.prototype.getUInt8=function(t){throw new Error("Not implemented")},s.prototype.getInt8=function(t){throw new Error("Not implemented")},s.prototype.getFloat64=function(t){throw new Error("Not implemented")},s.prototype.putUInt8=function(t,e){throw new Error("Not implemented")},s.prototype.putInt8=function(t,e){throw new Error("Not implemented")},s.prototype.putFloat64=function(t,e){throw new Error("Not implemented")},s.prototype.getInt16=function(t){return this.getInt8(t)<<8|this.getUInt8(t+1)},s.prototype.getUInt16=function(t){return this.getUInt8(t)<<8|this.getUInt8(t+1)},s.prototype.getInt32=function(t){return this.getInt8(t)<<24|this.getUInt8(t+1)<<16|this.getUInt8(t+2)<<8|this.getUInt8(t+3)},s.prototype.getUInt32=function(t){return this.getUInt8(t)<<24|this.getUInt8(t+1)<<16|this.getUInt8(t+2)<<8|this.getUInt8(t+3)},s.prototype.getInt64=function(t){return this.getInt8(t)<<56|this.getUInt8(t+1)<<48|this.getUInt8(t+2)<<40|this.getUInt8(t+3)<<32|this.getUInt8(t+4)<<24|this.getUInt8(t+5)<<16|this.getUInt8(t+6)<<8|this.getUInt8(t+7)},s.prototype.getSlice=function(t,e){return new c(t,e,this)},s.prototype.putInt16=function(t,e){this.putInt8(t,e>>8),this.putUInt8(t+1,255&e)},s.prototype.putUInt16=function(t,e){this.putUInt8(t,e>>8&255),this.putUInt8(t+1,255&e)},s.prototype.putInt32=function(t,e){this.putInt8(t,e>>24),this.putUInt8(t+1,e>>16&255),this.putUInt8(t+2,e>>8&255),this.putUInt8(t+3,255&e)},s.prototype.putUInt32=function(t,e){this.putUInt8(t,e>>24&255),this.putUInt8(t+1,e>>16&255),this.putUInt8(t+2,e>>8&255),this.putUInt8(t+3,255&e)},s.prototype.putInt64=function(t,e){this.putInt8(t,e>>48),this.putUInt8(t+1,e>>42&255),this.putUInt8(t+2,e>>36&255),this.putUInt8(t+3,e>>30&255),this.putUInt8(t+4,e>>24&255),this.putUInt8(t+5,e>>16&255),this.putUInt8(t+6,e>>8&255),this.putUInt8(t+7,255&e)},s.prototype.putBytes=function(t,e){for(var r=0,n=e.remaining();r<n;r++)this.putUInt8(t+r,e.readUInt8())},s.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},s.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},s.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},s.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},s.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},s.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},s.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},s.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},s.prototype.writeUInt8=function(t){this.putUInt8(this._updatePos(1),t)},s.prototype.writeInt8=function(t){this.putInt8(this._updatePos(1),t)},s.prototype.writeInt16=function(t){this.putInt16(this._updatePos(2),t)},s.prototype.writeInt32=function(t){this.putInt32(this._updatePos(4),t)},s.prototype.writeUInt32=function(t){this.putUInt32(this._updatePos(4),t)},s.prototype.writeInt64=function(t){this.putInt64(this._updatePos(8),t)},s.prototype.writeFloat64=function(t){this.putFloat64(this._updatePos(8),t)},s.prototype.writeBytes=function(t){this.putBytes(this._updatePos(t.remaining()),t)},s.prototype.readSlice=function(t){return this.getSlice(this._updatePos(t),t)},s.prototype._updatePos=function(t){var e=this.position;return this.position+=t,e},s.prototype.remaining=function(){return this.length-this.position},s.prototype.hasRemaining=function(){return 0<this.remaining()},s.prototype.reset=function(){this.position=0},s.prototype.toString=function(){return this.constructor.name+"( position="+this.position+" )\n  "+this.toHex()},s.prototype.toHex=function(){for(var t="",e=0;e<this.length;e++){var r=this.getUInt8(e).toString(16);t+=r=1===r.length?"0"+r:r,e!==this.length-1&&(t+=" ")}return t},s);function s(t){this.position=0,this.length=t}r.default=i;var u,c=(o(a,u=i),a.prototype.putUInt8=function(t,e){this._inner.putUInt8(this._start+t,e)},a.prototype.getUInt8=function(t){return this._inner.getUInt8(this._start+t)},a.prototype.putInt8=function(t,e){this._inner.putInt8(this._start+t,e)},a.prototype.putFloat64=function(t,e){this._inner.putFloat64(this._start+t,e)},a.prototype.getInt8=function(t){return this._inner.getInt8(this._start+t)},a.prototype.getFloat64=function(t){return this._inner.getFloat64(this._start+t)},a);function a(t,e,r){e=u.call(this,e)||this;return e._start=t,e._inner=r,e}},{}],17:[function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.BaseBuffer=void 0;t=n(t("./base-buf"));r.BaseBuffer=t.default,r.default=t.default},{"./base-buf":16}],18:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var s,t=i(t("../../buf")),o=(s=t.default,o(u,s),u.prototype.putUInt8=function(t,e){this._view.setUint8(t,e)},u.prototype.getUInt8=function(t){return this._view.getUint8(t)},u.prototype.putInt8=function(t,e){this._view.setInt8(t,e)},u.prototype.getInt8=function(t){return this._view.getInt8(t)},u.prototype.getFloat64=function(t){return this._view.getFloat64(t)},u.prototype.putFloat64=function(t,e){this._view.setFloat64(t,e)},u.prototype.getSlice=function(t,e){if(this._buffer.slice)return new u(this._buffer.slice(t,t+e));for(var r=new u(e),n=0;n<e;n++)r.putUInt8(n,this.getUInt8(n+t));return r},u.prototype.readView=function(t){return new DataView(this._buffer,this._updatePos(t),t)},u);function u(t){var e=this,t=t instanceof ArrayBuffer?t:new ArrayBuffer(t);return(e=s.call(this,t.byteLength)||this)._buffer=t,e._view=new DataView(e._buffer),e}r.default=o},{"../../buf":17}],19:[function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var i=n(t("./browser-buf")),s=t("neo4j-driver-core"),t=s.internal.util,u=t.ENCRYPTION_OFF,c=t.ENCRYPTION_ON,t=(o.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired)return this._error=s.newError("Failed to establish connection in "+this._config.connectionTimeout+"ms",this._config.connectionErrorCode),void(this.onerror&&this.onerror(this._error));this._open&&(this._error=s.newError("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},o.prototype.write=function(t){if(null!==this._pending)this._pending.push(t);else{if(!(t instanceof i.default))throw s.newError("Don't know how to send buffer: "+t);try{this._ws.send(t._buffer)}catch(t){if(1===this._ws.readyState)throw t;this._handleConnectionError()}}},o.prototype.close=function(){var r=this;return new Promise(function(t,e){r._ws&&3!==r._ws.readyState?(r._open=!1,r._clearConnectionTimeout(),r._ws.onclose=function(){return t()},r._ws.close()):t()})},o.prototype.setupReceiveTimeout=function(t){},o.prototype._setupConnectionTimeout=function(){var t=this,e=this._config.connectionTimeout;if(e){var r=this._ws;return setTimeout(function(){1!==r.readyState&&(t._connectionTimeoutFired=!0,r.close())},e)}return null},o.prototype._clearConnectionTimeout=function(){var t=this._connectionTimeoutId;!t&&0!==t||(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(t))},o);function o(t,e,r){void 0===e&&(e=a),void 0===r&&(r=function(t){return new WebSocket(t)}),this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this);var n,o=function(t,e){var r=function(t){return!0===t.encrypted||t.encrypted===c}(t),n=function(t){return!1===t.encrypted||t.encrypted===u}(t),t=t.trust,e=function(t){t="function"==typeof t?t():"";return t&&0<=t.toLowerCase().indexOf("https")}(e);if(function(t,e,r){null===r||(t&&!r?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):e&&r&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))}(r,n,e),n)return{scheme:"ws",error:null};if(e)return{scheme:"wss",error:null};if(r)return t&&"TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"!==t?{scheme:null,error:s.newError("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+t+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+u+'"` in the driver configuration.')}:{scheme:"wss",error:null};return{scheme:"ws",error:null}}(this._config=t,e),e=o.scheme,o=o.error;o?this._error=o:(this._ws=function(e,r,n){var t=e+"://"+r.asHostPort();try{return n(t)}catch(t){if(function(t,e){return"SyntaxError"===t.name&&function(t){return"["===t.charAt(0)&&-1!==t.indexOf("]")}(e.asHostPort())}(t,r)){r=function(t,e){var r=e.host().replace(new RegExp(":","g"),"-").replace("%","s");return t+"://"+r+".ipv6-literal.net:"+e.port()}(e,r);return n(r)}throw t}}(e,t.address,r),this._ws.binaryType="arraybuffer",(n=this)._ws.onclose=function(t){t&&!t.wasClean&&n._handleConnectionError(),n._open=!1},this._ws.onopen=function(){n._clearConnectionTimeout();var t=n._pending;n._pending=null;for(var e=0;e<t.length;e++)n.write(t[e])},this._ws.onmessage=function(t){n.onmessage&&(t=new i.default(t.data),n.onmessage(t))},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout())}function a(){return"undefined"!=typeof window&&window.location?window.location.protocol:null}r.default=t},{"./browser-buf":18,"neo4j-driver-core":58}],20:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,t=t("neo4j-driver-core").internal.resolver.BaseHostNameResolver,t=(o(s,i=t),s.prototype.resolve=function(t){return this._resolveToItself(t)},s);function s(){return null!==i&&i.apply(this,arguments)||this}r.default=t},{"neo4j-driver-core":58}],21:[function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var o=n(t("./browser-buf")),t=t("text-encoding-utf-8"),i=new t.TextEncoder("utf-8"),s=new t.TextDecoder("utf-8");r.default={encode:function(t){return new o.default(i.encode(t).buffer)},decode:function(t,e){if(t instanceof o.default)return s.decode(t.readView(Math.min(e,t.length-t.position)));for(var r=new o.default(e),n=0;n<e;n++)r.writeUInt8(t.readUInt8());return r.reset(),s.decode(r.readView(e))}}},{"./browser-buf":18,"text-encoding-utf-8":52}],22:[function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.utf8=r.HostNameResolver=r.Channel=r.alloc=void 0;var o=n(t("./browser-buf")),i=n(t("./browser-channel")),s=n(t("./browser-host-name-resolver")),t=n(t("./browser-utf8"));r.alloc=function(t){return new o.default(t)},r.Channel=i.default,r.HostNameResolver=s.default,r.utf8=t.default},{"./browser-buf":18,"./browser-channel":19,"./browser-host-name-resolver":20,"./browser-utf8":21}],23:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("neo4j-driver-core"),o=n.internal.util,t=o.ENCRYPTION_OFF,o=o.ENCRYPTION_ON,i=n.error.SERVICE_UNAVAILABLE,s=3e4,u=[null,void 0,!0,!1,o,t],c=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"];r.default=function(t,e,r){this.address=t,this.encrypted=function(t){t=t.encrypted;if(-1!==u.indexOf(t))return t;throw n.newError("Illegal value of the encrypted setting "+t+". Expected one of "+u)}(e),this.trust=function(t){t=t.trust;if(-1!==c.indexOf(t))return t;throw n.newError("Illegal value of the trust setting "+t+". Expected one of "+c)}(e),this.trustedCertificates=e.trustedCertificates||[],this.knownHostsPath=e.knownHosts||null,this.connectionErrorCode=r||i,this.connectionTimeout=function(t){t=parseInt(t.connectionTimeout,10);return 0===t||t&&t<0?null:t||s}(e)}},{"neo4j-driver-core":58}],24:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.Dechunker=r.Chunker=void 0;var s,u=i(t("../buf/base-buf")),c=t("./node"),a=i(t("./combined-buf")),o=(s=u.default,o(l,s),l.prototype.putUInt8=function(t,e){this._ensure(1),this._buffer.writeUInt8(e)},l.prototype.putInt8=function(t,e){this._ensure(1),this._buffer.writeInt8(e)},l.prototype.putFloat64=function(t,e){this._ensure(8),this._buffer.writeFloat64(e)},l.prototype.putBytes=function(t,e){for(;0<e.remaining();)this._ensure(1),this._buffer.remaining()>e.remaining()?this._buffer.writeBytes(e):this._buffer.writeBytes(e.readSlice(this._buffer.remaining()));return this},l.prototype.flush=function(){var t;return 0<this._buffer.position&&(this._closeChunkIfOpen(),t=this._buffer,this._buffer=null,this._ch.write(t.getSlice(0,t.position)),this._buffer=c.alloc(this._bufferSize),this._chunkOpen=!1),this},l.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<2&&this.flush(),this._buffer.writeInt16(0)},l.prototype._ensure=function(t){t=this._chunkOpen?t:t+2;this._buffer.remaining()<t&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+2,this._chunkOpen=!0)},l.prototype._closeChunkIfOpen=function(){var t;this._chunkOpen&&(t=this._buffer.position-(this._currentChunkStart+2),this._buffer.putUInt16(this._currentChunkStart,t),this._chunkOpen=!1)},l);function l(t,e){var r=s.call(this,0)||this;return r._bufferSize=e||1400,r._ch=t,r._buffer=c.alloc(r._bufferSize),r._currentChunkStart=0,r._chunkOpen=!1,r}r.Chunker=o;f.prototype.AWAITING_CHUNK=function(t){return 2<=t.remaining()?this._onHeader(t.readUInt16()):(this._partialChunkHeader=t.readUInt8()<<8,this.IN_HEADER)},f.prototype.IN_HEADER=function(t){return this._onHeader(65535&(this._partialChunkHeader|t.readUInt8()))},f.prototype.IN_CHUNK=function(t){return this._chunkSize<=t.remaining()?(this._currentMessage.push(t.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=t.remaining(),this._currentMessage.push(t.readSlice(t.remaining())),this.IN_CHUNK)},f.prototype.CLOSED=function(t){},f.prototype._onHeader=function(t){if(0!==t)return this._chunkSize=t,this.IN_CHUNK;var e=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:e=this._currentMessage[0];break;default:e=new a.default(this._currentMessage)}return this._currentMessage=[],this.onmessage(e),this.AWAITING_CHUNK},f.prototype.write=function(t){for(;t.hasRemaining();)this._state=this._state(t)},o=f;function f(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}r.Dechunker=o},{"../buf/base-buf":16,"./combined-buf":25,"./node":22}],25:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,s=t("../buf"),u=t("./node"),o=(i=s.BaseBuffer,o(c,i),c.prototype.getUInt8=function(t){for(var e=0;e<this._buffers.length;e++){var r=this._buffers[e];if(!(t>=r.length))return r.getUInt8(t);t-=r.length}},c.prototype.getInt8=function(t){for(var e=0;e<this._buffers.length;e++){var r=this._buffers[e];if(!(t>=r.length))return r.getInt8(t);t-=r.length}},c.prototype.getFloat64=function(t){for(var e=u.alloc(8),r=0;r<8;r++)e.putUInt8(r,this.getUInt8(t+r));return e.getFloat64(0)},c);function c(t){for(var e=this,r=0,n=0;n<t.length;n++)r+=t[n].length;return(e=i.call(this,r)||this)._buffers=t,e}r.default=o},{"../buf":17,"./node":22}],26:[function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.ChannelConfig=void 0,o(t("./node"),r),o(t("./chunking"),r);var s=t("./channel-config");Object.defineProperty(r,"ChannelConfig",{enumerable:!0,get:function(){return i(s).default}})},{"./channel-config":23,"./chunking":24,"./node":22}],27:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,s,u,c){return new(u=u||Promise)(function(r,e){function n(t){try{i(c.next(t))}catch(t){e(t)}}function o(t){try{i(c.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?r(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(n,o)}i((c=c.apply(t,s||[])).next())})},s=this&&this.__generator||function(r,n){var o,i,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(r,u)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var c,a=u(t("./connection-provider-pooled")),l=t("../connection"),u=t("neo4j-driver-core"),t=u.internal.constants,f=t.BOLT_PROTOCOL_V4_0,p=t.BOLT_PROTOCOL_V3,h=u.error.SERVICE_UNAVAILABLE,o=(u.error.newError,c=a.default,o(d,c),d.prototype.acquireConnection=function(t){var r=this,t=void 0===t?{}:t,n=(t.accessMode,t.database),e=(t.bookmarks,l.ConnectionErrorHandler.create({errorCode:h,handleAuthorizationExpired:function(t,e){return r._handleAuthorizationExpired(t,e,n)}}));return this._connectionPool.acquire(this._address).then(function(t){return new l.DelegateConnection(t,e)})},d.prototype._handleAuthorizationExpired=function(t,e,r){return this._log.warn("Direct driver "+this._id+" will close connection to "+e+" for database '"+r+"' because of an error "+t.code+" '"+t.message+"'"),this._connectionPool.purge(e).catch(function(){}),t},d.prototype._hasProtocolVersion=function(n){return i(this,void 0,void 0,function(){var e,r;return s(this,function(t){switch(t.label){case 0:return[4,l.createChannelConnection(this._address,this._config,this._createConnectionErrorHandler(),this._log)];case 1:return e=t.sent(),r=e.protocol()?e.protocol().version:null,[4,e.close()];case 2:return t.sent(),r?[2,n(r)]:[2,!1]}})})},d.prototype.supportsMultiDb=function(){return i(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(t){return f<=t})];case 1:return[2,t.sent()]}})})},d.prototype.supportsTransactionConfig=function(){return i(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(t){return p<=t})];case 1:return[2,t.sent()]}})})},d);function d(t){var e=t.id,r=t.config,n=t.log,o=t.address,i=t.userAgent,t=t.authToken,t=c.call(this,{id:e,config:r,log:n,userAgent:i,authToken:t})||this;return t._address=o,t}r.default=o},{"../connection":36,"./connection-provider-pooled":28,"neo4j-driver-core":58}],28:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),u=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return s(e,t),e},c=this&&this.__awaiter||function(t,s,u,c){return new(u=u||Promise)(function(r,e){function n(t){try{i(c.next(t))}catch(t){e(t)}}function o(t){try{i(c.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?r(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(n,o)}i((c=c.apply(t,s||[])).next())})},a=this&&this.__generator||function(r,n){var o,i,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(r,u)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(r,"__esModule",{value:!0});var l,f=t("../connection"),p=u(t("../pool")),t=t("neo4j-driver-core"),h=t.error.SERVICE_UNAVAILABLE,o=(l=t.ConnectionProvider,o(d,l),d.prototype._createConnectionErrorHandler=function(){return new f.ConnectionErrorHandler(h)},d.prototype._createConnection=function(t,r){var n=this;return this._createChannelConnection(t).then(function(e){return e._release=function(){return r(t,e)},(n._openConnections[e.id]=e).connect(n._userAgent,n._authToken).catch(function(t){throw n._destroyConnection(e),t})})},d.prototype._validateConnection=function(t){if(!t.isOpen())return!1;var e=this._config.maxConnectionLifetime;return Date.now()-t.creationTimestamp<=e},d.prototype._destroyConnection=function(t){return delete this._openConnections[t.id],t.close()},d.prototype.close=function(){return c(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this._connectionPool.close()];case 1:return t.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(t){return t.close()}))];case 2:return t.sent(),[2]}})})},d._installIdleObserverOnConnection=function(t,e){t._queueObserver(e)},d._removeIdleObserverOnConnection=function(t){t._updateCurrentObserver()},d);function d(t,e){var r=t.id,n=t.config,o=t.log,i=t.userAgent,t=t.authToken;void 0===e&&(e=null);var s=l.call(this)||this;return s._id=r,s._config=n,s._log=o,s._userAgent=i,s._authToken=t,s._createChannelConnection=e||function(t){return f.createChannelConnection(t,s._config,s._createConnectionErrorHandler(),s._log)},s._connectionPool=new p.default({create:s._createConnection.bind(s),destroy:s._destroyConnection.bind(s),validate:s._validateConnection.bind(s),installIdleObserver:d._installIdleObserverOnConnection.bind(s),removeIdleObserver:d._removeIdleObserverOnConnection.bind(s),config:p.PoolConfig.fromDriverConfig(n),log:s._log}),s._openConnections={},s}r.default=o},{"../connection":36,"../pool":46,"neo4j-driver-core":58}],29:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),l=this&&this.__assign||function(){return(l=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),u=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return s(e,t),e},f=this&&this.__awaiter||function(t,s,u,c){return new(u=u||Promise)(function(r,e){function n(t){try{i(c.next(t))}catch(t){e(t)}}function o(t){try{i(c.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?r(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(n,o)}i((c=c.apply(t,s||[])).next())})},p=this&&this.__generator||function(r,n){var o,i,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(r,u)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var d,b=t("neo4j-driver-core"),_=u(t("../rediscovery")),y=t("../channel"),v=h(t("./connection-provider-single")),h=h(t("./connection-provider-pooled")),m=t("../load-balancing"),g=t("../connection"),O=b.error.SERVICE_UNAVAILABLE,w=b.error.SESSION_EXPIRED,S=b.internal.bookmark.Bookmark,t=b.internal.constants,E=t.ACCESS_MODE_READ,P=t.ACCESS_MODE_WRITE,j=t.BOLT_PROTOCOL_V3,T=t.BOLT_PROTOCOL_V4_0,C=null,x=b.int(3e4),o=(d=h.default,o(I,d),I.prototype._createConnectionErrorHandler=function(){return new g.ConnectionErrorHandler(w)},I.prototype._handleUnavailability=function(t,e,r){return this._log.warn("Routing driver "+this._id+" will forget "+e+" for database '"+r+"' because of an error "+t.code+" '"+t.message+"'"),this.forget(e,r||C),t},I.prototype._handleAuthorizationExpired=function(t,e,r){return this._log.warn("Routing driver "+this._id+" will close connections to "+e+" for database '"+r+"' because of an error "+t.code+" '"+t.message+"'"),this._connectionPool.purge(e).catch(function(){}),t},I.prototype._handleWriteFailure=function(t,e,r){return this._log.warn("Routing driver "+this._id+" will forget writer "+e+" for database '"+r+"' because of an error "+t.code+" '"+t.message+"'"),this.forgetWriter(e,r||C),b.newError("No longer possible to write to server at "+e,w)},I.prototype.acquireConnection=function(t){var t=void 0===t?{}:t,u=t.accessMode,c=t.database,a=t.bookmarks;return f(this,void 0,void 0,function(){var e,r,n,o,i,s=this;return p(this,function(t){switch(t.label){case 0:return n=new g.ConnectionErrorHandler(w,function(t,e){return s._handleUnavailability(t,e,c)},function(t,e){return s._handleWriteFailure(t,e,c)},function(t,e){return s._handleAuthorizationExpired(t,e,c)}),[4,this._freshRoutingTable({accessMode:u,database:c||C,bookmark:a})];case 1:if(o=t.sent(),u===E)r=this._loadBalancingStrategy.selectReader(o.readers),e="read";else{if(u!==P)throw b.newError("Illegal mode "+u);r=this._loadBalancingStrategy.selectWriter(o.writers),e="write"}if(!r)throw b.newError("Failed to obtain connection towards "+e+" server. Known routing table is: "+o,w);t.label=2;case 2:return t.trys.push([2,4,,5]),[4,this._acquireConnectionToServer(r,e,o)];case 3:return i=t.sent(),[2,new g.DelegateConnection(i,n)];case 4:throw i=t.sent(),n.handleAndTransformError(i,r);case 5:return[2]}})})},I.prototype._hasProtocolVersion=function(i){return f(this,void 0,void 0,function(){var e,r,n,o;return p(this,function(t){switch(t.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:r=t.sent(),e=0,t.label=2;case 2:if(!(e<r.length))return[3,8];t.label=3;case 3:return t.trys.push([3,6,,7]),[4,g.createChannelConnection(r[e],this._config,this._createConnectionErrorHandler(),this._log)];case 4:return r=t.sent(),n=r.protocol()?r.protocol().version:null,[4,r.close()];case 5:return t.sent(),n?[2,i(n)]:[2,!1];case 6:return o=t.sent(),o=o,[3,7];case 7:return e++,[3,2];case 8:if(o)throw o;return[2,!1]}})})},I.prototype.supportsMultiDb=function(){return f(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(t){return T<=t})];case 1:return[2,t.sent()]}})})},I.prototype.supportsTransactionConfig=function(){return f(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion(function(t){return j<=t})];case 1:return[2,t.sent()]}})})},I.prototype.forget=function(e,t){this._routingTableRegistry.apply(t,{applyWhenExists:function(t){return t.forget(e)}}),this._connectionPool.purge(e).catch(function(){})},I.prototype.forgetWriter=function(e,t){this._routingTableRegistry.apply(t,{applyWhenExists:function(t){return t.forgetWriter(e)}})},I.prototype._acquireConnectionToServer=function(t,e,r){return this._connectionPool.acquire(t)},I.prototype._freshRoutingTable=function(t){var e=void 0===t?{}:t,r=e.accessMode,n=e.database,t=e.bookmark,e=this._routingTableRegistry.get(n,function(){return new _.RoutingTable({database:n})});return e.isStaleFor(r)?(this._log.info('Routing table is stale for database: "'+n+'" and access mode: "'+r+'": '+e),this._refreshRoutingTable(e,t)):e},I.prototype._refreshRoutingTable=function(t,e){var r=t.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(r,t,e):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(r,t,e)},I.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(n,o,i){return f(this,void 0,void 0,function(){var e,r;return p(this,function(t){switch(t.label){case 0:return e=[],[4,this._fetchRoutingTableUsingSeedRouter(e,this._seedRouter,o,i)];case 1:return(r=t.sent())?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(n,o,i)];case 3:r=t.sent(),t.label=4;case 4:return[4,this._applyRoutingTableIfPossible(o,r)];case 5:return[2,t.sent()]}})})},I.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(r,n,o){return f(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(r,n,o)];case 1:return(e=t.sent())?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(r,this._seedRouter,n,o)];case 2:e=t.sent(),t.label=3;case 3:return[4,this._applyRoutingTableIfPossible(n,e)];case 4:return[2,t.sent()]}})})},I.prototype._fetchRoutingTableUsingKnownRouters=function(r,n,o){return f(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return[4,this._fetchRoutingTable(r,n,o)];case 1:return(e=t.sent())?[2,e]:(e=r.length-1,I._forgetRouter(n,r,e),[2,null])}})})},I.prototype._fetchRoutingTableUsingSeedRouter=function(r,n,o,i){return f(this,void 0,void 0,function(){var e;return p(this,function(t){switch(t.label){case 0:return[4,this._resolveSeedRouter(n)];case 1:return e=t.sent(),e=e.filter(function(t){return r.indexOf(t)<0}),[4,this._fetchRoutingTable(e,o,i)];case 2:return[2,t.sent()]}})})},I.prototype._resolveSeedRouter=function(n){return f(this,void 0,void 0,function(){var e,r=this;return p(this,function(t){switch(t.label){case 0:return[4,this._hostNameResolver.resolve(n)];case 1:return e=t.sent(),[4,Promise.all(e.map(function(t){return r._dnsResolver.resolve(t)}))];case 2:return e=t.sent(),[2,[].concat.apply([],e)]}})})},I.prototype._fetchRoutingTable=function(s,u,c){var t=this;return s.reduce(function(n,o,i){return f(t,void 0,void 0,function(){var e,r;return p(this,function(t){switch(t.label){case 0:return[4,n];case 1:return(r=t.sent())?[2,r]:(I._forgetRouter(u,s,i-1),[4,this._createSessionForRediscovery(o,c)]);case 2:if(!(e=t.sent()))return[3,8];t.label=3;case 3:return t.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(e,u.database,o)];case 4:return[2,t.sent()];case 5:if((r=t.sent())&&"Neo.ClientError.Database.DatabaseNotFound"===r.code)throw r;return this._log.warn("unable to fetch routing table because of an error "+r),[2,null];case 6:return e.close(),[7];case 7:return[3,9];case 8:return[2,null];case 9:return[2]}})})},Promise.resolve(null))},I.prototype._createSessionForRediscovery=function(n,o){return f(this,void 0,void 0,function(){var e,r;return p(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this._connectionPool.acquire(n)];case 1:return e=t.sent(),r=new v.default(e),e.protocol().version<4?[2,new b.Session({mode:P,bookmark:S.empty(),connectionProvider:r})]:[2,new b.Session({mode:E,database:"system",bookmark:o,connectionProvider:r})];case 2:if((r=t.sent())&&"Neo.ClientError.Security.Unauthorized"===r.code)throw r;return[2,null];case 3:return[2]}})})},I.prototype._applyRoutingTableIfPossible=function(e,r){return f(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:if(!r)throw b.newError("Could not perform discovery. No routing servers available. Known routing table: "+e,O);return 0===r.writers.length&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(r)];case 1:return t.sent(),[2,r]}})})},I.prototype._updateRoutingTable=function(e){return f(this,void 0,void 0,function(){return p(this,function(t){switch(t.label){case 0:return[4,this._connectionPool.keepAll(e.allServers())];case 1:return t.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(e.database,e),this._log.info("Updated routing table "+e),[2]}})})},I._forgetRouter=function(t,e,r){r=e[r];t&&r&&t.forgetRouter(r)},I);function I(t){var e=t.id,r=t.address,n=t.routingContext,o=t.hostNameResolver,i=t.config,s=t.log,u=t.userAgent,c=t.authToken,t=t.routingTablePurgeDelay,a=d.call(this,{id:e,config:i,log:s,userAgent:u,authToken:c},function(t){return g.createChannelConnection(t,a._config,a._createConnectionErrorHandler(),a._log,a._routingContext)})||this;return a._routingContext=l(l({},n),{address:r.toString()}),a._seedRouter=r,a._rediscovery=new _.default(a._routingContext),a._loadBalancingStrategy=new m.LeastConnectedLoadBalancingStrategy(a._connectionPool),a._hostNameResolver=o,a._dnsResolver=new y.HostNameResolver,a._log=s,a._useSeedRouter=!0,a._routingTableRegistry=new A(t?b.int(t):x),a}r.default=o;var A=(k.prototype.register=function(t,e){return this._tables.set(t,e),this},k.prototype.apply=function(t,e){var r=void 0===e?{}:e,e=r.applyWhenExists,r=r.applyWhenDontExists,r=void 0===r?function(){}:r;return this._tables.has(t)?e(this._tables.get(t)):"string"==typeof t||null===t?r():this._forEach(e),this},k.prototype.get=function(t,e){return this._tables.has(t)?this._tables.get(t):"function"==typeof e?e():e},k.prototype.removeExpired=function(){var e=this;return this._removeIf(function(t){return t.isExpiredFor(e._routingTablePurgeDelay)})},k.prototype._forEach=function(t){var e,r;try{for(var n=c(this._tables),o=n.next();!o.done;o=n.next())t(a(o.value,2)[1])}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return this},k.prototype._remove=function(t){return this._tables.delete(t),this},k.prototype._removeIf=function(t){var e,r;try{for(var n=c(this._tables),o=n.next();!o.done;o=n.next()){var i=a(o.value,2),s=i[0];t(i[1])&&this._remove(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return this},k);function k(t){this._tables=new Map,this._routingTablePurgeDelay=t}},{"../channel":26,"../connection":36,"../load-balancing":38,"../rediscovery":49,"./connection-provider-pooled":28,"./connection-provider-single":30,"neo4j-driver-core":58}],30:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,t=t("neo4j-driver-core"),o=(i=t.ConnectionProvider,o(s,i),s.prototype.acquireConnection=function(t){t=void 0===t?{}:t,t.accessMode,t.database,t.bookmarks,t=this._connection;return this._connection=null,Promise.resolve(t)},s);function s(t){var e=i.call(this)||this;return e._connection=t,e}r.default=o},{"neo4j-driver-core":58}],31:[function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.RoutingConnectionProvider=r.DirectConnectionProvider=r.PooledConnectionProvider=r.SingleConnectionProvider=void 0;var o=t("./connection-provider-single");Object.defineProperty(r,"SingleConnectionProvider",{enumerable:!0,get:function(){return n(o).default}});var i=t("./connection-provider-pooled");Object.defineProperty(r,"PooledConnectionProvider",{enumerable:!0,get:function(){return n(i).default}});var s=t("./connection-provider-direct");Object.defineProperty(r,"DirectConnectionProvider",{enumerable:!0,get:function(){return n(s).default}});var u=t("./connection-provider-routing");Object.defineProperty(r,"RoutingConnectionProvider",{enumerable:!0,get:function(){return n(u).default}})},{"./connection-provider-direct":27,"./connection-provider-pooled":28,"./connection-provider-routing":29,"./connection-provider-single":30}],32:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,s,u,c){return new(u=u||Promise)(function(r,e){function n(t){try{i(c.next(t))}catch(t){e(t)}}function o(t){try{i(c.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?r(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(n,o)}i((c=c.apply(t,s||[])).next())})},s=this&&this.__generator||function(r,n){var o,i,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(r,u)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.createChannelConnection=void 0;var f=t("../channel"),c=t("neo4j-driver-core"),a=u(t("./connection")),p=u(t("../bolt")),l=c.error.PROTOCOL_ERROR,h=c.internal.logger.Logger,d=0;r.createChannelConnection=function(i,s,u,c,a,t){void 0===a&&(a=null);var l=(t=void 0===t?function(t){return new f.Channel(t)}:t)(new f.ChannelConfig(i,s,u.errorCode()));return p.default.handshake(l).then(function(t){var r=t.protocolVersion,e=t.consumeRemainingBuffer,n=new f.Chunker(l),o=new f.Dechunker,t=new _(l,u,i,c,s.disableLosslessIntegers,a,n,function(e){return p.default.create({version:r,channel:l,chunker:n,dechunker:o,disableLosslessIntegers:s.disableLosslessIntegers,useBigInt:s.useBigInt,serversideRouting:a,server:e.server,log:e.logger,observer:{onError:e._handleFatalError.bind(e),onFailure:e._resetOnFailure.bind(e),onProtocolError:e._handleProtocolError.bind(e),onErrorApplyTransformation:function(t){return e.handleAndTransformError(t,e._address)}}})});return e(function(t){return o.write(t)}),t}).catch(function(t){return l.close().then(function(){throw t})})};var b,_=(b=a.default,o(y,b),Object.defineProperty(y.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(t){this._dbConnectionId=t},enumerable:!1,configurable:!0}),y.prototype.connect=function(t,e){return this._initialize(t,e)},y.prototype._initialize=function(t,n){var o=this,i=this;return new Promise(function(r,e){o._protocol.initialize({userAgent:t,authToken:n,onError:function(t){return e(t)},onComplete:function(t){var e;t&&(e=t.server,o.version&&!e||(o.version=e),e=t.connection_id,o.databaseId||(o.databaseId=e),!t.hints||null!=(t=t.hints["connection.recv_timeout_seconds"])&&(t=c.toNumber(t),Number.isInteger(t)&&0<t?o._ch.setupReceiveTimeout(1e3*t):o._log.info("Server located at "+o._address+" supplied an invalid connection receive timeout value ("+t+"). Please, verify the server configuration and status because this can be the symptom of a bigger issue."))),r(i)}})})},y.prototype.protocol=function(){return this._protocol},Object.defineProperty(y.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"version",{get:function(){return this._server.version},set:function(t){this._server.version=t},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),y.prototype._handleFatalError=function(t){this._isBroken=!0,this._error=this.handleAndTransformError(t,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error "+c.json.stringify(this._error)),this._protocol.notifyFatalError(this._error)},y.prototype._queueObserver=function(t){return this._protocol.queueObserverIfProtocolIsNotBroken(t)},y.prototype.hasOngoingObservableRequests=function(){return this._protocol.hasOngoingObservableRequests()},y.prototype.resetAndFlush=function(){var r=this;return new Promise(function(t,e){r._protocol.reset({onError:function(t){r._isBroken?e(t):(t=r._handleProtocolError("Received FAILURE as a response for RESET: "+t),e(t))},onComplete:function(){t()}})})},y.prototype._resetOnFailure=function(){var t=this;this._protocol.reset({onError:function(){t._protocol.resetFailure()},onComplete:function(){t._protocol.resetFailure()}})},y.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},y.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},y.prototype.close=function(){return i(this,void 0,void 0,function(){return s(this,function(t){switch(t.label){case 0:return this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return t.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},y.prototype.toString=function(){return"Connection ["+this.id+"]["+(this.databaseId||"")+"]"},y.prototype._handleProtocolError=function(t){this._protocol.resetFailure(),this._updateCurrentObserver();t=c.newError(t,l);return this._handleFatalError(t),t},y);function y(t,e,r,n,o,i,s,u){void 0===o&&(o=!1),void 0===i&&(i=null);var c,a,e=b.call(this,e)||this;return e._id=d++,e._address=r,e._server={address:r.asHostPort()},e.creationTimestamp=Date.now(),e._disableLosslessIntegers=o,e._ch=t,e._chunker=s,e._log=(c=e,new h((a=n)._level,function(t,e){return a._loggerFunction(t,c+" "+e)})),e._serversideRouting=i,e._dbConnectionId=null,e._protocol=u(e),e._isBroken=!1,e._log.isDebugEnabled()&&e._log.debug("created towards "+r),e}r.default=_},{"../bolt":11,"../channel":26,"./connection":35,"neo4j-driver-core":58}],33:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var s,t=i(t("./connection")),o=(s=t.default,o(u,s),Object.defineProperty(u.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(t){this._delegate.databaseId=t},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"version",{get:function(){return this._delegate.version},set:function(t){this._delegate.version=t},enumerable:!1,configurable:!0}),u.prototype.isOpen=function(){return this._delegate.isOpen()},u.prototype.protocol=function(){return this._delegate.protocol()},u.prototype.connect=function(t,e){return this._delegate.connect(t,e)},u.prototype.write=function(t,e,r){return this._delegate.write(t,e,r)},u.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},u.prototype.close=function(){return this._delegate.close()},u.prototype._release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate._release()},u);function u(t,e){var r=s.call(this,e)||this;return e&&(r._originalErrorHandler=t._errorHandler,t._errorHandler=r._errorHandler),r._delegate=t,r}r.default=o},{"./connection":35}],34:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=t("neo4j-driver-core"),n=t.error.SERVICE_UNAVAILABLE,o=t.error.SESSION_EXPIRED,t=(i.create=function(t){return new i(t.errorCode,t.handleUnavailability,t.handleWriteFailure,t.handleAuthorizationExpired)},i.prototype.errorCode=function(){return this._errorCode},i.prototype.handleAndTransformError=function(t,e){return(r=t)&&"Neo.ClientError.Security.AuthorizationExpired"===r.code?this._handleAuthorizationExpired(t,e):function(t){if(t)return t.code===o||t.code===n||"Neo.TransientError.General.DatabaseUnavailable"===t.code;return!1}(t)?this._handleUnavailability(t,e):function(t){if(t)return"Neo.ClientError.Cluster.NotALeader"===t.code||"Neo.ClientError.General.ForbiddenOnReadOnlyDatabase"===t.code;return!1}(t)?this._handleWriteFailure(t,e):t;var r},i);function i(t,e,r,n){this._errorCode=t,this._handleUnavailability=e||s,this._handleWriteFailure=r||s,this._handleAuthorizationExpired=n||s}function s(t){return t}r.default=t},{"neo4j-driver-core":58}],35:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(Object.defineProperty(o.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),o.prototype.isOpen=function(){throw new Error("not implemented")},o.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(o.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),o.prototype.connect=function(t,e){throw new Error("not implemented")},o.prototype.write=function(t,e,r){throw new Error("not implemented")},o.prototype.resetAndFlush=function(){throw new Error("not implemented")},o.prototype.close=function(){throw new Error("not implemented")},o.prototype.handleAndTransformError=function(t,e){return this._errorHandler?this._errorHandler.handleAndTransformError(t,e):t},o);function o(t){this._errorHandler=t}r.default=n},{}],36:[function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.createChannelConnection=r.ConnectionErrorHandler=r.DelegateConnection=r.ChannelConnection=r.Connection=void 0;var u=s(t("./connection"));r.Connection=u.default;var c=i(t("./connection-channel"));r.ChannelConnection=c.default,Object.defineProperty(r,"createChannelConnection",{enumerable:!0,get:function(){return c.createChannelConnection}});i=s(t("./connection-delegate"));r.DelegateConnection=i.default;t=s(t("./connection-error-handler"));r.ConnectionErrorHandler=t.default,r.default=u.default},{"./connection":35,"./connection-channel":32,"./connection-delegate":33,"./connection-error-handler":34}],37:[function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},s=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.pool=r.packstream=r.channel=r.buf=r.bolt=r.loadBalancing=void 0,r.loadBalancing=i(t("./load-balancing")),r.bolt=i(t("./bolt")),r.buf=i(t("./buf")),r.channel=i(t("./channel")),r.packstream=i(t("./packstream")),r.pool=i(t("./pool")),s(t("./connection-provider"),r)},{"./bolt":11,"./buf":17,"./channel":26,"./connection-provider":31,"./load-balancing":38,"./packstream":42,"./pool":46}],38:[function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.LeastConnectedLoadBalancingStrategy=r.LoadBalancingStrategy=void 0;var o=n(t("./load-balancing-strategy"));r.LoadBalancingStrategy=o.default;t=n(t("./least-connected-load-balancing-strategy"));r.LeastConnectedLoadBalancingStrategy=t.default,r.default=t.default},{"./least-connected-load-balancing-strategy":39,"./load-balancing-strategy":40}],39:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var s,u=i(t("./round-robin-array-index")),t=i(t("./load-balancing-strategy")),o=(s=t.default,o(c,s),c.prototype.selectReader=function(t){return this._select(t,this._readersIndex)},c.prototype.selectWriter=function(t){return this._select(t,this._writersIndex)},c.prototype._select=function(t,e){var r=t.length;if(0===r)return null;var n=e.next(r),o=n,i=null,s=Number.MAX_SAFE_INTEGER;do{var u=t[o],c=this._connectionPool.activeResourceCount(u)}while(c<s&&(i=u,s=c),o===r-1?o=0:o++,o!==n);return i},c);function c(t){var e=s.call(this)||this;return e._readersIndex=new u.default,e._writersIndex=new u.default,e._connectionPool=t,e}r.default=o},{"./load-balancing-strategy":40,"./round-robin-array-index":41}],40:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.prototype.selectReader=function(t){throw new Error("Abstract function")},o.prototype.selectWriter=function(t){throw new Error("Abstract function")},o);function o(){}r.default=n},{}],41:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.prototype.next=function(t){if(0===t)return-1;var e=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),e%t},o);function o(t){this._offset=t||0}r.default=n},{}],42:[function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e};Object.defineProperty(r,"__esModule",{value:!0}),r.v2=r.v1=void 0;var s=i(t("./packstream-v1"));r.v1=s;t=i(t("./packstream-v2"));r.v2=t,r.default=t},{"./packstream-v1":43,"./packstream-v2":44}],43:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Structure=r.Unpacker=r.Packer=void 0;var o=t("../channel"),f=t("neo4j-driver-core"),n=f.error.PROTOCOL_ERROR,u=(i.prototype.toString=function(){for(var t="",e=0;e<this.fields.length;e++)0<e&&(t+=", "),t+=this.fields[e];return"Structure("+this.signature+", ["+t+"])"},i);function i(t,e){this.signature=t,this.fields=e}r.Structure=u;s.prototype.packable=function(i){var t,s=this;if(null===i)return function(){return s._ch.writeUInt8(192)};if(!0===i)return function(){return s._ch.writeUInt8(195)};if(!1===i)return function(){return s._ch.writeUInt8(194)};if("number"==typeof i)return function(){return s.packFloat(i)};if("string"==typeof i)return function(){return s.packString(i)};if("bigint"==typeof i)return function(){return s.packInteger(f.int(i))};if(f.isInt(i))return function(){return s.packInteger(i)};if(i instanceof Int8Array)return function(){return s.packBytes(i)};if(i instanceof Array)return function(){s.packListHeader(i.length);for(var t=0;t<i.length;t++)s.packable(void 0===i[t]?null:i[t])()};if(null!=(t=i)&&"function"==typeof t[Symbol.iterator])return this.packableIterable(i);if(i instanceof f.Node)return this._nonPackableValue("It is not allowed to pass nodes in query parameters, given: "+i);if(i instanceof f.Relationship)return this._nonPackableValue("It is not allowed to pass relationships in query parameters, given: "+i);if(i instanceof f.Path)return this._nonPackableValue("It is not allowed to pass paths in query parameters, given: "+i);if(i instanceof u){for(var e=[],r=0;r<i.fields.length;r++)e[r]=this.packable(i.fields[r]);return function(){return s.packStruct(i.signature,e)}}return"object"==typeof i?function(){for(var t=Object.keys(i),e=0,r=0;r<t.length;r++)void 0!==i[t[r]]&&e++;s.packMapHeader(e);for(var n=0;n<t.length;n++){var o=t[n];void 0!==i[o]&&(s.packString(o),s.packable(i[o])())}}:this._nonPackableValue("Unable to pack the given value: "+i)},s.prototype.packableIterable=function(e){try{var t=Array.from(e);return this.packable(t)}catch(t){throw f.newError("Cannot pack given iterable, "+t.message+": "+e)}},s.prototype.packStruct=function(t,e){this.packStructHeader((e=e||[]).length,t);for(var r=0;r<e.length;r++)e[r]()},s.prototype.packInteger=function(t){var e=t.high,r=t.low;t.greaterThanOrEqual(-16)&&t.lessThan(128)?this._ch.writeInt8(r):t.greaterThanOrEqual(-128)&&t.lessThan(-16)?(this._ch.writeUInt8(200),this._ch.writeInt8(r)):t.greaterThanOrEqual(-32768)&&t.lessThan(32768)?(this._ch.writeUInt8(201),this._ch.writeInt16(r)):(t.greaterThanOrEqual(-2147483648)&&t.lessThan(2147483648)?this._ch.writeUInt8(202):(this._ch.writeUInt8(203),this._ch.writeInt32(e)),this._ch.writeInt32(r))},s.prototype.packFloat=function(t){this._ch.writeUInt8(193),this._ch.writeFloat64(t)},s.prototype.packString=function(t){var e=o.utf8.encode(t),t=e.length;if(t<16)this._ch.writeUInt8(128|t),this._ch.writeBytes(e);else if(t<256)this._ch.writeUInt8(208),this._ch.writeUInt8(t),this._ch.writeBytes(e);else if(t<65536)this._ch.writeUInt8(209),this._ch.writeUInt8(t/256>>0),this._ch.writeUInt8(t%256),this._ch.writeBytes(e);else{if(!(t<4294967296))throw f.newError("UTF-8 strings of size "+t+" are not supported");this._ch.writeUInt8(210),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256),this._ch.writeBytes(e)}},s.prototype.packListHeader=function(t){if(t<16)this._ch.writeUInt8(144|t);else if(t<256)this._ch.writeUInt8(212),this._ch.writeUInt8(t);else if(t<65536)this._ch.writeUInt8(213),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else{if(!(t<4294967296))throw f.newError("Lists of size "+t+" are not supported");this._ch.writeUInt8(214),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256)}},s.prototype.packBytes=function(t){if(!this._byteArraysSupported)throw f.newError("Byte arrays are not supported by the database this driver is connected to");this.packBytesHeader(t.length);for(var e=0;e<t.length;e++)this._ch.writeInt8(t[e])},s.prototype.packBytesHeader=function(t){if(t<256)this._ch.writeUInt8(204),this._ch.writeUInt8(t);else if(t<65536)this._ch.writeUInt8(205),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256);else{if(!(t<4294967296))throw f.newError("Byte arrays of size "+t+" are not supported");this._ch.writeUInt8(206),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256)}},s.prototype.packMapHeader=function(t){if(t<16)this._ch.writeUInt8(160|t);else if(t<256)this._ch.writeUInt8(216),this._ch.writeUInt8(t);else if(t<65536)this._ch.writeUInt8(217),this._ch.writeUInt8(t/256>>0),this._ch.writeUInt8(t%256);else{if(!(t<4294967296))throw f.newError("Maps of size "+t+" are not supported");this._ch.writeUInt8(218),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256)}},s.prototype.packStructHeader=function(t,e){if(t<16)this._ch.writeUInt8(176|t),this._ch.writeUInt8(e);else if(t<256)this._ch.writeUInt8(220),this._ch.writeUInt8(t),this._ch.writeUInt8(e);else{if(!(t<65536))throw f.newError("Structures of size "+t+" are not supported");this._ch.writeUInt8(221),this._ch.writeUInt8(t/256>>0),this._ch.writeUInt8(t%256)}},s.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},s.prototype._nonPackableValue=function(t){return function(){throw f.newError(t,n)}},t=s;function s(t){this._ch=t,this._byteArraysSupported=!0}r.Packer=t;c.prototype.unpack=function(t){var e=t.readUInt8(),r=240&e,n=15&e;if(192===e)return null;var o=this._unpackBoolean(e);if(null!==o)return o;o=this._unpackNumberOrInteger(e,t);if(null!==o){if(f.isInt(o)){if(this._useBigInt)return o.toBigInt();if(this._disableLosslessIntegers)return o.toNumberOrInfinity()}return o}o=this._unpackString(e,r,n,t);if(null!==o)return o;o=this._unpackList(e,r,n,t);if(null!==o)return o;o=this._unpackByteArray(e,t);if(null!==o)return o;o=this._unpackMap(e,r,n,t);if(null!==o)return o;t=this._unpackStruct(e,r,n,t);if(null!==t)return t;throw f.newError("Unknown packed value with marker "+e.toString(16))},c.prototype.unpackInteger=function(t){var e=t.readUInt8(),t=this._unpackInteger(e,t);if(null==t)throw f.newError("Unable to unpack integer value with marker "+e.toString(16));return t},c.prototype._unpackBoolean=function(t){return 195===t||194!==t&&null},c.prototype._unpackNumberOrInteger=function(t,e){return 193===t?e.readFloat64():this._unpackInteger(t,e)},c.prototype._unpackInteger=function(t,e){if(0<=t&&t<128)return f.int(t);if(240<=t&&t<256)return f.int(t-256);if(200===t)return f.int(e.readInt8());if(201===t)return f.int(e.readInt16());if(202===t){var r=e.readInt32();return f.int(r)}if(203!==t)return null;t=e.readInt32(),e=e.readInt32();return new f.Integer(e,t)},c.prototype._unpackString=function(t,e,r,n){return 128===e?o.utf8.decode(n,r):208===t?o.utf8.decode(n,n.readUInt8()):209===t?o.utf8.decode(n,n.readUInt16()):210===t?o.utf8.decode(n,n.readUInt32()):null},c.prototype._unpackList=function(t,e,r,n){return 144===e?this._unpackListWithSize(r,n):212===t?this._unpackListWithSize(n.readUInt8(),n):213===t?this._unpackListWithSize(n.readUInt16(),n):214===t?this._unpackListWithSize(n.readUInt32(),n):null},c.prototype._unpackListWithSize=function(t,e){for(var r=[],n=0;n<t;n++)r.push(this.unpack(e));return r},c.prototype._unpackByteArray=function(t,e){return 204===t?this._unpackByteArrayWithSize(e.readUInt8(),e):205===t?this._unpackByteArrayWithSize(e.readUInt16(),e):206===t?this._unpackByteArrayWithSize(e.readUInt32(),e):null},c.prototype._unpackByteArrayWithSize=function(t,e){for(var r=new Int8Array(t),n=0;n<t;n++)r[n]=e.readInt8();return r},c.prototype._unpackMap=function(t,e,r,n){return 160===e?this._unpackMapWithSize(r,n):216===t?this._unpackMapWithSize(n.readUInt8(),n):217===t?this._unpackMapWithSize(n.readUInt16(),n):218===t?this._unpackMapWithSize(n.readUInt32(),n):null},c.prototype._unpackMapWithSize=function(t,e){for(var r={},n=0;n<t;n++)r[this.unpack(e)]=this.unpack(e);return r},c.prototype._unpackStruct=function(t,e,r,n){return 176===e?this._unpackStructWithSize(r,n):220===t?this._unpackStructWithSize(n.readUInt8(),n):221===t?this._unpackStructWithSize(n.readUInt16(),n):null},c.prototype._unpackStructWithSize=function(t,e){var r=e.readUInt8();return 78===r?this._unpackNode(t,e):82===r?this._unpackRelationship(t,e):114===r?this._unpackUnboundRelationship(t,e):80===r?this._unpackPath(t,e):this._unpackUnknownStruct(r,t,e)},c.prototype._unpackNode=function(t,e){return this._verifyStructSize("Node",3,t),new f.Node(this.unpack(e),this.unpack(e),this.unpack(e))},c.prototype._unpackRelationship=function(t,e){return this._verifyStructSize("Relationship",5,t),new f.Relationship(this.unpack(e),this.unpack(e),this.unpack(e),this.unpack(e),this.unpack(e))},c.prototype._unpackUnboundRelationship=function(t,e){return this._verifyStructSize("UnboundRelationship",3,t),new f.UnboundRelationship(this.unpack(e),this.unpack(e),this.unpack(e))},c.prototype._unpackPath=function(t,e){this._verifyStructSize("Path",3,t);for(var r=this.unpack(e),n=this.unpack(e),o=this.unpack(e),i=[],s=r[0],u=0;u<o.length;u+=2){var c=r[o[u+1]],a=f.toNumber(o[u]),l=void 0;0<a?(l=n[a-1])instanceof f.UnboundRelationship&&(n[a-1]=l=l.bind(s.identity,c.identity)):(l=n[-a-1])instanceof f.UnboundRelationship&&(n[-a-1]=l=l.bind(c.identity,s.identity)),i.push(new f.PathSegment(s,l,c)),s=c}return new f.Path(r[0],r[r.length-1],i)},c.prototype._unpackUnknownStruct=function(t,e,r){for(var n=new u(t,[]),o=0;o<e;o++)n.fields.push(this.unpack(r));return n},c.prototype._verifyStructSize=function(t,e,r){if(e!==r)throw f.newError("Wrong struct size for "+t+", expected "+e+" but was "+r,n)},t=c;function c(t,e){void 0===e&&(e=!1),this._disableLosslessIntegers=t=void 0===t?!1:t,this._useBigInt=e}r.Unpacker=t},{"../channel":26,"neo4j-driver-core":58}],44:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),u=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return s(e,t),e};Object.defineProperty(r,"__esModule",{value:!0}),r.Unpacker=r.Packer=void 0;var c,u=u(t("./packstream-v1")),a=t("neo4j-driver-core"),l=t("./temporal-factory"),t=a.internal.temporalUtil,f=t.dateToEpochDay,p=t.localDateTimeToEpochSecond,h=t.localTimeToNanoOfDay,d=88,b=3,_=89,y=4,v=69,m=4,g=116,O=1,w=84,S=2,E=68,P=1,j=100,T=2,C=70,x=3,I=102,A=3,t=(c=u.Packer,o(k,c),k.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},k.prototype.packable=function(i){var s=this;return a.isPoint(i)?function(){var t,e;e=s,(null===(t=i).z||void 0===t.z?function(t,e){t=[e.packable(a.int(t.srid)),e.packable(t.x),e.packable(t.y)];e.packStruct(d,t)}:function(t,e){t=[e.packable(a.int(t.srid)),e.packable(t.x),e.packable(t.y),e.packable(t.z)];e.packStruct(_,t)})(t,e)}:a.isDuration(i)?function(){var t,e,r,n,o;t=i,e=s,r=a.int(t.months),n=a.int(t.days),o=a.int(t.seconds),t=a.int(t.nanoseconds),t=[e.packable(r),e.packable(n),e.packable(o),e.packable(t)],e.packStruct(v,t)}:a.isLocalTime(i)?function(){return function(t,e){t=h(t.hour,t.minute,t.second,t.nanosecond),t=[e.packable(t)];e.packStruct(g,t)}(i,s)}:a.isTime(i)?function(){var t,e,r;e=s,r=h((t=i).hour,t.minute,t.second,t.nanosecond),t=a.int(t.timeZoneOffsetSeconds),t=[e.packable(r),e.packable(t)],e.packStruct(w,t)}:a.isDate(i)?function(){return function(t,e){t=f(t.year,t.month,t.day),t=[e.packable(t)];e.packStruct(E,t)}(i,s)}:a.isLocalDateTime(i)?function(){var t,e,r;e=s,r=p((t=i).year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond),t=a.int(t.nanosecond),t=[e.packable(r),e.packable(t)],e.packStruct(j,t)}:a.isDateTime(i)?function(){var t,e;e=s,((t=i).timeZoneId?function(t,e){var r=p(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond),n=a.int(t.nanosecond),t=t.timeZoneId,t=[e.packable(r),e.packable(n),e.packable(t)];e.packStruct(I,t)}:function(t,e){var r=p(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond),n=a.int(t.nanosecond),t=a.int(t.timeZoneOffsetSeconds),t=[e.packable(r),e.packable(n),e.packable(t)];e.packStruct(C,t)})(t,e)}:c.prototype.packable.call(this,i)},k);function k(){return null!==c&&c.apply(this,arguments)||this}r.Packer=t;var R,o=(R=u.Unpacker,o(N,R),N.prototype._unpackUnknownStruct=function(t,e,r){return t===d?(o=e,i=r,(n=this)._verifyStructSize("Point2D",b,o),new a.Point(n.unpack(i),n.unpack(i),n.unpack(i),void 0)):t===_?(o=e,n=r,(i=this)._verifyStructSize("Point3D",y,o),new a.Point(i.unpack(n),i.unpack(n),i.unpack(n),i.unpack(n))):t===v?function(t,e,r){t._verifyStructSize("Duration",m,e);var n=t.unpack(r),o=t.unpack(r),e=t.unpack(r),r=t.unpack(r);return new a.Duration(n,o,e,r)}(this,e,r):t===g?function(t,e,r,n){t._verifyStructSize("LocalTime",O,e);r=t.unpackInteger(r);return M(l.nanoOfDayToLocalTime(r),n)}(this,e,r,this._disableLosslessIntegers,this._useBigInt):t===w?function(t,e,r,n,o){t._verifyStructSize("Time",S,e);e=t.unpackInteger(r),r=t.unpackInteger(r),e=l.nanoOfDayToLocalTime(e);return M(new a.Time(e.hour,e.minute,e.second,e.nanosecond,r),n,o)}(this,e,r,this._disableLosslessIntegers,this._useBigInt):t===E?function(t,e,r,n,o){t._verifyStructSize("Date",P,e);r=t.unpackInteger(r);return M(l.epochDayToDate(r),n,o)}(this,e,r,this._disableLosslessIntegers,this._useBigInt):t===j?function(t,e,r,n,o){t._verifyStructSize("LocalDateTime",T,e);e=t.unpackInteger(r),r=t.unpackInteger(r);return M(l.epochSecondAndNanoToLocalDateTime(e,r),n,o)}(this,e,r,this._disableLosslessIntegers,this._useBigInt):t===C?function(t,e,r,n,o){t._verifyStructSize("DateTimeWithZoneOffset",x,e);var i=t.unpackInteger(r),e=t.unpackInteger(r),r=t.unpackInteger(r),e=l.epochSecondAndNanoToLocalDateTime(i,e);return M(new a.DateTime(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond,r,null),n,o)}(this,e,r,this._disableLosslessIntegers,this._useBigInt):t===I?function(t,e,r,n,o){t._verifyStructSize("DateTimeWithZoneId",A,e);var i=t.unpackInteger(r),e=t.unpackInteger(r),r=t.unpack(r),e=l.epochSecondAndNanoToLocalDateTime(i,e);return M(new a.DateTime(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond,null,r),n,o)}(this,e,r,this._disableLosslessIntegers,this._useBigInt):R.prototype._unpackUnknownStruct.call(this,t,e,r,this._disableLosslessIntegers,this._useBigInt);var n,o,i},N);function N(t,e){return R.call(this,t=void 0===t?!1:t,e=void 0===e?!1:e)||this}function M(t,e,r){if(!e&&!r)return t;var n,o,i,s=Object.create(Object.getPrototypeOf(t));for(n in t)t.hasOwnProperty(n)&&(o=t[n],s[n]=a.isInt(o)?(i=o,r?i.toBigInt():i.toNumberOrInfinity()):o);return Object.freeze(s),s}r.Unpacker=o},{"./packstream-v1":43,"./temporal-factory":45,"neo4j-driver-core":58}],45:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.epochSecondAndNanoToLocalDateTime=r.nanoOfDayToLocalTime=r.epochDayToDate=void 0;var o=t("neo4j-driver-core"),t=o.internal.temporalUtil,i=t.DAYS_0000_TO_1970,s=t.DAYS_PER_400_YEAR_CYCLE,u=t.NANOS_PER_HOUR,c=t.NANOS_PER_MINUTE,a=t.NANOS_PER_SECOND,n=t.SECONDS_PER_DAY,l=t.floorDiv,f=t.floorMod;function p(t){var e=(t=o.int(t)).add(i).subtract(60),r=o.int(0);e.lessThan(0)&&(r=(n=e.add(1).div(s).subtract(1)).multiply(400),e=e.add(n.multiply(-s)));var t=e.multiply(400).add(591).div(s),n=e.subtract(t.multiply(365).add(t.div(4)).subtract(t.div(100)).add(t.div(400)));n.lessThan(0)&&(t=t.subtract(1),n=e.subtract(t.multiply(365).add(t.div(4)).subtract(t.div(100)).add(t.div(400))));t=t.add(r),e=n,r=e.multiply(5).add(2).div(153),n=r.add(2).modulo(12).add(1),e=e.subtract(r.multiply(306).add(5).div(10)).add(1);return t=t.add(r.div(10)),new o.Date(t,n,e)}function h(t){var e=(t=o.int(t)).div(u),r=(t=t.subtract(e.multiply(u))).div(c),n=(t=t.subtract(r.multiply(c))).div(a),t=t.subtract(n.multiply(a));return new o.LocalTime(e,r,n,t)}r.epochDayToDate=p,r.nanoOfDayToLocalTime=h,r.epochSecondAndNanoToLocalDateTime=function(t,e){var r=l(t,n),e=f(t,n).multiply(a).add(e),r=p(r),e=h(e);return new o.LocalDateTime(r.year,r.month,r.day,e.hour,e.minute,e.second,e.nanosecond)}},{"neo4j-driver-core":58}],46:[function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_MAX_SIZE=r.DEFAULT_ACQUISITION_TIMEOUT=r.PoolConfig=r.Pool=void 0;var u=i(t("./pool-config"));r.PoolConfig=u.default,Object.defineProperty(r,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return u.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(r,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return u.DEFAULT_MAX_SIZE}});t=s(t("./pool"));r.Pool=t.default,r.default=t.default},{"./pool":48,"./pool-config":47}],47:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_ACQUISITION_TIMEOUT=r.DEFAULT_MAX_SIZE=void 0;r.DEFAULT_MAX_SIZE=100;r.DEFAULT_ACQUISITION_TIMEOUT=6e4;var n=(o.defaultConfig=function(){return new o(100,6e4)},o.fromDriverConfig=function(t){return new o(s(t.maxConnectionPoolSize)?t.maxConnectionPoolSize:100,s(t.connectionAcquisitionTimeout)?t.connectionAcquisitionTimeout:6e4)},o);function o(t,e){this.maxSize=i(t,100),this.acquisitionTimeout=i(e,6e4)}function i(t,e){return 0===t||t?t:e}function s(t){return 0===t||t}r.default=n},{}],48:[function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,s,u,c){return new(u=u||Promise)(function(r,e){function n(t){try{i(c.next(t))}catch(t){e(t)}}function o(t){try{i(c.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?r(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(n,o)}i((c=c.apply(t,s||[])).next())})},a=this&&this.__generator||function(r,n){var o,i,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(r,u)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var u=o(t("./pool-config")),c=t("neo4j-driver-core"),l=c.internal.logger.Logger,t=(i.prototype.acquire=function(s){var u=this;return this._acquire(s).then(function(t){var o=s.asKey();if(t)return t;var i=u._acquireRequests;return i[o]||(i[o]=[]),new Promise(function(t,e){var r=setTimeout(function(){var t,e=i[o];e&&(i[o]=e.filter(function(t){return t!==n})),n.isCompleted()||(t=u.activeResourceCount(s),e=u.has(s)?u._pools[o].length:0,n.reject(c.newError("Connection acquisition timed out in "+u._acquisitionTimeout+" ms. Pool status: Active conn count = "+t+", Idle conn count = "+e+".")))},u._acquisitionTimeout),n=new f(o,t,e,r,u._log);i[o].push(n)})})},i.prototype.purge=function(t){return this._purgeKey(t.asKey())},i.prototype.close=function(){var e=this;return this._closed=!0,Promise.all(Object.keys(this._pools).map(function(t){return e._purgeKey(t)}))},i.prototype.keepAll=function(t){var e=this,r=t.map(function(t){return t.asKey()}),t=Object.keys(this._pools).filter(function(t){return-1===r.indexOf(t)});return Promise.all(t.map(function(t){return e._purgeKey(t)}))},i.prototype.has=function(t){return t.asKey()in this._pools},i.prototype.activeResourceCount=function(t){return this._activeResourceCounts[t.asKey()]||0},i.prototype._acquire=function(i){return n(this,void 0,void 0,function(){var e,r,n,o;return a(this,function(t){switch(t.label){case 0:if(this._closed)throw c.newError("Pool is closed, it is no more able to serve requests.");e=i.asKey(),(r=this._pools[e])||(r=[],this._pools[e]=r,this._pendingCreates[e]=0),t.label=1;case 1:return r.length?(n=r.pop(),this._validate(n)?(this._removeIdleObserver&&this._removeIdleObserver(n),s(e,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug(n+" acquired from the pool "+e),[2,n]):[3,2]):[3,5];case 2:return[4,this._destroy(n)];case 3:t.sent(),t.label=4;case 4:return[3,1];case 5:if(0<this._maxSize&&this.activeResourceCount(i)+this._pendingCreates[e]>=this._maxSize)return[2,null];this._pendingCreates[e]=this._pendingCreates[e]+1,t.label=6;case 6:return t.trys.push([6,,8,9]),[4,this._create(i,this._release)];case 7:return o=t.sent(),s(e,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug(o+" created for the pool "+e),[3,9];case 8:return this._pendingCreates[e]=this._pendingCreates[e]-1,[7];case 9:return[2,o]}})})},i.prototype._release=function(u,c){return n(this,void 0,void 0,function(){var o,i,s=this;return a(this,function(t){switch(t.label){case 0:return(o=u.asKey(),i=this._pools[o])?this._validate(c)?[3,2]:(this._log.isDebugEnabled()&&this._log.debug(c+" destroyed and can't be released to the pool "+o+" because it is not functional"),[4,this._destroy(c)]):[3,4];case 1:return t.sent(),[3,3];case 2:this._installIdleObserver&&this._installIdleObserver(c,{onError:function(t){s._log.debug("Idle connection "+c+" destroyed because of error: "+t);t=s._pools[o];t&&(s._pools[o]=t.filter(function(t){return t!==c})),s._destroy(c).catch(function(){})}}),i.push(c),this._log.isDebugEnabled()&&this._log.debug(c+" released to the pool "+o),t.label=3;case 3:return[3,6];case 4:return this._log.isDebugEnabled()&&this._log.debug(c+" destroyed and can't be released to the pool "+o+" because pool has been purged"),[4,this._destroy(c)];case 5:t.sent(),t.label=6;case 6:return e=o,r=this._activeResourceCounts,0<(n=(r[e]||0)-1)?r[e]=n:delete r[e],this._processPendingAcquireRequests(u),[2]}var e,r,n})})},i.prototype._purgeKey=function(r){return n(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:e=this._pools[r]||[],t.label=1;case 1:return e.length?(e=e.pop(),this._removeIdleObserver&&this._removeIdleObserver(e),[4,this._destroy(e)]):[3,3];case 2:return t.sent(),[3,1];case 3:return delete this._pools[r],[2]}})})},i.prototype._processPendingAcquireRequests=function(e){var r,n=this,t=e.asKey(),o=this._acquireRequests[t];o&&((r=o.shift())?this._acquire(e).catch(function(t){return r.reject(t),null}).then(function(t){t&&(r.isCompleted()?n._release(e,t):r.resolve(t))}):delete this._acquireRequests[t])},i);function i(t){var e=void 0===t?{}:t,r=e.create,n=void 0===r?function(t,e){return Promise.resolve()}:r,o=e.destroy,i=void 0===o?function(t){return Promise.resolve()}:o,s=e.validate,t=void 0===s?function(t){return!0}:s,r=e.installIdleObserver,o=void 0===r?function(t,e){}:r,s=e.removeIdleObserver,r=void 0===s?function(t){}:s,s=e.config,s=void 0===s?u.default.defaultConfig():s,e=e.log,e=void 0===e?l.noOp():e;this._create=n,this._destroy=i,this._validate=t,this._installIdleObserver=o,this._removeIdleObserver=r,this._maxSize=s.maxSize,this._acquisitionTimeout=s.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=e,this._closed=!1}function s(t,e){var r=e[t]||0;e[t]=r+1}var f=(p.prototype.isCompleted=function(){return this._completed},p.prototype.resolve=function(t){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug(t+" acquired from the pool "+this._key),this._resolve(t))},p.prototype.reject=function(t){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(t))},p);function p(t,e,r,n,o){this._key=t,this._resolve=e,this._reject=r,this._timeoutId=n,this._log=o,this._completed=!1}r.default=t},{"./pool-config":47,"neo4j-driver-core":58}],49:[function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.RoutingTable=r.Rediscovery=void 0;var o=n(t("./rediscovery"));r.Rediscovery=o.default;t=n(t("./routing-table"));r.RoutingTable=t.default,r.default=o.default},{"./rediscovery":50,"./routing-table":51}],50:[function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var i=n(t("./routing-table")),u=t("../bolt"),c=t("neo4j-driver-core"),a=c.error.SERVICE_UNAVAILABLE,t=(o.prototype.lookupRoutingTableOnRouter=function(e,r,n){var o=this;return e._acquireConnection(function(t){return o._requestRawRoutingTable(t,e,r,n).then(function(t){return t.isNull?null:i.default.fromRawRoutingTable(r,n,t)})})},o.prototype._requestRawRoutingTable=function(t,n,o,i){var s=this;return new Promise(function(e,r){t.protocol().requestRoutingInformation({routingContext:s._routingContext,databaseName:o,sessionContext:{bookmark:n._lastBookmark,mode:n._mode,database:n._database,afterComplete:n._onComplete},onCompleted:e,onError:function(t){"Neo.ClientError.Database.DatabaseNotFound"===t.code?r(t):"Neo.ClientError.Procedure.ProcedureNotFound"===t.code?r(c.newError("Server at "+i.asHostPort()+" can't perform routing. Make sure you are connecting to a causal cluster",a)):e(u.RawRoutingTable.ofNull())}})})},o);function o(t){this._routingContext=t}r.default=t},{"../bolt":11,"./routing-table":51,"neo4j-driver-core":58}],51:[function(t,e,r){"use strict";var n=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spreadArray||function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};Object.defineProperty(r,"__esModule",{value:!0}),r.createValidRoutingTable=void 0;var u=t("neo4j-driver-core"),t=u.internal.constants,i=t.ACCESS_MODE_WRITE,s=t.ACCESS_MODE_READ,c=u.internal.serverAddress.ServerAddress,a=u.error.PROTOCOL_ERROR,l=(f.fromRawRoutingTable=h,f.prototype.forget=function(t){this.readers=p(this.readers,t),this.writers=p(this.writers,t)},f.prototype.forgetRouter=function(t){this.routers=p(this.routers,t)},f.prototype.forgetWriter=function(t){this.writers=p(this.writers,t)},f.prototype.isStaleFor=function(t){return this.expirationTime.lessThan(Date.now())||this.routers.length<1||t===s&&0===this.readers.length||t===i&&0===this.writers.length},f.prototype.isExpiredFor=function(t){return this.expirationTime.add(t).lessThan(Date.now())},f.prototype.allServers=function(){return o(o(o([],n(this.routers)),n(this.readers)),n(this.writers))},f.prototype.toString=function(){return"RoutingTable[database="+this.databaseName+", expirationTime="+this.expirationTime+", currentTime="+Date.now()+", routers=["+this.routers+"], readers=["+this.readers+"], writers=["+this.writers+"]]"},f);function f(t){var e=void 0===t?{}:t,r=e.database,n=e.routers,o=e.readers,i=e.writers,t=e.expirationTime,e=e.ttl;this.database=r,this.databaseName=r||"default database",this.routers=n||[],this.readers=o||[],this.writers=i||[],this.expirationTime=t||u.int(0),this.ttl=e}function p(t,e){return t.filter(function(t){return t.asKey()!==e.asKey()})}function h(t,e,r){var n=r.ttl,o=function(e,r){try{var t=u.int(Date.now()),n=u.int(e.ttl).multiply(1e3).add(t);return n.lessThan(t)?u.Integer.MAX_VALUE:n}catch(t){throw u.newError("Unable to parse TTL entry from router "+r+" from raw routing table:\n"+u.json.stringify(e)+"\nError message: "+t.message,a)}}(r,e),i=function(e,r){try{var n=[],o=[],i=[];return e.servers.forEach(function(t){var e=t.role,t=t.addresses;"ROUTE"===e?n=b(t).map(function(t){return c.fromUrl(t)}):"WRITE"===e?i=b(t).map(function(t){return c.fromUrl(t)}):"READ"===e&&(o=b(t).map(function(t){return c.fromUrl(t)}))}),{routers:n,readers:o,writers:i}}catch(t){throw u.newError("Unable to parse servers entry from router "+r+" from addresses:\n"+u.json.stringify(e.servers)+"\nError message: "+t.message,a)}}(r,e),s=i.routers,r=i.readers,i=i.writers;return d(s,"routers",e),d(r,"readers",e),new l({database:t,routers:s,readers:r,writers:i,expirationTime:o,ttl:n})}function d(t,e,r){if(0===t.length)throw u.newError("Received no "+e+" from router "+r,a)}function b(t){if(!Array.isArray(t))throw new TypeError("Array expected but got: "+t);return Array.from(t)}r.default=l,r.createValidRoutingTable=h},{"neo4j-driver-core":58}],52:[function(t,e,r){"use strict";function c(t,e,r){return e<=t&&t<=r}function i(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function s(t){this.tokens=[].slice.call(t)}s.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};function a(t,e){if(t)throw TypeError("Decoder error");return e||65533}var n="utf-8";function o(t,e){if(!(this instanceof o))return new o(t,e);if((t=void 0!==t?String(t).toLowerCase():n)!==n)throw new Error("Encoding not supported. Only utf-8 is supported");e=i(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(e.fatal),this._ignoreBOM=Boolean(e.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function u(t,e){if(!(this instanceof u))return new u(t,e);if((t=void 0!==t?String(t).toLowerCase():n)!==n)throw new Error("Encoding not supported. Only utf-8 is supported");e=i(e),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(e.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function l(t){var r=t.fatal,n=0,o=0,i=0,s=128,u=191;this.handler=function(t,e){if(-1===e&&0!==i)return i=0,a(r);if(-1===e)return-1;if(0===i){if(c(e,0,127))return e;if(c(e,194,223))i=1,n=e-192;else if(c(e,224,239))224===e&&(s=160),237===e&&(u=159),i=2,n=e-224;else{if(!c(e,240,244))return a(r);240===e&&(s=144),244===e&&(u=143),i=3,n=e-240}return n<<=6*i,null}if(!c(e,s,u))return n=i=o=0,s=128,u=191,t.prepend(e),a(r);if(u=191,n+=e-(s=128)<<6*(i-(o+=1)),o!==i)return null;e=n;return n=i=o=0,e}}function f(t){t.fatal;this.handler=function(t,e){if(-1===e)return-1;if(c(e,0,127))return e;var r,n;c(e,128,2047)?(r=1,n=192):c(e,2048,65535)?(r=2,n=224):c(e,65536,1114111)&&(r=3,n=240);for(var o=[(e>>6*r)+n];0<r;)o.push(128|63&e>>6*(r-1)),--r;return o}}o.prototype={decode:function(t,e){t="object"==typeof t&&t instanceof ArrayBuffer?new Uint8Array(t):"object"==typeof t&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0);e=i(e),this._streaming||(this._decoder=new l({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(e.stream);for(var r,n=new s(t),o=[];!n.endOfStream()&&-1!==(r=this._decoder.handler(n,n.read()));)null!==r&&(Array.isArray(r)?o.push.apply(o,r):o.push(r));if(!this._streaming){for(;-1!==(r=this._decoder.handler(n,n.read()))&&(null!==r&&(Array.isArray(r)?o.push.apply(o,r):o.push(r)),!n.endOfStream()););this._decoder=null}return o.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===o[0]?(this._BOMseen=!0,o.shift()):this._BOMseen=!0)),function(t){for(var e="",r=0;r<t.length;++r){var n=t[r];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return e}(o)}},u.prototype={encode:function(t,e){t=t?String(t):"",e=i(e),this._streaming||(this._encoder=new f(this._options)),this._streaming=Boolean(e.stream);for(var r,n=[],o=new s(function(t){for(var e=String(t),r=e.length,n=0,o=[];n<r;){var i,s=e.charCodeAt(n);s<55296||57343<s?o.push(s):56320<=s&&s<=57343?o.push(65533):55296<=s&&s<=56319&&(n!==r-1&&56320<=(i=t.charCodeAt(n+1))&&i<=57343?(o.push(65536+((1023&s)<<10)+(1023&i)),n+=1):o.push(65533)),n+=1}return o}(t));!o.endOfStream()&&-1!==(r=this._encoder.handler(o,o.read()));)Array.isArray(r)?n.push.apply(n,r):n.push(r);if(!this._streaming){for(;-1!==(r=this._encoder.handler(o,o.read()));)Array.isArray(r)?n.push.apply(n,r):n.push(r);this._encoder=null}return new Uint8Array(n)}},r.TextEncoder=u,r.TextDecoder=o},{}],53:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.prototype.acquireConnection=function(t){throw Error("Not implemented")},o.prototype.supportsMultiDb=function(){throw Error("Not implemented")},o.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},o.prototype.close=function(){throw Error("Not implemented")},o);function o(){}r.default=n},{}],54:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.prototype.isOpen=function(){return!1},o.prototype.protocol=function(){throw Error("Not implemented")},o.prototype.connect=function(t,e){throw Error("Not implemented")},o.prototype.write=function(t,e,r){throw Error("Not implemented")},o.prototype.resetAndFlush=function(){throw Error("Not implemented")},o.prototype.close=function(){throw Error("Not implemented")},o.prototype._release=function(){return Promise.resolve()},o);function o(){}r.default=n},{}],55:[function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.WRITE=r.READ=r.Driver=void 0;var s=t("./internal/bookmark"),o=t("./internal/connectivity-verifier"),i=n(t("./internal/resolver/configured-custom-resolver")),u=t("./internal/constants"),c=t("./internal/logger"),a=n(t("./session")),l=t("./internal/util"),f=36e5,p=1e3,t=u.ACCESS_MODE_READ;r.READ=t;var h=u.ACCESS_MODE_WRITE;r.WRITE=h;var d=0,t=(b.prototype.verifyConnectivity=function(t){var e=(void 0===t?{}:t).database,t=void 0===e?"":e,e=this._getOrCreateConnectionProvider();return new o.ConnectivityVerifier(e).verify({database:t})},b.prototype.supportsMultiDb=function(){return this._getOrCreateConnectionProvider().supportsMultiDb()},b.prototype.supportsTransactionConfig=function(){return this._getOrCreateConnectionProvider().supportsTransactionConfig()},b.prototype._supportsRouting=function(){return this._meta.routing},b.prototype._isEncrypted=function(){return this._config.encrypted===l.ENCRYPTION_ON},b.prototype._getTrust=function(){return this._config.trust},b.prototype.session=function(t){var e=void 0===t?{}:t,r=e.defaultAccessMode,n=e.bookmarks,t=e.database,e=e.fetchSize;return this._newSession({defaultAccessMode:void 0===r?h:r,bookmarkOrBookmarks:n,database:void 0===t?"":t,reactive:!1,fetchSize:y(e,this._config.fetchSize)})},b.prototype.close=function(){return this._log.info("Driver "+this._id+" closing"),this._connectionProvider?this._connectionProvider.close():Promise.resolve()},b.prototype._afterConstruction=function(){this._log.info(this._meta.typename+" driver "+this._id+" created for server address "+this._meta.address)},b.prototype._newSession=function(t){var e=t.defaultAccessMode,r=t.bookmarkOrBookmarks,n=t.database,o=t.reactive,i=t.fetchSize,t=a.default._validateSessionMode(e),e=this._getOrCreateConnectionProvider(),r=r?new s.Bookmark(r):s.Bookmark.empty();return new a.default({mode:t,database:n||"",connectionProvider:e,bookmark:r,config:this._config,reactive:o,fetchSize:i})},b.prototype._getOrCreateConnectionProvider=function(){var t;return this._connectionProvider||(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,(t=this._config,new i.default(t.resolver)))),this._connectionProvider},b);function b(t,e,r){var n;(n=e=void 0===e?{}:e).maxConnectionLifetime=_(n.maxConnectionLifetime,f),n.maxConnectionPoolSize=_(n.maxConnectionPoolSize,u.DEFAULT_POOL_MAX_SIZE),n.connectionAcquisitionTimeout=_(n.connectionAcquisitionTimeout,u.DEFAULT_POOL_ACQUISITION_TIMEOUT),n.fetchSize=y(n.fetchSize,p),function(t){var e=t.resolver;if(e&&"function"!=typeof e)throw new TypeError("Configured resolver should be a function. Got: "+e)}(e),this._id=d++,this._meta=t,this._config=e,this._log=c.Logger.create(e),this._createConnectionProvider=r,this._connectionProvider=null,this._afterConstruction()}function _(t,e){t=parseInt(t,10);return 0<t||0===t?t:t<0?Number.MAX_SAFE_INTEGER:e}function y(t,e){t=parseInt(t,10);if(0<t||t===u.FETCH_ALL)return t;if(0===t||t<0)throw new Error("The fetch size can only be a positive value or "+u.FETCH_ALL+" for ALL. However fetchSize = "+t);return e}r.Driver=t,r.default=t},{"./internal/bookmark":60,"./internal/connectivity-verifier":62,"./internal/constants":63,"./internal/logger":65,"./internal/resolver/configured-custom-resolver":68,"./internal/util":76,"./session":81}],56:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.PROTOCOL_ERROR=r.SESSION_EXPIRED=r.SERVICE_UNAVAILABLE=r.Neo4jError=r.newError=void 0;r.SERVICE_UNAVAILABLE="ServiceUnavailable";r.SESSION_EXPIRED="SessionExpired";r.PROTOCOL_ERROR="ProtocolError";var i,s="N/A",u=(i=Error,o(c,i),c);function c(t,e){t=i.call(this,t)||this;return t.constructor=c,t.__proto__=c.prototype,t.code=e,t.name="Neo4jError",t}r.Neo4jError=u,r.newError=function(t,e){return new u(t,null!=e?e:s)}},{}],57:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isPathSegment=r.PathSegment=r.isPath=r.Path=r.isUnboundRelationship=r.UnboundRelationship=r.isRelationship=r.Relationship=r.isNode=r.Node=void 0;var n=t("./json"),o={value:!0,enumerable:!1,configurable:!1,writable:!1},i="__isNode__",s="__isRelationship__",u="__isUnboundRelationship__",c="__isPath__",a="__isPathSegment__";function l(t,e){return!0===(t&&t[e])}f.prototype.toString=function(){for(var t="("+this.identity,e=0;e<this.labels.length;e++)t+=":"+this.labels[e];var r=Object.keys(this.properties);if(0<r.length){t+=" {";for(e=0;e<r.length;e++)0<e&&(t+=","),t+=r[e]+":"+n.stringify(this.properties[r[e]]);t+="}"}return t+=")"},t=f;function f(t,e,r){this.identity=t,this.labels=e,this.properties=r}r.Node=t,Object.defineProperty(t.prototype,i,o),r.isNode=function(t){return l(t,i)};var p=(h.prototype.toString=function(){var t="("+this.start+")-[:"+this.type,e=Object.keys(this.properties);if(0<e.length){t+=" {";for(var r=0;r<e.length;r++)0<r&&(t+=","),t+=e[r]+":"+n.stringify(this.properties[e[r]]);t+="}"}return t+="]->("+this.end+")"},h);function h(t,e,r,n,o){this.identity=t,this.start=e,this.end=r,this.type=n,this.properties=o}r.Relationship=p,Object.defineProperty(p.prototype,s,o),r.isRelationship=function(t){return l(t,s)};d.prototype.bind=function(t,e){return new p(this.identity,t,e,this.type,this.properties)},d.prototype.toString=function(){var t="-[:"+this.type,e=Object.keys(this.properties);if(0<e.length){t+=" {";for(var r=0;r<e.length;r++)0<r&&(t+=","),t+=e[r]+":"+n.stringify(this.properties[e[r]]);t+="}"}return t+="]->"},t=d;function d(t,e,r){this.identity=t,this.type=e,this.properties=r}r.UnboundRelationship=t,Object.defineProperty(t.prototype,u,o),r.isUnboundRelationship=function(t){return l(t,u)};t=function(t,e,r){this.start=t,this.relationship=e,this.end=r};r.PathSegment=t,Object.defineProperty(t.prototype,a,o),r.isPathSegment=function(t){return l(t,a)};t=function(t,e,r){this.start=t,this.end=e,this.segments=r,this.length=r.length};r.Path=t,Object.defineProperty(t.prototype,c,o),r.isPath=function(t){return l(t,c)}},{"./json":77}],58:[function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.types=r.Driver=r.Session=r.Transaction=r.Connection=r.ConnectionProvider=r.Result=r.Stats=r.QueryStatistics=r.ProfiledPlan=r.Plan=r.Notification=r.ServerInfo=r.queryType=r.ResultSummary=r.Record=r.isPathSegment=r.PathSegment=r.isPath=r.Path=r.isUnboundRelationship=r.UnboundRelationship=r.isRelationship=r.Relationship=r.isNode=r.Node=r.Time=r.LocalTime=r.LocalDateTime=r.isTime=r.isLocalTime=r.isLocalDateTime=r.isDuration=r.isDateTime=r.isDate=r.Duration=r.DateTime=r.Date=r.Point=r.isPoint=r.internal=r.toString=r.toNumber=r.inSafeRange=r.isInt=r.int=r.Integer=r.error=r.Neo4jError=r.newError=void 0,r.json=r.driver=void 0;var u=t("./error");Object.defineProperty(r,"newError",{enumerable:!0,get:function(){return u.newError}}),Object.defineProperty(r,"Neo4jError",{enumerable:!0,get:function(){return u.Neo4jError}});var c=i(t("./integer"));r.Integer=c.default,Object.defineProperty(r,"int",{enumerable:!0,get:function(){return c.int}}),Object.defineProperty(r,"isInt",{enumerable:!0,get:function(){return c.isInt}}),Object.defineProperty(r,"inSafeRange",{enumerable:!0,get:function(){return c.inSafeRange}}),Object.defineProperty(r,"toNumber",{enumerable:!0,get:function(){return c.toNumber}}),Object.defineProperty(r,"toString",{enumerable:!0,get:function(){return c.toString}});var a=t("./temporal-types");Object.defineProperty(r,"Date",{enumerable:!0,get:function(){return a.Date}}),Object.defineProperty(r,"DateTime",{enumerable:!0,get:function(){return a.DateTime}}),Object.defineProperty(r,"Duration",{enumerable:!0,get:function(){return a.Duration}}),Object.defineProperty(r,"isDate",{enumerable:!0,get:function(){return a.isDate}}),Object.defineProperty(r,"isDateTime",{enumerable:!0,get:function(){return a.isDateTime}}),Object.defineProperty(r,"isDuration",{enumerable:!0,get:function(){return a.isDuration}}),Object.defineProperty(r,"isLocalDateTime",{enumerable:!0,get:function(){return a.isLocalDateTime}}),Object.defineProperty(r,"isLocalTime",{enumerable:!0,get:function(){return a.isLocalTime}}),Object.defineProperty(r,"isTime",{enumerable:!0,get:function(){return a.isTime}}),Object.defineProperty(r,"LocalDateTime",{enumerable:!0,get:function(){return a.LocalDateTime}}),Object.defineProperty(r,"LocalTime",{enumerable:!0,get:function(){return a.LocalTime}}),Object.defineProperty(r,"Time",{enumerable:!0,get:function(){return a.Time}});var l=t("./graph-types");Object.defineProperty(r,"Node",{enumerable:!0,get:function(){return l.Node}}),Object.defineProperty(r,"isNode",{enumerable:!0,get:function(){return l.isNode}}),Object.defineProperty(r,"Relationship",{enumerable:!0,get:function(){return l.Relationship}}),Object.defineProperty(r,"isRelationship",{enumerable:!0,get:function(){return l.isRelationship}}),Object.defineProperty(r,"UnboundRelationship",{enumerable:!0,get:function(){return l.UnboundRelationship}}),Object.defineProperty(r,"isUnboundRelationship",{enumerable:!0,get:function(){return l.isUnboundRelationship}}),Object.defineProperty(r,"Path",{enumerable:!0,get:function(){return l.Path}}),Object.defineProperty(r,"isPath",{enumerable:!0,get:function(){return l.isPath}}),Object.defineProperty(r,"PathSegment",{enumerable:!0,get:function(){return l.PathSegment}}),Object.defineProperty(r,"isPathSegment",{enumerable:!0,get:function(){return l.isPathSegment}});var f=s(t("./record"));r.Record=f.default;var p=t("./spatial-types");Object.defineProperty(r,"isPoint",{enumerable:!0,get:function(){return p.isPoint}}),Object.defineProperty(r,"Point",{enumerable:!0,get:function(){return p.Point}});var h=i(t("./result-summary"));r.ResultSummary=h.default,Object.defineProperty(r,"queryType",{enumerable:!0,get:function(){return h.queryType}}),Object.defineProperty(r,"ServerInfo",{enumerable:!0,get:function(){return h.ServerInfo}}),Object.defineProperty(r,"Notification",{enumerable:!0,get:function(){return h.Notification}}),Object.defineProperty(r,"Plan",{enumerable:!0,get:function(){return h.Plan}}),Object.defineProperty(r,"ProfiledPlan",{enumerable:!0,get:function(){return h.ProfiledPlan}}),Object.defineProperty(r,"QueryStatistics",{enumerable:!0,get:function(){return h.QueryStatistics}}),Object.defineProperty(r,"Stats",{enumerable:!0,get:function(){return h.Stats}});var d=s(t("./result"));r.Result=d.default;var b=s(t("./connection-provider"));r.ConnectionProvider=b.default;var _=s(t("./connection"));r.Connection=_.default;var y=s(t("./transaction"));r.Transaction=y.default;var v=s(t("./session"));r.Session=v.default;var m=i(t("./driver")),g=m;r.Driver=m.default,r.driver=g;b=i(t("./types"));r.types=b;s=i(t("./json"));r.json=s;i=i(t("./internal"));r.internal=i;t={SERVICE_UNAVAILABLE:u.SERVICE_UNAVAILABLE,SESSION_EXPIRED:u.SESSION_EXPIRED,PROTOCOL_ERROR:u.PROTOCOL_ERROR};r.error=t;s={newError:u.newError,Neo4jError:u.Neo4jError,error:t,Integer:c.default,int:c.int,isInt:c.isInt,inSafeRange:c.inSafeRange,toNumber:c.toNumber,toString:c.toString,internal:i,isPoint:p.isPoint,Point:p.Point,Date:a.Date,DateTime:a.DateTime,Duration:a.Duration,isDate:a.isDate,isDateTime:a.isDateTime,isDuration:a.isDuration,isLocalDateTime:a.isLocalDateTime,isLocalTime:a.isLocalTime,isTime:a.isTime,LocalDateTime:a.LocalDateTime,LocalTime:a.LocalTime,Time:a.Time,Node:l.Node,isNode:l.isNode,Relationship:l.Relationship,isRelationship:l.isRelationship,UnboundRelationship:l.UnboundRelationship,isUnboundRelationship:l.isUnboundRelationship,Path:l.Path,isPath:l.isPath,PathSegment:l.PathSegment,isPathSegment:l.isPathSegment,Record:f.default,ResultSummary:h.default,queryType:h.queryType,ServerInfo:h.ServerInfo,Notification:h.Notification,Plan:h.Plan,ProfiledPlan:h.ProfiledPlan,QueryStatistics:h.QueryStatistics,Stats:h.Stats,Result:d.default,Transaction:y.default,Session:v.default,Driver:m.default,Connection:_.default,types:b,driver:g,json:s};r.default=s},{"./connection":54,"./connection-provider":53,"./driver":55,"./error":56,"./graph-types":57,"./integer":59,"./internal":64,"./json":77,"./record":78,"./result":80,"./result-summary":79,"./session":81,"./spatial-types":82,"./temporal-types":83,"./transaction":84,"./types":85}],59:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.toString=r.toNumber=r.inSafeRange=r.isInt=r.int=void 0;var a=t("./error"),n=new Map,o=(p.prototype.inSafeRange=function(){return this.greaterThanOrEqual(p.MIN_SAFE_VALUE)&&this.lessThanOrEqual(p.MAX_SAFE_VALUE)},p.prototype.toInt=function(){return this.low},p.prototype.toNumber=function(){return this.high*i+(this.low>>>0)},p.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(i)+BigInt(this.low>>>0);var t=this.negate();return BigInt(-1)*(BigInt(t.high>>>0)*BigInt(i)+BigInt(t.low>>>0))},p.prototype.toNumberOrInfinity=function(){return this.lessThan(p.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(p.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},p.prototype.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix out of range: "+t);if(this.isZero())return"0";if(this.isNegative()){if(this.equals(p.MIN_VALUE)){var e=p.fromNumber(t),r=this.div(e),n=r.multiply(e).subtract(this);return r.toString(t)+n.toInt().toString(t)}return"-"+this.negate().toString(t)}var o=p.fromNumber(Math.pow(t,6));n=this;for(var i="";;){var s=n.div(o),u=(n.subtract(s.multiply(o)).toInt()>>>0).toString(t);if((n=s).isZero())return u+i;for(;u.length<6;)u="0"+u;i=""+u+i}},p.prototype.getHighBits=function(){return this.high},p.prototype.getLowBits=function(){return this.low},p.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(p.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var t=0!==this.high?this.high:this.low,e=31;0<e&&0==(t&1<<e);e--);return 0!==this.high?e+33:e+1},p.prototype.isZero=function(){return 0===this.high&&0===this.low},p.prototype.isNegative=function(){return this.high<0},p.prototype.isPositive=function(){return 0<=this.high},p.prototype.isOdd=function(){return 1==(1&this.low)},p.prototype.isEven=function(){return 0==(1&this.low)},p.prototype.equals=function(t){t=p.fromValue(t);return this.high===t.high&&this.low===t.low},p.prototype.notEquals=function(t){return!this.equals(t)},p.prototype.lessThan=function(t){return this.compare(t)<0},p.prototype.lessThanOrEqual=function(t){return this.compare(t)<=0},p.prototype.greaterThan=function(t){return 0<this.compare(t)},p.prototype.greaterThanOrEqual=function(t){return 0<=this.compare(t)},p.prototype.compare=function(t){var e=p.fromValue(t);if(this.equals(e))return 0;var r=this.isNegative(),t=e.isNegative();return r&&!t||(r||!t)&&this.subtract(e).isNegative()?-1:1},p.prototype.negate=function(){return this.equals(p.MIN_VALUE)?p.MIN_VALUE:this.not().add(p.ONE)},p.prototype.add=function(t){var e=p.fromValue(t),r=this.high>>>16,n=65535&this.high,o=this.low>>>16,i=65535&this.low,s=e.high>>>16,u=65535&e.high,c=e.low>>>16,a=0,l=0,f=0,t=0;return f+=(t+=i+(65535&e.low))>>>16,l+=(f+=o+c)>>>16,a+=(l+=n+u)>>>16,a+=r+s,p.fromBits((f&=65535)<<16|(t&=65535),(a&=65535)<<16|(l&=65535))},p.prototype.subtract=function(t){t=p.fromValue(t);return this.add(t.negate())},p.prototype.multiply=function(t){if(this.isZero())return p.ZERO;var e=p.fromValue(t);if(e.isZero())return p.ZERO;if(this.equals(p.MIN_VALUE))return e.isOdd()?p.MIN_VALUE:p.ZERO;if(e.equals(p.MIN_VALUE))return this.isOdd()?p.MIN_VALUE:p.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(h)&&e.lessThan(h))return p.fromNumber(this.toNumber()*e.toNumber());var r=this.high>>>16,n=65535&this.high,o=this.low>>>16,i=65535&this.low,s=e.high>>>16,u=65535&e.high,c=e.low>>>16,a=65535&e.low,l=0,f=0,t=0,e=0;return t+=(e+=i*a)>>>16,f+=(t+=o*a)>>>16,t&=65535,f+=(t+=i*c)>>>16,l+=(f+=n*a)>>>16,f&=65535,l+=(f+=o*c)>>>16,f&=65535,l+=(f+=i*u)>>>16,l+=r*a+n*c+o*u+i*s,p.fromBits((t&=65535)<<16|(e&=65535),(l&=65535)<<16|(f&=65535))},p.prototype.div=function(t){var e,r,n,o=p.fromValue(t);if(o.isZero())throw a.newError("division by zero");if(this.isZero())return p.ZERO;{if(this.equals(p.MIN_VALUE))return o.equals(p.ONE)||o.equals(p.NEG_ONE)?p.MIN_VALUE:o.equals(p.MIN_VALUE)?p.ONE:(n=this.shiftRight(1).div(o).shiftLeft(1)).equals(p.ZERO)?o.isNegative()?p.ONE:p.NEG_ONE:(e=this.subtract(o.multiply(n)),r=n.add(e.div(o)));if(o.equals(p.MIN_VALUE))return p.ZERO}if(this.isNegative())return o.isNegative()?this.negate().div(o.negate()):this.negate().div(o).negate();if(o.isNegative())return this.div(o.negate()).negate();for(r=p.ZERO,e=this;e.greaterThanOrEqual(o);){n=Math.max(1,Math.floor(e.toNumber()/o.toNumber()));for(var i=Math.ceil(Math.log(n)/Math.LN2),s=i<=48?1:Math.pow(2,i-48),u=p.fromNumber(n),c=u.multiply(o);c.isNegative()||c.greaterThan(e);)c=(u=p.fromNumber(n-=s)).multiply(o);u.isZero()&&(u=p.ONE),r=r.add(u),e=e.subtract(c)}return r},p.prototype.modulo=function(t){t=p.fromValue(t);return this.subtract(this.div(t).multiply(t))},p.prototype.not=function(){return p.fromBits(~this.low,~this.high)},p.prototype.and=function(t){t=p.fromValue(t);return p.fromBits(this.low&t.low,this.high&t.high)},p.prototype.or=function(t){t=p.fromValue(t);return p.fromBits(this.low|t.low,this.high|t.high)},p.prototype.xor=function(t){t=p.fromValue(t);return p.fromBits(this.low^t.low,this.high^t.high)},p.prototype.shiftLeft=function(t){t=p.toNumber(t);return 0==(t&=63)?p.ZERO:t<32?p.fromBits(this.low<<t,this.high<<t|this.low>>>32-t):p.fromBits(0,this.low<<t-32)},p.prototype.shiftRight=function(t){var e=p.toNumber(t);return 0==(e&=63)?p.ZERO:t<32?p.fromBits(this.low>>>e|this.high<<32-e,this.high>>e):p.fromBits(this.high>>e-32,0<=this.high?0:-1)},p.isInteger=function(t){return!0===(t&&t.__isInteger__)},p.fromInt=function(t){var e;return-128<=(t|=0)&&t<128&&(e=n.get(t))||(e=new p(t,t<0?-1:0),-128<=t&&t<128&&n.set(t,e)),e},p.fromBits=function(t,e){return new p(t,e)},p.fromNumber=function(t){return isNaN(t)||!isFinite(t)?p.ZERO:t<=-s?p.MIN_VALUE:s<=t+1?p.MAX_VALUE:t<0?p.fromNumber(-t).negate():new p(t%i|0,t/i|0)},p.fromString=function(t,e){if(0===t.length)throw a.newError("number format error: empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return p.ZERO;if((e=e||10)<2||36<e)throw a.newError("radix out of range: "+e);var r;if(0<(r=t.indexOf("-")))throw a.newError('number format error: interior "-" character: '+t);if(0===r)return p.fromString(t.substring(1),e).negate();for(var n=p.fromNumber(Math.pow(e,8)),o=p.ZERO,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),u=parseInt(t.substring(i,i+s),e);o=s<8?(s=p.fromNumber(Math.pow(e,s)),o.multiply(s).add(p.fromNumber(u))):(o=o.multiply(n)).add(p.fromNumber(u))}return o},p.fromValue=function(t){return t instanceof p?t:"number"==typeof t?p.fromNumber(t):"string"==typeof t?p.fromString(t):"bigint"==typeof t?p.fromString(t.toString()):new p(t.low,t.high)},p.toNumber=function(t){switch(typeof t){case"number":return t;case"bigint":return Number(t);default:return p.fromValue(t).toNumber()}},p.toString=function(t,e){return p.fromValue(t).toString(e)},p.inSafeRange=function(t){return p.fromValue(t).inSafeRange()},p.ZERO=p.fromInt(0),p.ONE=p.fromInt(1),p.NEG_ONE=p.fromInt(-1),p.MAX_VALUE=p.fromBits(-1,2147483647),p.MIN_VALUE=p.fromBits(0,-2147483648),p.MIN_SAFE_VALUE=p.fromBits(1,-2097152),p.MAX_SAFE_VALUE=p.fromBits(-1,2097151),p.__isInteger__=!0,p);function p(t,e){this.low=t||0,this.high=e||0}Object.defineProperty(o.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var i=4294967296,s=i*i/2,h=o.fromInt(1<<24),t=o.fromValue;r.int=t;t=o.isInteger;r.isInt=t;t=o.inSafeRange;r.inSafeRange=t;t=o.toNumber;r.toNumber=t;t=o.toString;r.toString=t,r.default=o},{"./error":56}],60:[function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e};Object.defineProperty(r,"__esModule",{value:!0}),r.Bookmark=void 0;var s=i(t("./util")),t=(u.empty=function(){return c},u.prototype.isEmpty=function(){return 0===this._values.length},u.prototype.values=function(){return this._values},u.prototype.asBeginTransactionParameters=function(){var t;return this.isEmpty()?{}:((t={}).bookmarks=this._values,t)},u);function u(t){this._values=function(t){if(!t)return[];if(s.isString(t))return[t];if(Array.isArray(t)){for(var e=[],r=function r(t){return t.reduce(function(t,e){return Array.isArray(e)?t.concat(r(e)):t.concat(e)},[])}(t),n=0;n<r.length;n++){var o=r[n];if(null!=o){if(!s.isString(o))throw new TypeError("Bookmark value should be a string, given: '"+o+"'");e.push(o)}}return e}throw new TypeError("Bookmark should either be a string or a string array, given: '"+t+"'")}(t)}var c=new(r.Bookmark=t)(null)},{"./util":76}],61:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.EMPTY_CONNECTION_HOLDER=r.ReadOnlyConnectionHolder=r.ConnectionHolder=void 0;var i=t("../error"),s=t("./util"),u=t("./constants"),c=t("./bookmark"),a=(l.prototype.mode=function(){return this._mode},l.prototype.database=function(){return this._database},l.prototype.bookmark=function(){return this._bookmark},l.prototype.connectionProvider=function(){return this._connectionProvider},l.prototype.referenceCount=function(){return this._referenceCount},l.prototype.initializeConnection=function(){return 0===this._referenceCount&&this._connectionProvider?(this._connectionPromise=this._connectionProvider.acquireConnection({accessMode:this._mode,database:this._database,bookmarks:this._bookmark}),this._referenceCount++,!0):(this._referenceCount++,!1)},l.prototype.getConnection=function(){return this._connectionPromise},l.prototype.releaseConnection=function(){return 0===this._referenceCount?this._connectionPromise:(this._referenceCount--,0===this._referenceCount?this._releaseConnection():this._connectionPromise)},l.prototype.close=function(){return 0===this._referenceCount?this._connectionPromise:(this._referenceCount=0,this._releaseConnection())},l.prototype._releaseConnection=function(){return this._connectionPromise=this._connectionPromise.then(function(t){return t?t.resetAndFlush().catch(b).then(function(){return t._release()}):Promise.resolve()}).catch(b),this._connectionPromise},l);function l(t){var e=void 0===t?{}:t,r=e.mode,n=void 0===r?u.ACCESS_MODE_WRITE:r,t=e.database,r=void 0===t?"":t,t=e.bookmark,e=e.connectionProvider;this._mode=n,this._database=r?s.assertString(r,"database"):"",this._bookmark=t||c.Bookmark.empty(),this._connectionProvider=e,this._referenceCount=0,this._connectionPromise=Promise.resolve()}r.ConnectionHolder=a;var f,p,t=(o(h,f=a),h.prototype.initializeConnection=function(){return 0!==this._connectionHolder.referenceCount()},h.prototype.getConnection=function(){return this._connectionHolder.getConnection()},h.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve()})},h.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve()})},h);function h(t){var e=f.call(this,{mode:t.mode(),database:t.database(),bookmark:t.bookmark(),connectionProvider:t.connectionProvider()})||this;return e._connectionHolder=t,e}function d(){return null!==p&&p.apply(this,arguments)||this}r.ReadOnlyConnectionHolder=t,r.default=t;a=new(o(d,p=a),d.prototype.mode=function(){},d.prototype.database=function(){},d.prototype.initializeConnection=function(){return!0},d.prototype.getConnection=function(){return Promise.reject(i.newError("This connection holder does not serve connections"))},d.prototype.releaseConnection=function(){return Promise.resolve()},d.prototype.close=function(){return Promise.resolve()},d);function b(t){}r.EMPTY_CONNECTION_HOLDER=a},{"../error":56,"./bookmark":60,"./constants":63,"./util":76}],62:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ConnectivityVerifier=void 0;var n=t("./connection-holder"),o=t("./constants"),i=t("../error"),t=(s.prototype.verify=function(t){var e,r=(void 0===t?{}:t).database;return t=this._connectionProvider,r=void 0===r?"":r,(e=new n.ConnectionHolder({mode:o.ACCESS_MODE_READ,database:r,connectionProvider:t})).initializeConnection(),e.getConnection().then(function(t){if(!t)throw i.newError("Unexpected error acquiring transaction");return e.close().then(function(){return t.server})}).catch(function(t){return e.close().catch(function(t){}).then(function(){return Promise.reject(t)})})},s);function s(t){this._connectionProvider=t}r.ConnectivityVerifier=t},{"../error":56,"./connection-holder":61,"./constants":63}],63:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BOLT_PROTOCOL_V4_3=r.BOLT_PROTOCOL_V4_2=r.BOLT_PROTOCOL_V4_1=r.BOLT_PROTOCOL_V4_0=r.BOLT_PROTOCOL_V3=r.BOLT_PROTOCOL_V2=r.BOLT_PROTOCOL_V1=r.DEFAULT_POOL_MAX_SIZE=r.DEFAULT_POOL_ACQUISITION_TIMEOUT=r.ACCESS_MODE_WRITE=r.ACCESS_MODE_READ=r.FETCH_ALL=void 0;r.FETCH_ALL=-1;r.DEFAULT_POOL_ACQUISITION_TIMEOUT=6e4;r.DEFAULT_POOL_MAX_SIZE=100;r.ACCESS_MODE_READ="READ";r.ACCESS_MODE_WRITE="WRITE";r.BOLT_PROTOCOL_V1=1;r.BOLT_PROTOCOL_V2=2;r.BOLT_PROTOCOL_V3=3;r.BOLT_PROTOCOL_V4_0=4;r.BOLT_PROTOCOL_V4_1=4.1;r.BOLT_PROTOCOL_V4_2=4.2;r.BOLT_PROTOCOL_V4_3=4.3},{}],64:[function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e};Object.defineProperty(r,"__esModule",{value:!0}),r.retryStrategy=r.resolver=r.serverAddress=r.urlUtil=r.logger=r.connectivityVerifier=r.transactionExecutor=r.txConfig=r.connectionHolder=r.constants=r.bookmark=r.observer=r.temporalUtil=r.util=void 0;var s=i(t("./util"));r.util=s;s=i(t("./temporal-util"));r.temporalUtil=s;s=i(t("./observers"));r.observer=s;s=i(t("./bookmark"));r.bookmark=s;s=i(t("./constants"));r.constants=s;s=i(t("./connection-holder"));r.connectionHolder=s;s=i(t("./tx-config"));r.txConfig=s;s=i(t("./transaction-executor"));r.transactionExecutor=s;s=i(t("./connectivity-verifier"));r.connectivityVerifier=s;s=i(t("./logger"));r.logger=s;s=i(t("./url-util"));r.urlUtil=s;s=i(t("./server-address"));r.serverAddress=s;s=i(t("./resolver"));r.resolver=s;t=i(t("./retry-strategy"));r.retryStrategy=t},{"./bookmark":60,"./connection-holder":61,"./connectivity-verifier":62,"./constants":63,"./logger":65,"./observers":66,"./resolver":69,"./retry-strategy":70,"./server-address":71,"./temporal-util":72,"./transaction-executor":73,"./tx-config":74,"./url-util":75,"./util":76}],65:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.Logger=void 0;var i,s=t("../error"),u="error",c="warn",a="info",l="debug",f=a,p=((t={})[u]=0,t[c]=1,t[a]=2,t[l]=3,t),t=(h.create=function(t){if(t&&t.logging){t=t.logging;return new h(function(t){if(t&&t.level){var e=t.level,t=p[e];if(!t&&0!==t)throw s.newError("Illegal logging level: "+e+". Supported levels are: "+Object.keys(p));return e}return f}(t),function(t){if(t&&t.logger){var e=t.logger;if(e&&"function"==typeof e)return e}throw s.newError("Illegal logger function: "+t.logger)}(t))}return this.noOp()},h.noOp=function(){return b},h.prototype.isErrorEnabled=function(){return _(this._level,u)},h.prototype.error=function(t){this.isErrorEnabled()&&this._loggerFunction(u,t)},h.prototype.isWarnEnabled=function(){return _(this._level,c)},h.prototype.warn=function(t){this.isWarnEnabled()&&this._loggerFunction(c,t)},h.prototype.isInfoEnabled=function(){return _(this._level,a)},h.prototype.info=function(t){this.isInfoEnabled()&&this._loggerFunction(a,t)},h.prototype.isDebugEnabled=function(){return _(this._level,l)},h.prototype.debug=function(t){this.isDebugEnabled()&&this._loggerFunction(l,t)},h);function h(t,e){this._level=t,this._loggerFunction=e}function d(){return i.call(this,a,function(t,e){})||this}r.Logger=t;var b=new(o(d,i=t),d.prototype.isErrorEnabled=function(){return!1},d.prototype.error=function(t){},d.prototype.isWarnEnabled=function(){return!1},d.prototype.warn=function(t){},d.prototype.isInfoEnabled=function(){return!1},d.prototype.info=function(t){},d.prototype.isDebugEnabled=function(){return!1},d.prototype.debug=function(t){},d);function _(t,e){return p[t]>=p[e]}},{"../error":56}],66:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FailedObserver=r.CompletedObserver=void 0;var n=(o.prototype.subscribe=function(t){s(t,t.onKeys,[]),s(t,t.onCompleted,{})},o.prototype.cancel=function(){},o.prototype.prepareToHandleSingleResponse=function(){},o.prototype.markCompleted=function(){},o.prototype.onError=function(t){throw Error("CompletedObserver not supposed to call onError")},o);function o(){}r.CompletedObserver=n;i.prototype.subscribe=function(t){s(t,t.onError,this._error),this._observers.push(t)},i.prototype.onError=function(e){var t=this;Promise.resolve(s(this,this._beforeError,e)).then(function(){return t._observers.forEach(function(t){return s(t,t.onError,e)})})},i.prototype.cancel=function(){},i.prototype.prepareToHandleSingleResponse=function(){},i.prototype.markCompleted=function(){},n=i;function i(t){var e=t.error,t=t.onError;this._error=e,this._beforeError=t,this._observers=[],this.onError(e)}function s(t,e,r){e&&e.bind(t)(r)}r.FailedObserver=n},{}],67:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.prototype.resolve=function(){throw new Error("Abstract function")},o.prototype._resolveToItself=function(t){return Promise.resolve([t])},o);function o(){}r.default=n},{}],68:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../server-address");function o(t){return Promise.resolve([t])}i.prototype.resolve=function(e){var r=this;return new Promise(function(t){return t(r._resolverFunction(e.asHostPort()))}).then(function(t){if(!Array.isArray(t))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses.Each address is '<host>:<port>'. Got: "+t);return t.map(function(t){return n.ServerAddress.fromUrl(t)})})},t=i;function i(t){this._resolverFunction=t||o}r.default=t},{"../server-address":71}],69:[function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.ConfiguredCustomResolver=r.BaseHostNameResolver=void 0;var o=n(t("./base-host-name-resolver"));r.BaseHostNameResolver=o.default;t=n(t("./configured-custom-resolver"));r.ConfiguredCustomResolver=t.default},{"./base-host-name-resolver":67,"./configured-custom-resolver":68}],70:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.canRetryOn=void 0;var n=t("../error");r.canRetryOn=function(t){return t&&t instanceof n.Neo4jError&&t.code&&(t.code===n.SERVICE_UNAVAILABLE||t.code===n.SESSION_EXPIRED||"Neo.ClientError.Security.AuthorizationExpired"===t.code||function(t){t=t.code;if(0<=t.indexOf("TransientError"))return"Neo.TransientError.Transaction.Terminated"!==t&&"Neo.TransientError.Transaction.LockClientStopped"!==t;return!1}(t))}},{"../error":56}],71:[function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e};Object.defineProperty(r,"__esModule",{value:!0}),r.ServerAddress=void 0;var s=t("./util"),u=i(t("./url-util")),t=(c.prototype.host=function(){return this._host},c.prototype.resolvedHost=function(){return this._resolved||this._host},c.prototype.port=function(){return this._port},c.prototype.resolveWith=function(t){return new c(this._host,t,this._port,this._hostPort)},c.prototype.asHostPort=function(){return this._hostPort},c.prototype.asKey=function(){return this._hostPort},c.prototype.toString=function(){return this._stringValue},c.fromUrl=function(t){t=u.parseDatabaseUrl(t);return new c(t.host,null,t.port,t.hostAndPort)},c);function c(t,e,r,n){this._host=s.assertString(t,"host"),this._resolved=e?s.assertString(e,"resolved"):null,this._port=s.assertNumber(r,"port"),this._hostPort=n,this._stringValue=e?n+"("+e+")":""+n}r.ServerAddress=t},{"./url-util":75,"./util":76}],72:[function(t,e,u){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e};Object.defineProperty(u,"__esModule",{value:!0}),u.floorMod=u.floorDiv=u.assertValidNanosecond=u.assertValidSecond=u.assertValidMinute=u.assertValidHour=u.assertValidDay=u.assertValidMonth=u.assertValidYear=u.timeZoneOffsetInSeconds=u.totalNanoseconds=u.dateToIsoString=u.timeZoneOffsetToIsoString=u.timeToIsoString=u.durationToIsoString=u.dateToEpochDay=u.localDateTimeToEpochSecond=u.localTimeToNanoOfDay=u.normalizeNanosecondsForDuration=u.normalizeSecondsForDuration=u.SECONDS_PER_DAY=u.DAYS_PER_400_YEAR_CYCLE=u.DAYS_0000_TO_1970=u.NANOS_PER_HOUR=u.NANOS_PER_MINUTE=u.NANOS_PER_MILLISECOND=u.NANOS_PER_SECOND=u.SECONDS_PER_HOUR=u.SECONDS_PER_MINUTE=u.MINUTES_PER_HOUR=u.NANOSECOND_OF_SECOND_RANGE=u.SECOND_OF_MINUTE_RANGE=u.MINUTE_OF_HOUR_RANGE=u.HOUR_OF_DAY_RANGE=u.DAY_OF_MONTH_RANGE=u.MONTH_OF_YEAR_RANGE=u.YEAR_RANGE=void 0;var c=r(t("../integer")),i=t("../error"),s=t("./util"),t=(a.prototype.contains=function(t){if(c.isInt(t)&&t instanceof c.default)return t.greaterThanOrEqual(this._minInteger)&&t.lessThanOrEqual(this._maxInteger);if("bigint"!=typeof t)return t>=this._minNumber&&t<=this._maxNumber;t=c.int(t);return t.greaterThanOrEqual(this._minInteger)&&t.lessThanOrEqual(this._maxInteger)},a.prototype.toString=function(){return"["+this._minNumber+", "+this._maxNumber+"]"},a);function a(t,e){this._minNumber=t,this._maxNumber=e,this._minInteger=c.int(t),this._maxInteger=c.int(e)}function l(t,e,r){t=c.int(t),e=c.int(e),r=c.int(r);var n=t.multiply(365);return n=(n=(n=t.greaterThanOrEqual(0)?n.add(t.add(3).div(4).subtract(t.add(99).div(100)).add(t.add(399).div(400))):n.subtract(t.div(-4).subtract(t.div(-100)).add(t.div(-400)))).add(e.multiply(367).subtract(362).div(12))).add(r.subtract(1)),e.greaterThan(2)&&(n=n.subtract(1),t=t,(t=c.int(t)).modulo(4).equals(0)&&(!t.modulo(100).equals(0)||t.modulo(400).equals(0))||(n=n.subtract(1))),n.subtract(u.DAYS_0000_TO_1970)}function f(t,e,r){if(s.assertNumberOrInteger(t,r),!e.contains(t))throw i.newError(r+" is expected to be in range "+e+" but was: "+t);return t}function p(t,e){t=c.int(t),e=c.int(e);var r=t.div(e);return r=t.isPositive()!==e.isPositive()&&r.multiply(e).notEquals(t)?r.subtract(1):r}function h(t,e){return t=c.int(t),e=c.int(e),t.subtract(p(t,e).multiply(e))}function d(t){return(t=c.int(t)).equals(0)?"":"."+b(t,9)}function b(t,e){var r=(t=c.int(t)).isNegative(),n=(t=r?t.negate():t).toString();if(e)for(;n.length<e;)n="0"+n;return r?"-"+n:n}u.YEAR_RANGE=new t(-999999999,999999999),u.MONTH_OF_YEAR_RANGE=new t(1,12),u.DAY_OF_MONTH_RANGE=new t(1,31),u.HOUR_OF_DAY_RANGE=new t(0,23),u.MINUTE_OF_HOUR_RANGE=new t(0,59),u.SECOND_OF_MINUTE_RANGE=new t(0,59),u.NANOSECOND_OF_SECOND_RANGE=new t(0,999999999),u.MINUTES_PER_HOUR=60,u.SECONDS_PER_MINUTE=60,u.SECONDS_PER_HOUR=u.SECONDS_PER_MINUTE*u.MINUTES_PER_HOUR,u.NANOS_PER_SECOND=1e9,u.NANOS_PER_MILLISECOND=1e6,u.NANOS_PER_MINUTE=u.NANOS_PER_SECOND*u.SECONDS_PER_MINUTE,u.NANOS_PER_HOUR=u.NANOS_PER_MINUTE*u.MINUTES_PER_HOUR,u.DAYS_0000_TO_1970=719528,u.DAYS_PER_400_YEAR_CYCLE=146097,u.SECONDS_PER_DAY=86400,u.normalizeSecondsForDuration=function(t,e){return c.int(t).add(p(e,u.NANOS_PER_SECOND))},u.normalizeNanosecondsForDuration=function(t){return h(t,u.NANOS_PER_SECOND)},u.localTimeToNanoOfDay=function(t,e,r,n){return t=c.int(t),e=c.int(e),r=c.int(r),n=c.int(n),(t=(t=(t=t.multiply(u.NANOS_PER_HOUR)).add(e.multiply(u.NANOS_PER_MINUTE))).add(r.multiply(u.NANOS_PER_SECOND))).add(n)},u.localDateTimeToEpochSecond=function(t,e,r,n,o,i,s){return r=l(t,e,r),i=function(t,e,r){t=c.int(t),e=c.int(e),r=c.int(r);t=t.multiply(u.SECONDS_PER_HOUR);return(t=t.add(e.multiply(u.SECONDS_PER_MINUTE))).add(r)}(n,o,i),r.multiply(u.SECONDS_PER_DAY).add(i)},u.dateToEpochDay=l,u.durationToIsoString=function(t,e,r,n){return"P"+b(t)+"M"+b(e)+"DT"+function(t,e){var r;t=c.int(t),e=c.int(e);var n=t.isNegative(),o=e.greaterThan(0);t=n&&o?t.equals(-1)?"-0":t.add(1).toString():t.toString();o&&(r=d((n?e.negate().add(2*u.NANOS_PER_SECOND):e.add(u.NANOS_PER_SECOND)).modulo(u.NANOS_PER_SECOND)));return r?t+r:t}(r,n)+"S"},u.timeToIsoString=function(t,e,r,n){return b(t,2)+":"+b(e,2)+":"+b(r,2)+d(n)},u.timeZoneOffsetToIsoString=function(t){if((t=c.int(t)).equals(0))return"Z";var e=(n=t.isNegative())?"-":"+",r=b((t=n?t.multiply(-1):t).div(u.SECONDS_PER_HOUR),2),n=b(t.div(u.SECONDS_PER_MINUTE).modulo(u.MINUTES_PER_HOUR),2);return(t=(t=t.modulo(u.SECONDS_PER_MINUTE)).equals(0)?null:b(t,2))?e+r+":"+n+":"+t:e+r+":"+n},u.dateToIsoString=function(t,e,r){var n=(t=c.int(t)).isNegative(),t=b(t=n?t.multiply(-1):t,4);return(t=n?"-"+t:t)+"-"+b(e,2)+"-"+b(r,2)},u.totalNanoseconds=function(t,e){return function(t,e){{if(t instanceof c.default)return t.add(e);if("bigint"==typeof t)return t+BigInt(e)}return t+e}(e=e||0,t.getMilliseconds()*u.NANOS_PER_MILLISECOND)},u.timeZoneOffsetInSeconds=function(t){return 0===(t=t.getTimezoneOffset())?0:-1*t*u.SECONDS_PER_MINUTE},u.assertValidYear=function(t){return f(t,u.YEAR_RANGE,"Year")},u.assertValidMonth=function(t){return f(t,u.MONTH_OF_YEAR_RANGE,"Month")},u.assertValidDay=function(t){return f(t,u.DAY_OF_MONTH_RANGE,"Day")},u.assertValidHour=function(t){return f(t,u.HOUR_OF_DAY_RANGE,"Hour")},u.assertValidMinute=function(t){return f(t,u.MINUTE_OF_HOUR_RANGE,"Minute")},u.assertValidSecond=function(t){return f(t,u.SECOND_OF_MINUTE_RANGE,"Second")},u.assertValidNanosecond=function(t){return f(t,u.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")},u.floorDiv=p,u.floorMod=h},{"../error":56,"../integer":59,"./util":76}],73:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TransactionExecutor=void 0;var n=t("../error"),c=t("./retry-strategy"),t=(o.prototype.execute=function(n,o){var i=this;return new Promise(function(t,e){i._executeTransactionInsidePromise(n,o,t,e)}).catch(function(t){var e=Date.now(),r=i._initialRetryDelayMs;return i._retryTransactionPromise(n,o,t,e,r)})},o.prototype.close=function(){this._inFlightTimeoutIds.forEach(function(t){return clearTimeout(t)}),this._inFlightTimeoutIds=[]},o.prototype._retryTransactionPromise=function(o,i,t,r,s){var u=this;return Date.now()-r>this._maxRetryTimeMs||!c.canRetryOn(t)?Promise.reject(t):new Promise(function(t,e){var r=u._computeDelayWithJitter(s),n=setTimeout(function(){u._inFlightTimeoutIds=u._inFlightTimeoutIds.filter(function(t){return t!==n}),u._executeTransactionInsidePromise(o,i,t,e)},r);u._inFlightTimeoutIds.push(n)}).catch(function(t){var e=s*u._multiplier;return u._retryTransactionPromise(o,i,t,r,e)})},o.prototype._executeTransactionInsidePromise=function(t,e,r,n){var o,i=this;try{o=t()}catch(t){return void n(t)}this._safeExecuteTransactionWork(o,e).then(function(t){return i._handleTransactionWorkSuccess(t,o,r,n)}).catch(function(t){return i._handleTransactionWorkFailure(t,o,n)})},o.prototype._safeExecuteTransactionWork=function(t,e){try{var r=e(t);return Promise.resolve(r)}catch(t){return Promise.reject(t)}},o.prototype._handleTransactionWorkSuccess=function(t,e,r,n){e.isOpen()?e.commit().then(function(){r(t)}).catch(function(t){n(t)}):r(t)},o.prototype._handleTransactionWorkFailure=function(t,e,r){e.isOpen()?e.rollback().catch(function(t){}).then(function(){return r(t)}):r(t)},o.prototype._computeDelayWithJitter=function(t){var e=t*this._jitterFactor,r=t-e,e=t+e;return Math.random()*(e-r)+r},o.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw n.newError("Max retry time should be >= 0: "+this._maxRetryTimeMs);if(this._initialRetryDelayMs<0)throw n.newError("Initial retry delay should >= 0: "+this._initialRetryDelayMs);if(this._multiplier<1)throw n.newError("Multiplier should be >= 1.0: "+this._multiplier);if(this._jitterFactor<0||1<this._jitterFactor)throw n.newError("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor)},o);function o(t,e,r,n){this._maxRetryTimeMs=i(t,3e4),this._initialRetryDelayMs=i(e,1e3),this._multiplier=i(r,2),this._jitterFactor=i(n,.2),this._inFlightTimeoutIds=[],this._verifyAfterConstruction()}function i(t,e){return t||0===t?t:e}r.TransactionExecutor=t},{"../error":56,"./retry-strategy":70}],74:[function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e};Object.defineProperty(r,"__esModule",{value:!0}),r.TxConfig=void 0;var s=i(t("./util")),u=t("../error"),c=t("../integer"),t=(a.empty=function(){return l},a.prototype.isEmpty=function(){return Object.values(this).every(function(t){return null==t})},a);function a(t){var e;(e=t)&&s.assertObject(e,"Transaction config"),this.timeout=function(t){if(!s.isObject(t)||!t.timeout&&0!==t.timeout)return null;s.assertNumberOrInteger(t.timeout,"Transaction timeout");t=c.int(t.timeout);if(t.isZero())throw u.newError("Transaction timeout should not be zero");if(t.isNegative())throw u.newError("Transaction timeout should not be negative");return t}(t),this.metadata=function(t){if(s.isObject(t)&&t.metadata){t=t.metadata;if(s.assertObject(t,"config.metadata"),0!==Object.keys(t).length)return t}return null}(t)}var l=new(r.TxConfig=t)({})},{"../error":56,"../integer":59,"./util":76}],75:[function(t,e,r){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},u=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(r,"__esModule",{value:!0}),r.Url=r.formatIPv6Address=r.formatIPv4Address=r.defaultPortForScheme=r.parseDatabaseUrl=void 0;var c=t("./util"),n=7687,o=7474,i=7473,a=function(t,e,r,n,o){this.scheme=t,this.host=e,this.port=r,this.hostAndPort=n,this.query=o};function l(t,e,r){if(!(t=(t||"").trim()))throw new Error("Illegal empty "+e+" in URL query '"+r+"'");return t}function f(t){var e="["===t.charAt(0),r="]"===t.charAt(t.length-1);if(e||r){if(e&&r)return t;throw new Error("Illegal IPv6 address "+t)}return"["+t+"]"}function p(t){return"http"===t?o:"https"===t?i:n}r.Url=a,r.parseDatabaseUrl=function(t){c.assertString(t,"URL");var e=function(t){function i(t,e){e=t.indexOf(e);return 0<=e?[t.substring(0,e),t[e],t.substring(e+1)]:[t,"",""]}function e(t){var e,r={};(o="@")===(e=0<=(o=(n=t).lastIndexOf(o))?[n.substring(0,o),n[o],n.substring(o+1)]:["","",n])[1]&&(r.userInfo=decodeURIComponent(e[0]),t=e[2]);var n,o,n=u((o="]",n=i(t,n="["),[(o=i(n[2],o))[0],o[2]]),2),o=n[0],n=n[1];return""!==o?(r.host=o,e=i(n,":")):(e=i(t,":"),r.host=e[0]),":"===e[1]&&(r.port=e[2]),r}var r,n={};":"===(r=i(t,":"))[1]&&(n.scheme=decodeURIComponent(r[0]),t=r[2]);"#"===(r=i(t,"#"))[1]&&(n.fragment=decodeURIComponent(r[2]),t=r[0]);"?"===(r=i(t,"?"))[1]&&(n.query=r[2],t=r[0]);t.startsWith("//")?(r=i(t.substr(2),"/"),(n=s(s({},n),e(r[0]))).path=r[1]+r[2]):n.path=t;return n}((i=-1!==(o=(o=t).trim()).indexOf("://")?{schemeMissing:!1,url:o}:{schemeMissing:!0,url:"none://"+o}).url),r=i.schemeMissing?null:function(t){if(t)return t=":"===(t=t.trim()).charAt(t.length-1)?t.substring(0,t.length-1):t;return null}(e.scheme),n=function(t,e){if(t)return t.trim();throw new Error("Unable to extract host from "+e)}(e.host),o=function(t){if(t)return 0<=t.indexOf(":")?f(t):t;throw new Error("Illegal host "+t)}(n),i=function(t,e){t="string"==typeof t?parseInt(t,10):t;return 0===t||t?t:p(e)}(e.port,r),o=o+":"+i,t=function(t,r){var t=t?function(t){(t=(t||"").trim())&&"?"===t.charAt(0)&&(t=t.substring(1,t.length));return t}(t):null,n={};t&&t.split("&").forEach(function(t){var e=t.split("=");if(2!==e.length)throw new Error("Invalid parameters: '"+e+"' in URL '"+r+"'.");t=l(e[0],"key",r),e=l(e[1],"value",r);if(n[t])throw new Error("Duplicated query parameters with key '"+t+"' in URL '"+r+"'");n[t]=e});return n}(e.query||function(t){if("string"!=typeof t)return null;t=u(t.split("?"),2),t[0];return t[1]}(e.resourceName),t);return new a(r,n,i,o,t)},r.formatIPv4Address=function(t,e){return t+":"+e},r.formatIPv6Address=function(t,e){return f(t)+":"+e},r.defaultPortForScheme=p},{"./util":76}],76:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ENCRYPTION_OFF=r.ENCRYPTION_ON=r.validateQueryAndParameters=r.assertValidDate=r.assertNumberOrInteger=r.assertNumber=r.assertString=r.assertObject=r.isString=r.isObject=r.isEmptyObjectOrNull=void 0;var n=t("../integer"),o=t("../json");r.ENCRYPTION_ON="ENCRYPTION_ON";function i(t){return"object"==typeof t&&!Array.isArray(t)&&null!==t}function s(t,e){if(!u(t))throw new TypeError(e+" expected to be string but was: "+o.stringify(t));return t}function u(t){return"[object String]"===Object.prototype.toString.call(t)}r.ENCRYPTION_OFF="ENCRYPTION_OFF",r.isEmptyObjectOrNull=function(t){if(null===t)return!0;if(!i(t))return!1;for(var e in t)if(Object.prototype.hasOwnProperty.bind(t,e))return!1;return!0},r.isObject=i,r.validateQueryAndParameters=function(t,e,r){var n="",e=e||{},r=(null==r?void 0:r.skipAsserts)||!1;return"string"==typeof t?n=t:t instanceof String?n=t.toString():"object"==typeof t&&t.text&&(n=t.text,e=t.parameters||{}),r||(function(t){if(s(t,"Cypher query"),0===t.trim().length)throw new TypeError("Cypher query is expected to be a non-empty string.")}(n),function(t){if(!i(t)){var e=t.constructor?" "+t.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:"+e+" "+t)}}(e)),{validatedQuery:n,params:e}},r.assertObject=function(t,e){if(!i(t))throw new TypeError(e+" expected to be an object but was: "+o.stringify(t));return t},r.assertString=s,r.assertNumber=function(t,e){if("number"!=typeof t)throw new TypeError(e+" expected to be a number but was: "+o.stringify(t));return t},r.assertNumberOrInteger=function(t,e){if("number"!=typeof t&&"bigint"!=typeof t&&!n.isInt(t))throw new TypeError(e+" expected to be either a number or an Integer object but was: "+o.stringify(t));return t},r.assertValidDate=function(t,e){if("[object Date]"!==Object.prototype.toString.call(t))throw new TypeError(e+" expected to be a standard JavaScript Date but was: "+o.stringify(t));if(Number.isNaN(t.getTime()))throw new TypeError(e+" expected to be valid JavaScript Date but its time was NaN: "+o.stringify(t));return t},r.isString=u},{"../integer":59,"../json":77}],77:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.stringify=void 0,r.stringify=function(t){return JSON.stringify(t,function(t,e){return"bigint"==typeof e?e+"n":e})}},{}],78:[function(t,e,r){"use strict";var n=this&&this.__generator||function(r,n){var o,i,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(r,u)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&n>=t.length?void 0:t)&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(r,"__esModule",{value:!0});var o=t("./error");i.prototype.forEach=function(t){var e,r;try{for(var n=a(this.entries()),o=n.next();!o.done;o=n.next()){var i=l(o.value,2),s=i[0];t(i[1],s,this)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},i.prototype.map=function(t){var e,r,n=[];try{for(var o=a(this.entries()),i=o.next();!i.done;i=o.next()){var s=l(i.value,2),u=s[0],c=s[1];n.push(t(c,u,this))}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n},i.prototype.entries=function(){var e;return n(this,function(t){switch(t.label){case 0:e=0,t.label=1;case 1:return e<this.keys.length?[4,[this.keys[e],this._fields[e]]]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})},i.prototype.values=function(){var e;return n(this,function(t){switch(t.label){case 0:e=0,t.label=1;case 1:return e<this.keys.length?[4,this._fields[e]]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})},i.prototype[Symbol.iterator]=function(){var e;return n(this,function(t){switch(t.label){case 0:e=0,t.label=1;case 1:return e<this.keys.length?[4,this._fields[e]]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})},i.prototype.toObject=function(){var e,t,r={};try{for(var n=a(this.entries()),o=n.next();!o.done;o=n.next()){var i=l(o.value,2),s=i[0],u=i[1];r[s]=u}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return r},i.prototype.get=function(t){var e;if("number"!=typeof t){if(void 0===(e=this._fieldLookup[t]))throw o.newError("This record has no field with key '"+t+"', available key are: ["+this.keys+"].")}else e=t;if(e>this._fields.length-1||e<0)throw o.newError("This record has no field with index '"+e+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[e]},i.prototype.has=function(t){return"number"==typeof t?0<=t&&t<this._fields.length:void 0!==this._fieldLookup[t]},t=i;function i(t,e,r){var n;this.keys=t,this.length=t.length,this._fields=e,this._fieldLookup=r||(n={},t.forEach(function(t,e){n[t]=e}),n)}r.default=t},{"./error":56}],79:[function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e};Object.defineProperty(r,"__esModule",{value:!0}),r.Stats=r.QueryStatistics=r.ProfiledPlan=r.Plan=r.Notification=r.ServerInfo=r.queryType=void 0;var s=i(t("./integer")),t=(u.prototype._buildNotifications=function(t){return t?t.map(function(t){return new h(t)}):[]},u.prototype.hasPlan=function(){return this.plan instanceof c},u.prototype.hasProfile=function(){return this.profile instanceof a},u);function u(t,e,r,n){this.query={text:t,parameters:e},this.queryType=r.type,this.counters=new f(r.stats||{}),this.updateStatistics=this.counters,this.plan=!(!r.plan&&!r.profile)&&new c(r.plan||r.profile),this.profile=!!r.profile&&new a(r.profile),this.notifications=this._buildNotifications(r.notifications),this.server=new b(r.server,n),this.resultConsumedAfter=r.result_consumed_after,this.resultAvailableAfter=r.result_available_after,this.database={name:r.db||null}}var c=function e(t){this.operatorType=t.operatorType,this.identifiers=t.identifiers,this.arguments=t.args,this.children=t.children?t.children.map(function(t){return new e(t)}):[]};r.Plan=c;var a=(l.prototype.hasPageCacheStats=function(){return 0<this.pageCacheMisses||0<this.pageCacheHits||0<this.pageCacheHitRatio},l);function l(t){this.operatorType=t.operatorType,this.identifiers=t.identifiers,this.arguments=t.args,this.dbHits=y("dbHits",t),this.rows=y("rows",t),this.pageCacheMisses=y("pageCacheMisses",t),this.pageCacheHits=y("pageCacheHits",t),this.pageCacheHitRatio=y("pageCacheHitRatio",t),this.time=y("time",t),this.children=t.children?t.children.map(function(t){return new l(t)}):[]}r.ProfiledPlan=a,r.Stats=function(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0};var f=(p.prototype.containsUpdates=function(){var r=this;return 0<Object.keys(this._stats).reduce(function(t,e){return t+r._stats[e]},0)},p.prototype.updates=function(){return this._stats},p.prototype.containsSystemUpdates=function(){return 0<this._systemUpdates},p.prototype.systemUpdates=function(){return this._systemUpdates},p);function p(r){var n=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(r).forEach(function(t){var e=t.replace(/(-\w)/g,function(t){return t[1].toUpperCase()});e in n._stats?n._stats[e]=_(r[t]):"systemUpdates"===e&&(n._systemUpdates=_(r[t]))}),this._stats=Object.freeze(this._stats)}r.QueryStatistics=f;var h=(d._constructPosition=function(t){return t?{offset:_(t.offset),line:_(t.line),column:_(t.column)}:{}},d);function d(t){this.code=t.code,this.title=t.title,this.description=t.description,this.severity=t.severity,this.position=d._constructPosition(t.position)}r.Notification=h;var b=function(t,e){t&&(this.address=t.address,this.version=t.version,this.agent=t.version),this.protocolVersion=e};function _(t){return t instanceof s.default?t.toInt():"bigint"==typeof t?s.int(t).toInt():t}function y(t,e,r){return void 0===r&&(r=0),t in e?_(e[t]):r}r.ServerInfo=b;r.queryType={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"},r.default=t},{"./integer":59}],80:[function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});function s(t){console.log("Uncaught error when processing result: "+t)}function u(t){}var i=n(t("./result-summary")),c=t("./internal"),o=c.connectionHolder.EMPTY_CONNECTION_HOLDER,t=(a.prototype.keys=function(){var t=this;return new Promise(function(e,r){t._streamObserverPromise.then(function(t){return t.subscribe({onKeys:function(t){return e(t)},onError:function(t){return r(t)}})}).catch(r)})},a.prototype.summary=function(){var n=this;return new Promise(function(e,r){n._streamObserverPromise.then(function(t){t.cancel(),t.subscribe({onCompleted:function(t){return n._createSummary(t).then(e,r)},onError:function(t){return r(t)}})}).catch(r)})},a.prototype._getOrCreatePromise=function(){var t=this;return this._p||(this._p=new Promise(function(e,r){var n=[];t.subscribe({onNext:function(t){n.push(t)},onCompleted:function(t){e({records:n,summary:t})},onError:function(t){r(t)}})})),this._p},a.prototype.then=function(t,e){return this._getOrCreatePromise().then(t,e)},a.prototype.catch=function(t){return this._getOrCreatePromise().catch(t)},a.prototype.finally=function(t){return this._getOrCreatePromise().finally(t)},a.prototype.subscribe=function(n){var o=this,e=n.onCompleted||u;n.onCompleted=function(t){o._createSummary(t).then(function(t){return e.call(n,t)})};var i=n.onError||s;n.onError=function(r){o._connectionHolder.releaseConnection().then(function(){var t,e;t=r,(e=o._stack)&&(t.stack=t.toString()+"\n"+e),i.call(n,r)})},this._streamObserverPromise.then(function(t){return t.subscribe(n)}).catch(function(t){return n.onError(t)})},a.prototype._cancel=function(){this._streamObserverPromise.then(function(t){return t.cancel()})},a.prototype._createSummary=function(e){var t=c.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),r=t.validatedQuery,n=t.params,o=this._connectionHolder;return o.getConnection().then(function(t){return o.releaseConnection().then(function(){return t?t.protocol().version:void 0})},function(t){}).then(function(t){return new i.default(r,n,e,t)})},a);function a(t,e,r,n){this._stack=function(){var t=new Error("");if(t.stack)return t.stack.replace(/^Error(\n\r)*/,"");return null}(),this._streamObserverPromise=t,this._p=null,this._query=e,this._parameters=r||{},this._connectionHolder=n||o}r.default=t},{"./internal":64,"./result-summary":79}],81:[function(t,e,r){"use strict";var o=this&&this.__awaiter||function(t,s,u,c){return new(u=u||Promise)(function(r,e){function n(t){try{i(c.next(t))}catch(t){e(t)}}function o(t){try{i(c.throw(t))}catch(t){e(t)}}function i(t){var e;t.done?r(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(n,o)}i((c=c.apply(t,s||[])).next())})},i=this&&this.__generator||function(r,n){var o,i,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,i&&(s=2&e[0]?i.return:e[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,e[1])).done)return s;switch(i=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,i=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=n.call(r,u)}catch(t){e=[6,t],i=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var s=t("./internal/observers"),u=t("./internal/util"),c=t("./error"),a=n(t("./result")),l=n(t("./transaction")),f=t("./internal/connection-holder"),p=t("./internal/constants"),h=t("./internal/transaction-executor"),d=t("./internal/bookmark"),b=t("./internal/tx-config"),t=(_.prototype.run=function(t,e,r){var n=this,e=u.validateQueryAndParameters(t,e),o=e.validatedQuery,i=e.params,s=r?new b.TxConfig(r):b.TxConfig.empty();return this._run(o,i,function(t){return n._assertSessionIsOpen(),t.protocol().run(o,i,{bookmark:n._lastBookmark,txConfig:s,mode:n._mode,database:n._database,afterComplete:n._onComplete,reactive:n._reactive,fetchSize:n._fetchSize})})},_.prototype._run=function(t,e,r){var n=this._connectionHolderWithMode(this._mode),o=this._open?!this._hasTx&&n.initializeConnection()?n.getConnection().then(function(t){return r(t)}).catch(function(t){return Promise.resolve(new s.FailedObserver({error:t}))}):Promise.resolve(new s.FailedObserver({error:c.newError("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")})):Promise.resolve(new s.FailedObserver({error:c.newError("Cannot run query in a closed session.")}));return new a.default(o,t,e,n)},_.prototype._acquireConnection=function(e){return o(this,void 0,void 0,function(){var r,n=this;return i(this,function(t){return r=this._connectionHolderWithMode(this._mode),[2,this._open?!this._hasTx&&r.initializeConnection()?r.getConnection().then(function(t){return e(t)}).then(function(e){return o(n,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,r.releaseConnection()];case 1:return t.sent(),[2,e]}})})}):Promise.reject(c.newError("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):Promise.reject(c.newError("Cannot run query in a closed session."))]})})},_.prototype.beginTransaction=function(t){var e=t,t=b.TxConfig.empty();return e&&(t=new b.TxConfig(e)),this._beginTransaction(this._mode,t)},_.prototype._beginTransaction=function(t,e){if(!this._open)throw c.newError("Cannot begin a transaction on a closed session.");if(this._hasTx)throw c.newError("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");t=_._validateSessionMode(t),t=this._connectionHolderWithMode(t);t.initializeConnection(),this._hasTx=!0;t=new l.default({connectionHolder:t,onClose:this._transactionClosed.bind(this),onBookmark:this._updateBookmark.bind(this),onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize});return t._begin(this._lastBookmark,e),t},_.prototype._assertSessionIsOpen=function(){if(!this._open)throw c.newError("You cannot run more transactions on a closed session.")},_.prototype._transactionClosed=function(){this._hasTx=!1},_.prototype.lastBookmark=function(){return this._lastBookmark.values()},_.prototype.readTransaction=function(t,e){e=new b.TxConfig(e);return this._runTransaction(p.ACCESS_MODE_READ,e,t)},_.prototype.writeTransaction=function(t,e){e=new b.TxConfig(e);return this._runTransaction(p.ACCESS_MODE_WRITE,e,t)},_.prototype._runTransaction=function(t,e,r){var n=this;return this._transactionExecutor.execute(function(){return n._beginTransaction(t,e)},r)},_.prototype._updateBookmark=function(t){t&&!t.isEmpty()&&(this._lastBookmark=t)},_.prototype.close=function(){return o(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return this._open?(this._open=!1,this._transactionExecutor.close(),[4,this._readConnectionHolder.close()]):[3,3];case 1:return t.sent(),[4,this._writeConnectionHolder.close()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},_.prototype._connectionHolderWithMode=function(t){if(t===p.ACCESS_MODE_READ)return this._readConnectionHolder;if(t===p.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw c.newError("Unknown access mode: "+t)},_.prototype._onCompleteCallback=function(t){this._updateBookmark(new d.Bookmark(t.bookmark))},_._validateSessionMode=function(t){t=t||p.ACCESS_MODE_WRITE;if(t!==p.ACCESS_MODE_READ&&t!==p.ACCESS_MODE_WRITE)throw c.newError("Illegal session mode "+t);return t},_);function _(t){var e=t.mode,r=t.connectionProvider,n=t.bookmark,o=t.database,i=t.config,s=t.reactive,t=t.fetchSize;this._mode=e,this._database=o,this._reactive=s,this._fetchSize=t,this._readConnectionHolder=new f.ConnectionHolder({mode:p.ACCESS_MODE_READ,database:o,bookmark:n,connectionProvider:r}),this._writeConnectionHolder=new f.ConnectionHolder({mode:p.ACCESS_MODE_WRITE,database:o,bookmark:n,connectionProvider:r}),this._open=!0,this._hasTx=!1,this._lastBookmark=n||d.Bookmark.empty(),this._transactionExecutor=function(t){t=t&&t.maxTransactionRetryTime?t.maxTransactionRetryTime:null;return new h.TransactionExecutor(t)}(i),this._onComplete=this._onCompleteCallback.bind(this)}r.default=t},{"./error":56,"./internal/bookmark":60,"./internal/connection-holder":61,"./internal/constants":63,"./internal/observers":66,"./internal/transaction-executor":73,"./internal/tx-config":74,"./internal/util":76,"./result":80,"./transaction":84}],82:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isPoint=r.Point=void 0;var o=t("./internal/util"),n="__isPoint__",t=(i.prototype.toString=function(){return this.z||0===this.z?"Point{srid="+s(this.srid)+", x="+s(this.x)+", y="+s(this.y)+", z="+s(this.z)+"}":"Point{srid="+s(this.srid)+", x="+s(this.x)+", y="+s(this.y)+"}"},i);function i(t,e,r,n){this.srid=o.assertNumberOrInteger(t,"SRID"),this.x=o.assertNumber(e,"X coordinate"),this.y=o.assertNumber(r,"Y coordinate"),this.z=null==n?n:o.assertNumber(n,"Z coordinate"),Object.freeze(this)}function s(t){return Number.isInteger(t)?t+".0":t.toString()}r.Point=t,Object.defineProperty(t.prototype,n,{value:!0,enumerable:!1,configurable:!1,writable:!1}),r.isPoint=function(t){return!0===(t&&t[n])}},{"./internal/util":76}],83:[function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){t[n=void 0===n?r:n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},a=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(r,"__esModule",{value:!0}),r.isDateTime=r.DateTime=r.isLocalDateTime=r.LocalDateTime=r.isDate=r.Date=r.isTime=r.Time=r.isLocalTime=r.LocalTime=r.isDuration=r.Duration=void 0;var l=i(t("./internal/temporal-util")),f=t("./internal/util"),p=t("./error"),s=i(t("./integer")),i={value:!0,enumerable:!1,configurable:!1,writable:!1},u="__isDuration__",c="__isLocalTime__",h="__isTime__",d="__isDate__",b="__isLocalDateTime__",_="__isDateTime__",t=(y.prototype.toString=function(){return l.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},y);function y(t,e,r,n){this.months=f.assertNumberOrInteger(t,"Months"),this.days=f.assertNumberOrInteger(e,"Days"),f.assertNumberOrInteger(r,"Seconds"),f.assertNumberOrInteger(n,"Nanoseconds"),this.seconds=l.normalizeSecondsForDuration(r,n),this.nanoseconds=l.normalizeNanosecondsForDuration(n),Object.freeze(this)}r.Duration=t,Object.defineProperty(t.prototype,u,i),r.isDuration=function(t){return S(t,u)};v.fromStandardDate=function(t,e){P(t,e);e=l.totalNanoseconds(t,e);return new v(t.getHours(),t.getMinutes(),t.getSeconds(),e instanceof s.default?e.toInt():"bigint"==typeof e?s.int(e).toInt():e)},v.prototype.toString=function(){return l.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},t=v;function v(t,e,r,n){this.hour=l.assertValidHour(t),this.minute=l.assertValidMinute(e),this.second=l.assertValidSecond(r),this.nanosecond=l.assertValidNanosecond(n),Object.freeze(this)}r.LocalTime=t,Object.defineProperty(t.prototype,c,i),r.isLocalTime=function(t){return S(t,c)};m.fromStandardDate=function(t,e){return P(t,e),new m(t.getHours(),t.getMinutes(),t.getSeconds(),s.toNumber(l.totalNanoseconds(t,e)),l.timeZoneOffsetInSeconds(t))},m.prototype.toString=function(){return l.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+l.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},t=m;function m(t,e,r,n,o){this.hour=l.assertValidHour(t),this.minute=l.assertValidMinute(e),this.second=l.assertValidSecond(r),this.nanosecond=l.assertValidNanosecond(n),this.timeZoneOffsetSeconds=f.assertNumberOrInteger(o,"Time zone offset in seconds"),Object.freeze(this)}r.Time=t,Object.defineProperty(t.prototype,h,i),r.isTime=function(t){return S(t,h)};g.fromStandardDate=function(t){return P(t),new g(t.getFullYear(),t.getMonth()+1,t.getDate())},g.prototype.toString=function(){return l.dateToIsoString(this.year,this.month,this.day)},t=g;function g(t,e,r){this.year=l.assertValidYear(t),this.month=l.assertValidMonth(e),this.day=l.assertValidDay(r),Object.freeze(this)}r.Date=t,Object.defineProperty(t.prototype,d,i),r.isDate=function(t){return S(t,d)};O.fromStandardDate=function(t,e){return P(t,e),new O(t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),s.toNumber(l.totalNanoseconds(t,e)))},O.prototype.toString=function(){return E(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},t=O;function O(t,e,r,n,o,i,s){this.year=l.assertValidYear(t),this.month=l.assertValidMonth(e),this.day=l.assertValidDay(r),this.hour=l.assertValidHour(n),this.minute=l.assertValidMinute(o),this.second=l.assertValidSecond(i),this.nanosecond=l.assertValidNanosecond(s),Object.freeze(this)}r.LocalDateTime=t,Object.defineProperty(t.prototype,b,i),r.isLocalDateTime=function(t){return S(t,b)};w.fromStandardDate=function(t,e){return P(t,e),new w(t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),s.toNumber(l.totalNanoseconds(t,e)),l.timeZoneOffsetInSeconds(t),null)},w.prototype.toString=function(){return E(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)+(this.timeZoneId?"["+this.timeZoneId+"]":l.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds||0))},t=w;function w(t,e,r,n,o,i,s,u,c){this.year=l.assertValidYear(t),this.month=l.assertValidMonth(e),this.day=l.assertValidDay(r),this.hour=l.assertValidHour(n),this.minute=l.assertValidMinute(o),this.second=l.assertValidSecond(i),this.nanosecond=l.assertValidNanosecond(s);u=a(function(t,e){var r=t||0===t,n=e&&""!==e;{if(r&&!n)return f.assertNumberOrInteger(t,"Time zone offset in seconds"),[t,void 0];if(!r&&n)return f.assertString(e,"Time zone ID"),[void 0,e];throw r&&n?p.newError("Unable to create DateTime with both time zone offset and id. Please specify either of them. Given offset: "+t+" and id: "+e):p.newError("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: "+t+" and id: "+e)}}(u,c),2),c=u[0],u=u[1];this.timeZoneOffsetSeconds=c,this.timeZoneId=u||void 0,Object.freeze(this)}function S(t,e){return!0===(t&&t[e])}function E(t,e,r,n,o,i,s){return l.dateToIsoString(t,e,r)+"T"+l.timeToIsoString(n,o,i,s)}function P(t,e){f.assertValidDate(t,"Standard date"),null!=e&&f.assertNumberOrInteger(e,"Nanosecond")}r.DateTime=t,Object.defineProperty(t.prototype,_,i),r.isDateTime=function(t){return S(t,_)}},{"./error":56,"./integer":59,"./internal/temporal-util":72,"./internal/util":76}],84:[function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var o=t("./internal/util"),i=t("./internal/connection-holder"),a=t("./internal/bookmark"),l=t("./internal/tx-config"),f=t("./internal/observers"),p=t("./error"),u=n(t("./result")),t=(s.prototype._begin=function(e,r){var n=this;this._connectionHolder.getConnection().then(function(t){if(n._onConnection(),t)return t.protocol().beginTransaction({bookmark:e,txConfig:r,mode:n._connectionHolder.mode(),database:n._connectionHolder.database(),beforeError:n._onError,afterComplete:n._onComplete});throw p.newError("No connection available")}).catch(function(t){return n._onError(t)})},s.prototype.run=function(t,e){t=o.validateQueryAndParameters(t,e),e=t.validatedQuery,t=t.params,t=this._state.run(e,t,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize});return this._results.push(t),t},s.prototype.commit=function(){var r=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results});return this._state=r.state,this._onClose(),new Promise(function(t,e){r.result.subscribe({onCompleted:function(){return t()},onError:function(t){return e(t)}})})},s.prototype.rollback=function(){var r=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results});return this._state=r.state,this._onClose(),new Promise(function(t,e){r.result.subscribe({onCompleted:function(){return t()},onError:function(t){return e(t)}})})},s.prototype.isOpen=function(){return this._state===c.ACTIVE},s.prototype._onErrorCallback=function(t){return this._state=c.FAILED,this._onClose(),this._connectionHolder.releaseConnection()},s.prototype._onCompleteCallback=function(t){this._onBookmark(new a.Bookmark(t.bookmark))},s);function s(t){var e=t.connectionHolder,r=t.onClose,n=t.onBookmark,o=t.onConnection,i=t.reactive,t=t.fetchSize;this._connectionHolder=e,this._reactive=i,this._state=c.ACTIVE,this._onClose=r,this._onBookmark=n,this._onConnection=o,this._onError=this._onErrorCallback.bind(this),this._onComplete=this._onCompleteCallback.bind(this),this._fetchSize=t,this._results=[]}var c={ACTIVE:{commit:function(t){return{result:h(!0,t.connectionHolder,t.onError,t.onComplete,t.onConnection,t.pendingResults),state:c.SUCCEEDED}},rollback:function(t){return{result:h(!1,t.connectionHolder,t.onError,t.onComplete,t.onConnection,t.pendingResults),state:c.ROLLED_BACK}},run:function(e,r,t){var n=t.connectionHolder,o=t.onError,i=t.onComplete,s=t.onConnection,u=t.reactive,c=t.fetchSize;return d(n.getConnection().then(function(t){if(s(),t)return t.protocol().run(e,r,{bookmark:a.Bookmark.empty(),txConfig:l.TxConfig.empty(),beforeError:o,afterComplete:i,reactive:u,fetchSize:c});throw p.newError("No connection available")}).catch(function(t){return new f.FailedObserver({error:t,onError:o})}),e,r,n)}},FAILED:{commit:function(t){var e=t.connectionHolder,r=t.onError;t.onComplete;return{result:d(new f.FailedObserver({error:p.newError("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:r}),"COMMIT",{},e),state:c.FAILED}},rollback:function(t){var e=t.connectionHolder;t.onError,t.onComplete;return{result:d(new f.CompletedObserver,"ROLLBACK",{},e),state:c.FAILED}},run:function(t,e,r){var n=r.connectionHolder,o=r.onError;r.onComplete;return d(new f.FailedObserver({error:p.newError("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:o}),t,e,n)}},SUCCEEDED:{commit:function(t){var e=t.connectionHolder,r=t.onError;t.onComplete;return{result:d(new f.FailedObserver({error:p.newError("Cannot commit this transaction, because it has already been committed."),onError:r}),"COMMIT",{}),state:c.SUCCEEDED,connectionHolder:e}},rollback:function(t){var e=t.connectionHolder,r=t.onError;t.onComplete;return{result:d(new f.FailedObserver({error:p.newError("Cannot rollback this transaction, because it has already been committed."),onError:r}),"ROLLBACK",{}),state:c.SUCCEEDED,connectionHolder:e}},run:function(t,e,r){var n=r.connectionHolder,o=r.onError;r.onComplete;return d(new f.FailedObserver({error:p.newError("Cannot run query in this transaction, because it has already been committed."),onError:o}),t,e,n)}},ROLLED_BACK:{commit:function(t){var e=t.connectionHolder,r=t.onError;t.onComplete;return{result:d(new f.FailedObserver({error:p.newError("Cannot commit this transaction, because it has already been rolled back."),onError:r}),"COMMIT",{},e),state:c.ROLLED_BACK}},rollback:function(t){var e=t.connectionHolder;t.onError,t.onComplete;return{result:d(new f.FailedObserver({error:p.newError("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},e),state:c.ROLLED_BACK}},run:function(t,e,r){var n=r.connectionHolder,o=r.onError;r.onComplete;return d(new f.FailedObserver({error:p.newError("Cannot run query in this transaction, because it has already been rolled back."),onError:o}),t,e,n)}}};function h(r,t,n,o,i,s){var e=t.getConnection().then(function(e){return i(),s.forEach(function(t){return t._cancel()}),Promise.all(s).then(function(t){if(e)return r?e.protocol().commitTransaction({beforeError:n,afterComplete:o}):e.protocol().rollbackTransaction({beforeError:n,afterComplete:o});throw p.newError("No connection available")})}).catch(function(t){return new f.FailedObserver({error:t,onError:n})});return new u.default(e,r?"COMMIT":"ROLLBACK",{},t)}function d(t,e,r,n){return void 0===n&&(n=i.EMPTY_CONNECTION_HOLDER),new u.default(Promise.resolve(t),e,r,new i.ReadOnlyConnectionHolder(n||i.EMPTY_CONNECTION_HOLDER))}r.default=t},{"./error":56,"./internal/bookmark":60,"./internal/connection-holder":61,"./internal/observers":66,"./internal/tx-config":74,"./internal/util":76,"./result":80}],85:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0})},{}],86:[function(t,e,r){e.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},e.exports.default=e.exports,e.exports.__esModule=!0},{}],87:[function(t,e,r){e.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},{}],88:[function(t,e,r){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}e.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t},e.exports.default=e.exports,e.exports.__esModule=!0},{}],89:[function(t,e,r){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},e.exports.default=e.exports,e.exports.__esModule=!0,n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},{}],90:[function(t,e,r){var n=t("./setPrototypeOf.js");e.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)},e.exports.default=e.exports,e.exports.__esModule=!0},{"./setPrototypeOf.js":93}],91:[function(t,e,r){e.exports=function(t){return t&&t.__esModule?t:{default:t}},e.exports.default=e.exports,e.exports.__esModule=!0},{}],92:[function(t,e,r){var n=t("@babel/runtime/helpers/typeof").default,o=t("./assertThisInitialized.js");e.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?o(t):e},e.exports.default=e.exports,e.exports.__esModule=!0},{"./assertThisInitialized.js":86,"@babel/runtime/helpers/typeof":94}],93:[function(t,r,e){function n(t,e){return r.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r.exports.default=r.exports,r.exports.__esModule=!0,n(t,e)}r.exports=n,r.exports.default=r.exports,r.exports.__esModule=!0},{}],94:[function(t,e,r){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(t){return typeof t}:e.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e.exports.default=e.exports,e.exports.__esModule=!0,n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},{}],95:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./internal/Observable");r.Observable=n.Observable;n=t("./internal/observable/ConnectableObservable");r.ConnectableObservable=n.ConnectableObservable;n=t("./internal/operators/groupBy");r.GroupedObservable=n.GroupedObservable;n=t("./internal/symbol/observable");r.observable=n.observable;n=t("./internal/Subject");r.Subject=n.Subject;n=t("./internal/BehaviorSubject");r.BehaviorSubject=n.BehaviorSubject;n=t("./internal/ReplaySubject");r.ReplaySubject=n.ReplaySubject;n=t("./internal/AsyncSubject");r.AsyncSubject=n.AsyncSubject;n=t("./internal/scheduler/asap");r.asap=n.asap,r.asapScheduler=n.asapScheduler;n=t("./internal/scheduler/async");r.async=n.async,r.asyncScheduler=n.asyncScheduler;n=t("./internal/scheduler/queue");r.queue=n.queue,r.queueScheduler=n.queueScheduler;n=t("./internal/scheduler/animationFrame");r.animationFrame=n.animationFrame,r.animationFrameScheduler=n.animationFrameScheduler;n=t("./internal/scheduler/VirtualTimeScheduler");r.VirtualTimeScheduler=n.VirtualTimeScheduler,r.VirtualAction=n.VirtualAction;n=t("./internal/Scheduler");r.Scheduler=n.Scheduler;n=t("./internal/Subscription");r.Subscription=n.Subscription;n=t("./internal/Subscriber");r.Subscriber=n.Subscriber;n=t("./internal/Notification");r.Notification=n.Notification,r.NotificationKind=n.NotificationKind;n=t("./internal/util/pipe");r.pipe=n.pipe;n=t("./internal/util/noop");r.noop=n.noop;n=t("./internal/util/identity");r.identity=n.identity;n=t("./internal/util/isObservable");r.isObservable=n.isObservable;n=t("./internal/util/ArgumentOutOfRangeError");r.ArgumentOutOfRangeError=n.ArgumentOutOfRangeError;n=t("./internal/util/EmptyError");r.EmptyError=n.EmptyError;n=t("./internal/util/ObjectUnsubscribedError");r.ObjectUnsubscribedError=n.ObjectUnsubscribedError;n=t("./internal/util/UnsubscriptionError");r.UnsubscriptionError=n.UnsubscriptionError;n=t("./internal/util/TimeoutError");r.TimeoutError=n.TimeoutError;n=t("./internal/observable/bindCallback");r.bindCallback=n.bindCallback;n=t("./internal/observable/bindNodeCallback");r.bindNodeCallback=n.bindNodeCallback;n=t("./internal/observable/combineLatest");r.combineLatest=n.combineLatest;n=t("./internal/observable/concat");r.concat=n.concat;n=t("./internal/observable/defer");r.defer=n.defer;n=t("./internal/observable/empty");r.empty=n.empty;n=t("./internal/observable/forkJoin");r.forkJoin=n.forkJoin;n=t("./internal/observable/from");r.from=n.from;n=t("./internal/observable/fromEvent");r.fromEvent=n.fromEvent;n=t("./internal/observable/fromEventPattern");r.fromEventPattern=n.fromEventPattern;n=t("./internal/observable/generate");r.generate=n.generate;n=t("./internal/observable/iif");r.iif=n.iif;n=t("./internal/observable/interval");r.interval=n.interval;n=t("./internal/observable/merge");r.merge=n.merge;n=t("./internal/observable/never");r.never=n.never;n=t("./internal/observable/of");r.of=n.of;n=t("./internal/observable/onErrorResumeNext");r.onErrorResumeNext=n.onErrorResumeNext;n=t("./internal/observable/pairs");r.pairs=n.pairs;n=t("./internal/observable/partition");r.partition=n.partition;n=t("./internal/observable/race");r.race=n.race;n=t("./internal/observable/range");r.range=n.range;n=t("./internal/observable/throwError");r.throwError=n.throwError;n=t("./internal/observable/timer");r.timer=n.timer;n=t("./internal/observable/using");r.using=n.using;n=t("./internal/observable/zip");r.zip=n.zip;n=t("./internal/scheduled/scheduled");r.scheduled=n.scheduled;n=t("./internal/observable/empty");r.EMPTY=n.EMPTY;n=t("./internal/observable/never");r.NEVER=n.NEVER;t=t("./internal/config");r.config=t.config},{"./internal/AsyncSubject":96,"./internal/BehaviorSubject":97,"./internal/Notification":99,"./internal/Observable":100,"./internal/ReplaySubject":103,"./internal/Scheduler":104,"./internal/Subject":105,"./internal/Subscriber":107,"./internal/Subscription":108,"./internal/config":109,"./internal/observable/ConnectableObservable":111,"./internal/observable/bindCallback":113,"./internal/observable/bindNodeCallback":114,"./internal/observable/combineLatest":115,"./internal/observable/concat":116,"./internal/observable/defer":117,"./internal/observable/empty":118,"./internal/observable/forkJoin":119,"./internal/observable/from":120,"./internal/observable/fromEvent":122,"./internal/observable/fromEventPattern":123,"./internal/observable/generate":124,"./internal/observable/iif":125,"./internal/observable/interval":126,"./internal/observable/merge":127,"./internal/observable/never":128,"./internal/observable/of":129,"./internal/observable/onErrorResumeNext":130,"./internal/observable/pairs":131,"./internal/observable/partition":132,"./internal/observable/race":133,"./internal/observable/range":134,"./internal/observable/throwError":135,"./internal/observable/timer":136,"./internal/observable/using":137,"./internal/observable/zip":138,"./internal/operators/groupBy":174,"./internal/scheduled/scheduled":246,"./internal/scheduler/VirtualTimeScheduler":256,"./internal/scheduler/animationFrame":257,"./internal/scheduler/asap":258,"./internal/scheduler/async":259,"./internal/scheduler/queue":260,"./internal/symbol/observable":262,"./internal/util/ArgumentOutOfRangeError":264,"./internal/util/EmptyError":265,"./internal/util/ObjectUnsubscribedError":267,"./internal/util/TimeoutError":268,"./internal/util/UnsubscriptionError":269,"./internal/util/identity":272,"./internal/util/isObservable":281,"./internal/util/noop":284,"./internal/util/pipe":286}],96:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,s=t("./Subject"),u=t("./Subscription"),o=(i=s.Subject,o(c,i),c.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),u.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),u.Subscription.EMPTY):i.prototype._subscribe.call(this,t)},c.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},c.prototype.error=function(t){this.hasCompleted||i.prototype.error.call(this,t)},c.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&i.prototype.next.call(this,this.value),i.prototype.complete.call(this)},c);function c(){var t=null!==i&&i.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}r.AsyncSubject=o},{"./Subject":105,"./Subscription":108}],97:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,s=t("./Subject"),u=t("./util/ObjectUnsubscribedError"),o=(i=s.Subject,o(c,i),Object.defineProperty(c.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),c.prototype._subscribe=function(t){var e=i.prototype._subscribe.call(this,t);return e&&!e.closed&&t.next(this._value),e},c.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new u.ObjectUnsubscribedError;return this._value},c.prototype.next=function(t){i.prototype.next.call(this,this._value=t)},c);function c(t){var e=i.call(this)||this;return e._value=t,e}r.BehaviorSubject=o},{"./Subject":105,"./util/ObjectUnsubscribedError":267}],98:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,t=t("./Subscriber"),o=(i=t.Subscriber,o(s,i),s.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},s.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},s.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},s);function s(t,e,r){var n=i.call(this)||this;return n.parent=t,n.outerValue=e,n.outerIndex=r,n.index=0,n}r.InnerSubscriber=o},{"./Subscriber":107}],99:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./observable/empty"),o=t("./observable/of"),i=t("./observable/throwError");(t=r.NotificationKind||(r.NotificationKind={})).NEXT="N",t.ERROR="E",t.COMPLETE="C";s.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},s.prototype.do=function(t,e,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return r&&r()}},s.prototype.accept=function(t,e,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,r)},s.prototype.toObservable=function(){switch(this.kind){case"N":return o.of(this.value);case"E":return i.throwError(this.error);case"C":return n.empty()}throw new Error("unexpected notification kind value")},s.createNext=function(t){return void 0!==t?new s("N",t):s.undefinedValueNotification},s.createError=function(t){return new s("E",void 0,t)},s.createComplete=function(){return s.completeNotification},s.completeNotification=new s("C"),s.undefinedValueNotification=new s("N",void 0),t=s;function s(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue="N"===t}r.Notification=t},{"./observable/empty":118,"./observable/of":129,"./observable/throwError":135}],100:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./util/canReportError"),o=t("./util/toSubscriber"),i=t("./symbol/observable"),s=t("./util/pipe"),u=t("./config"),i=(c.prototype.lift=function(t){var e=new c;return e.source=this,e.operator=t,e},c.prototype.subscribe=function(t,e,r){var n=this.operator,r=o.toSubscriber(t,e,r);if(n?r.add(n.call(r,this.source)):r.add(this.source||u.config.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),u.config.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r},c.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){u.config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),n.canReportError(e)?e.error(t):console.warn(t)}},c.prototype.forEach=function(n,t){var o=this;return new(t=a(t))(function(t,e){var r=o.subscribe(function(t){try{n(t)}catch(t){e(t),r&&r.unsubscribe()}},e,t)})},c.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},c.prototype[i.observable]=function(){return this},c.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:s.pipeFromArray(t)(this)},c.prototype.toPromise=function(t){var n=this;return new(t=a(t))(function(t,e){var r;n.subscribe(function(t){return r=t},function(t){return e(t)},function(){return t(r)})})},c.create=function(t){return new c(t)},c);function c(t){this._isScalar=!1,t&&(this._subscribe=t)}function a(t){if(!(t=t||(u.config.Promise||Promise)))throw new Error("no Promise impl found");return t}r.Observable=i},{"./config":109,"./symbol/observable":262,"./util/canReportError":270,"./util/pipe":286,"./util/toSubscriber":293}],101:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./config"),o=t("./util/hostReportError");r.empty={closed:!0,next:function(t){},error:function(t){if(n.config.useDeprecatedSynchronousErrorHandling)throw t;o.hostReportError(t)},complete:function(){}}},{"./config":109,"./util/hostReportError":271}],102:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,t=t("./Subscriber"),o=(i=t.Subscriber,o(s,i),s.prototype.notifyNext=function(t,e,r,n,o){this.destination.next(e)},s.prototype.notifyError=function(t,e){this.destination.error(t)},s.prototype.notifyComplete=function(t){this.destination.complete()},s);function s(){return null!==i&&i.apply(this,arguments)||this}r.OuterSubscriber=o},{"./Subscriber":107}],103:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,s=t("./Subject"),u=t("./scheduler/queue"),c=t("./Subscription"),a=t("./operators/observeOn"),l=t("./util/ObjectUnsubscribedError"),f=t("./SubjectSubscription"),o=(i=s.Subject,o(p,i),p.prototype.nextInfiniteTimeWindow=function(t){var e;this.isStopped||((e=this._events).push(t),e.length>this._bufferSize&&e.shift()),i.prototype.next.call(this,t)},p.prototype.nextTimeWindow=function(t){this.isStopped||(this._events.push(new h(this._getNow(),t)),this._trimBufferThenGetEvents()),i.prototype.next.call(this,t)},p.prototype._subscribe=function(t){var e,r=this._infiniteTimeWindow,n=r?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,i=n.length;if(this.closed)throw new l.ObjectUnsubscribedError;if(e=this.isStopped||this.hasError?c.Subscription.EMPTY:(this.observers.push(t),new f.SubjectSubscription(this,t)),o&&t.add(t=new a.ObserveOnSubscriber(t,o)),r)for(var s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},p.prototype._getNow=function(){return(this.scheduler||u.queue).now()},p.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,r=this._windowTime,n=this._events,o=n.length,i=0;i<o&&!(t-n[i].time<r);)i++;return 0<(i=e<o?Math.max(i,o-e):i)&&n.splice(0,i),n},p);function p(t,e,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===e&&(e=Number.POSITIVE_INFINITY);var n=i.call(this)||this;return n.scheduler=r,n._events=[],n._infiniteTimeWindow=!1,n._bufferSize=t<1?1:t,n._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(n._infiniteTimeWindow=!0,n.next=n.nextInfiniteTimeWindow):n.next=n.nextTimeWindow,n}r.ReplaySubject=o;var h=function(t,e){this.time=t,this.value=e}},{"./Subject":105,"./SubjectSubscription":106,"./Subscription":108,"./operators/observeOn":189,"./scheduler/queue":260,"./util/ObjectUnsubscribedError":267}],104:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},o.now=function(){return Date.now()},o);function o(t,e){void 0===e&&(e=o.now),this.SchedulerAction=t,this.now=e}r.Scheduler=n},{}],105:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,s=t("./Observable"),u=t("./Subscriber"),c=t("./Subscription"),a=t("./util/ObjectUnsubscribedError"),l=t("./SubjectSubscription"),t=t("../internal/symbol/rxSubscriber"),f=(i=u.Subscriber,o(p,i),p);function p(t){var e=i.call(this,t)||this;return e.destination=t,e}r.SubjectSubscriber=f;var h,t=(h=s.Observable,o(d,h),d.prototype[t.rxSubscriber]=function(){return new f(this)},d.prototype.lift=function(t){var e=new _(this,this);return e.operator=t,e},d.prototype.next=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,r=e.length,n=e.slice(),o=0;o<r;o++)n[o].next(t)},d.prototype.error=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,r=e.length,n=e.slice(),o=0;o<r;o++)n[o].error(t);this.observers.length=0},d.prototype.complete=function(){if(this.closed)throw new a.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),n=0;n<e;n++)r[n].complete();this.observers.length=0},d.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},d.prototype._trySubscribe=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;return h.prototype._trySubscribe.call(this,t)},d.prototype._subscribe=function(t){if(this.closed)throw new a.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),c.Subscription.EMPTY):this.isStopped?(t.complete(),c.Subscription.EMPTY):(this.observers.push(t),new l.SubjectSubscription(this,t))},d.prototype.asObservable=function(){var t=new s.Observable;return t.source=this,t},d.create=function(t,e){return new _(t,e)},d);function d(){var t=h.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}r.Subject=t;var b,_=(o(y,b=t),y.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},y.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},y.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},y.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):c.Subscription.EMPTY},y);function y(t,e){var r=b.call(this)||this;return r.destination=t,r.source=e,r}r.AnonymousSubject=_},{"../internal/symbol/rxSubscriber":263,"./Observable":100,"./SubjectSubscription":106,"./Subscriber":107,"./Subscription":108,"./util/ObjectUnsubscribedError":267}],106:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,t=t("./Subscription"),o=(i=t.Subscription,o(s,i),s.prototype.unsubscribe=function(){var t,e;this.closed||(this.closed=!0,t=(e=this.subject).observers,this.subject=null,!t||0===t.length||e.isStopped||e.closed||-1!==(e=t.indexOf(this.subscriber))&&t.splice(e,1))},s);function s(t,e){var r=i.call(this)||this;return r.subject=t,r.subscriber=e,r.closed=!1,r}r.SubjectSubscription=o},{"./Subscription":108}],107:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,s=t("./util/isFunction"),u=t("./Observer"),c=t("./Subscription"),a=t("../internal/symbol/rxSubscriber"),l=t("./config"),f=t("./util/hostReportError"),a=(i=c.Subscription,o(p,i),p.prototype[a.rxSubscriber]=function(){return this},p.create=function(t,e,r){r=new p(t,e,r);return r.syncErrorThrowable=!1,r},p.prototype.next=function(t){this.isStopped||this._next(t)},p.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},p.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},p.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,i.prototype.unsubscribe.call(this))},p.prototype._next=function(t){this.destination.next(t)},p.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},p.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},p.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},p);function p(t,e,r){var n=i.call(this)||this;switch(n.syncErrorValue=null,n.syncErrorThrown=!1,n.syncErrorThrowable=!1,n.isStopped=!1,arguments.length){case 0:n.destination=u.empty;break;case 1:if(!t){n.destination=u.empty;break}if("object"==typeof t){t instanceof p?(n.syncErrorThrowable=t.syncErrorThrowable,(n.destination=t).add(n)):(n.syncErrorThrowable=!0,n.destination=new d(n,t));break}default:n.syncErrorThrowable=!0,n.destination=new d(n,t,e,r)}return n}r.Subscriber=a;var h,d=(o(b,h=a),b.prototype.next=function(t){var e;!this.isStopped&&this._next&&(e=this._parentSubscriber,l.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t))},b.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,r=l.config.useDeprecatedSynchronousErrorHandling;if(this._error)r&&e.syncErrorThrowable?this.__tryOrSetError(e,this._error,t):this.__tryOrUnsub(this._error,t),this.unsubscribe();else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):f.hostReportError(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;f.hostReportError(t)}}},b.prototype.complete=function(){var t,e,r=this;this.isStopped||(t=this._parentSubscriber,this._complete&&(e=function(){return r._complete.call(r._context)},l.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,e):this.__tryOrUnsub(e)),this.unsubscribe())},b.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),l.config.useDeprecatedSynchronousErrorHandling)throw t;f.hostReportError(t)}},b.prototype.__tryOrSetError=function(e,t,r){if(!l.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(t){return l.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0):(f.hostReportError(t),!0)}return!1},b.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},b);function b(t,e,r,n){var o,i=h.call(this)||this;i._parentSubscriber=t;t=i;return s.isFunction(e)?o=e:e&&(o=e.next,r=e.error,n=e.complete,e!==u.empty&&(t=Object.create(e),s.isFunction(t.unsubscribe)&&i.add(t.unsubscribe.bind(t)),t.unsubscribe=i.unsubscribe.bind(i))),i._context=t,i._next=o,i._error=r,i._complete=n,i}r.SafeSubscriber=d},{"../internal/symbol/rxSubscriber":263,"./Observer":101,"./Subscription":108,"./config":109,"./util/hostReportError":271,"./util/isFunction":276}],108:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var c=t("./util/isArray"),a=t("./util/isObject"),l=t("./util/isFunction"),f=t("./util/UnsubscriptionError"),t=(p.prototype.unsubscribe=function(){var e;if(!this.closed){var t=this._parentOrParents,r=this._ctorUnsubscribe,n=this._unsubscribe,o=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof p)t.remove(this);else if(null!==t)for(var i=0;i<t.length;++i)t[i].remove(this);if(l.isFunction(n)){r&&(this._unsubscribe=void 0);try{n.call(this)}catch(t){e=t instanceof f.UnsubscriptionError?h(t.errors):[t]}}if(c.isArray(o))for(var i=-1,s=o.length;++i<s;){var u=o[i];if(a.isObject(u))try{u.unsubscribe()}catch(t){e=e||[],t instanceof f.UnsubscriptionError?e=e.concat(h(t.errors)):e.push(t)}}if(e)throw new f.UnsubscriptionError(e)}},p.prototype.add=function(t){var e,r=t;if(!t)return p.EMPTY;switch(typeof t){case"function":r=new p(t);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;r instanceof p||(e=r,(r=new p)._subscriptions=[e]);break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var n=r._parentOrParents;if(null===n)r._parentOrParents=this;else if(n instanceof p){if(n===this)return r;r._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return r;n.push(this)}n=this._subscriptions;return null===n?this._subscriptions=[r]:n.push(r),r},p.prototype.remove=function(t){var e=this._subscriptions;!e||-1!==(t=e.indexOf(t))&&e.splice(t,1)},p.EMPTY=((t=new p).closed=!0,t),p);function p(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}function h(t){return t.reduce(function(t,e){return t.concat(e instanceof f.UnsubscriptionError?e.errors:e)},[])}r.Subscription=t},{"./util/UnsubscriptionError":269,"./util/isArray":273,"./util/isFunction":276,"./util/isObject":280}],109:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=!1;r.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){var e;t?(e=new Error,console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)):n&&console.log("RxJS: Back to a better error behavior. Thank you. <3"),n=t},get useDeprecatedSynchronousErrorHandling(){return n}}},{}],110:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,s=t("./Subscriber"),u=t("./Observable"),c=t("./util/subscribeTo"),t=(i=s.Subscriber,o(a,i),a.prototype._next=function(t){this.parent.notifyNext(t)},a.prototype._error=function(t){this.parent.notifyError(t),this.unsubscribe()},a.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},a);function a(t){var e=i.call(this)||this;return e.parent=t,e}r.SimpleInnerSubscriber=t;var l,t=(l=s.Subscriber,o(f,l),f.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this)},f.prototype._error=function(t){this.parent.notifyError(t),this.unsubscribe()},f.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},f);function f(t,e,r){var n=l.call(this)||this;return n.parent=t,n.outerValue=e,n.outerIndex=r,n}r.ComplexInnerSubscriber=t;var p,t=(p=s.Subscriber,o(h,p),h.prototype.notifyNext=function(t){this.destination.next(t)},h.prototype.notifyError=function(t){this.destination.error(t)},h.prototype.notifyComplete=function(){this.destination.complete()},h);function h(){return null!==p&&p.apply(this,arguments)||this}r.SimpleOuterSubscriber=t;var d,o=(d=s.Subscriber,o(b,d),b.prototype.notifyNext=function(t,e,r,n){this.destination.next(e)},b.prototype.notifyError=function(t){this.destination.error(t)},b.prototype.notifyComplete=function(t){this.destination.complete()},b);function b(){return null!==d&&d.apply(this,arguments)||this}r.ComplexOuterSubscriber=o,r.innerSubscribe=function(t,e){if(!e.closed){if(t instanceof u.Observable)return t.subscribe(e);var r;try{r=c.subscribeTo(t)(e)}catch(t){e.error(t)}return r}}},{"./Observable":100,"./Subscriber":107,"./util/subscribeTo":287}],111:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,s=t("../Subject"),u=t("../Observable"),c=t("../Subscriber"),a=t("../Subscription"),l=t("../operators/refCount"),u=(i=u.Observable,o(f,i),f.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},f.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},f.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new a.Subscription).add(this.source.subscribe(new h(this.getSubject(),this))),t.closed&&(this._connection=null,t=a.Subscription.EMPTY)),t},f.prototype.refCount=function(){return l.refCount()(this)},f);function f(t,e){var r=i.call(this)||this;return r.source=t,r.subjectFactory=e,r._refCount=0,r._isComplete=!1,r}r.ConnectableObservable=u,r.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(u=u.prototype)._subscribe},_isComplete:{value:u._isComplete,writable:!0},getSubject:{value:u.getSubject},connect:{value:u.connect},refCount:{value:u.refCount}};var p,h=(p=s.SubjectSubscriber,o(d,p),d.prototype._error=function(t){this._unsubscribe(),p.prototype._error.call(this,t)},d.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),p.prototype._complete.call(this)},d.prototype._unsubscribe=function(){var t,e=this.connectable;e&&(this.connectable=null,t=e._connection,e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe())},d);function d(t,e){t=p.call(this,t)||this;return t.connectable=e,t}b.prototype.call=function(t,e){var r=this.connectable;r._refCount++;t=new y(t,r),e=e.subscribe(t);return t.closed||(t.connection=r.connect()),e};function b(t){this.connectable=t}var _,y=(_=c.Subscriber,o(v,_),v.prototype._unsubscribe=function(){var t,e=this.connectable;e?(this.connectable=null,(t=e._refCount)<=0?this.connection=null:(e._refCount=t-1,1<t?this.connection=null:(t=this.connection,e=e._connection,this.connection=null,!e||t&&e!==t||e.unsubscribe()))):this.connection=null},v);function v(t,e){t=_.call(this,t)||this;return t.connectable=e,t}},{"../Observable":100,"../Subject":105,"../Subscriber":107,"../Subscription":108,"../operators/refCount":200}],112:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,s=t("../Observable"),u=t("../scheduler/asap"),c=t("../util/isNumeric"),o=(i=s.Observable,o(a,i),a.create=function(t,e,r){return new a(t,e=void 0===e?0:e,r=void 0===r?u.asap:r)},a.dispatch=function(t){var e=t.source,t=t.subscriber;return this.add(e.subscribe(t))},a.prototype._subscribe=function(t){var e=this.delayTime,r=this.source;return this.scheduler.schedule(a.dispatch,e,{source:r,subscriber:t})},a);function a(t,e,r){void 0===e&&(e=0),void 0===r&&(r=u.asap);var n=i.call(this)||this;return n.source=t,n.delayTime=e,n.scheduler=r,(!c.isNumeric(e)||e<0)&&(n.delayTime=0),r&&"function"==typeof r.schedule||(n.scheduler=u.asap),n}r.SubscribeOnObservable=o},{"../Observable":100,"../scheduler/asap":258,"../util/isNumeric":279}],113:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var u=t("../Observable"),c=t("../AsyncSubject"),o=t("../operators/map"),a=t("../util/canReportError"),l=t("../util/isArray"),f=t("../util/isScheduler");function p(t){var n=this,e=t.args,r=t.subscriber,o=t.params,i=o.callbackFunc,t=o.context,s=o.scheduler;if(!(u=o.subject)){var u=o.subject=new c.AsyncSubject;try{i.apply(t,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.length<=1?t[0]:t;n.add(s.schedule(h,0,{value:r,subject:u}))}]))}catch(t){u.error(t)}}this.add(u.subscribe(r))}function h(t){var e=t.value,t=t.subject;t.next(e),t.complete()}r.bindCallback=function r(i,n,s){if(n){if(!f.isScheduler(n))return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(i,s).apply(void 0,t).pipe(o.map(function(t){return l.isArray(t)?n.apply(void 0,t):n(t)}))};s=n}return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r,n=this,o={context:n,subject:r,callbackFunc:i,scheduler:s};return new u.Observable(function(t){if(s)return s.schedule(p,0,{args:e,subscriber:t,params:o});if(!r){r=new c.AsyncSubject;try{i.apply(n,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.next(t.length<=1?t[0]:t),r.complete()}]))}catch(t){a.canReportError(r)?r.error(t):console.warn(t)}}return r.subscribe(t)})}}},{"../AsyncSubject":96,"../Observable":100,"../operators/map":178,"../util/canReportError":270,"../util/isArray":273,"../util/isScheduler":283}],114:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var u=t("../Observable"),c=t("../AsyncSubject"),o=t("../operators/map"),a=t("../util/canReportError"),l=t("../util/isScheduler"),f=t("../util/isArray");function p(t){var n=this,e=t.params,r=t.subscriber,o=t.context,i=e.callbackFunc,t=e.args,s=e.scheduler;if(!(u=e.subject)){var u=e.subject=new c.AsyncSubject;try{i.apply(o,t.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.shift();r?n.add(s.schedule(d,0,{err:r,subject:u})):(r=t.length<=1?t[0]:t,n.add(s.schedule(h,0,{value:r,subject:u})))}]))}catch(t){this.add(s.schedule(d,0,{err:t,subject:u}))}}this.add(u.subscribe(r))}function h(t){var e=t.value,t=t.subject;t.next(e),t.complete()}function d(t){var e=t.err;t.subject.error(e)}r.bindNodeCallback=function r(i,n,s){if(n){if(!l.isScheduler(n))return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r(i,s).apply(void 0,t).pipe(o.map(function(t){return f.isArray(t)?n.apply(void 0,t):n(t)}))};s=n}return function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var o={subject:void 0,args:r,callbackFunc:i,scheduler:s,context:this};return new u.Observable(function(t){var e=o.context,n=o.subject;if(s)return s.schedule(p,0,{params:o,subscriber:t,context:e});if(!n){n=o.subject=new c.AsyncSubject;try{i.apply(e,r.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.shift();r?n.error(r):(n.next(t.length<=1?t[0]:t),n.complete())}]))}catch(t){a.canReportError(n)?n.error(t):console.warn(t)}}return n.subscribe(t)})}}},{"../AsyncSubject":96,"../Observable":100,"../operators/map":178,"../util/canReportError":270,"../util/isArray":273,"../util/isScheduler":283}],115:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../util/isScheduler"),s=t("../util/isArray"),u=t("../OuterSubscriber"),c=t("../util/subscribeToResult"),a=t("./fromArray"),l={};r.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=void 0,n=void 0;return i.isScheduler(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&s.isArray(t[0])&&(t=t[0]),a.fromArray(t,n).lift(new f(r))};var f=(p.prototype.call=function(t,e){return e.subscribe(new d(t,this.resultSelector))},p);function p(t){this.resultSelector=t}r.CombineLatestOperator=f;var h,d=(h=u.OuterSubscriber,o(b,h),b.prototype._next=function(t){this.values.push(l),this.observables.push(t)},b.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var r=0;r<e;r++){var n=t[r];this.add(c.subscribeToResult(this,n,void 0,r))}}},b.prototype.notifyComplete=function(t){0==--this.active&&this.destination.complete()},b.prototype.notifyNext=function(t,e,r){var n=this.values,o=n[r],o=this.toRespond?o===l?--this.toRespond:this.toRespond:0;n[r]=e,0===o&&(this.resultSelector?this._tryResultSelector(n):this.destination.next(n.slice()))},b.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},b);function b(t,e){t=h.call(this,t)||this;return t.resultSelector=e,t.active=0,t.values=[],t.observables=[],t}r.CombineLatestSubscriber=d},{"../OuterSubscriber":102,"../util/isArray":273,"../util/isScheduler":283,"../util/subscribeToResult":292,"./fromArray":121}],116:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./of"),o=t("../operators/concatAll");r.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.concatAll()(n.of.apply(void 0,t))}},{"../operators/concatAll":150,"./of":129}],117:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Observable"),o=t("./from"),i=t("./empty");r.defer=function(r){return new n.Observable(function(e){var t;try{t=r()}catch(t){return void e.error(t)}return(t?o.from(t):i.empty()).subscribe(e)})}},{"../Observable":100,"./empty":118,"./from":120}],118:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Observable");r.EMPTY=new n.Observable(function(t){return t.complete()}),r.empty=function(t){return t?(e=t,new n.Observable(function(t){return e.schedule(function(){return t.complete()})})):r.EMPTY;var e}},{"../Observable":100}],119:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Observable"),i=t("../util/isArray"),s=t("../operators/map"),u=t("../util/isObject"),l=t("./from");function c(c,a){return new n.Observable(function(n){var o=c.length;if(0!==o)for(var i=new Array(o),s=0,u=0,t=0;t<o;t++)!function(e){var t=l.from(c[e]),r=!1;n.add(t.subscribe({next:function(t){r||(r=!0,u++),i[e]=t},error:function(t){return n.error(t)},complete:function(){++s!==o&&r||(u===o&&n.next(a?a.reduce(function(t,e,r){return t[e]=i[r],t},{}):i),n.complete())}}))}(t);else n.complete()})}r.forkJoin=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){var r=t[0];if(i.isArray(r))return c(r,null);if(u.isObject(r)&&Object.getPrototypeOf(r)===Object.prototype){var n=Object.keys(r);return c(n.map(function(t){return r[t]}),n)}}if("function"!=typeof t[t.length-1])return c(t,null);var o=t.pop();return c(t=1===t.length&&i.isArray(t[0])?t[0]:t,null).pipe(s.map(function(t){return o.apply(void 0,t)}))}},{"../Observable":100,"../operators/map":178,"../util/isArray":273,"../util/isObject":280,"./from":120}],120:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Observable"),o=t("../util/subscribeTo"),i=t("../scheduled/scheduled");r.from=function(t,e){return e?i.scheduled(t,e):t instanceof n.Observable?t:new n.Observable(o.subscribeTo(t))}},{"../Observable":100,"../scheduled/scheduled":246,"../util/subscribeTo":287}],121:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Observable"),o=t("../util/subscribeToArray"),i=t("../scheduled/scheduleArray");r.fromArray=function(t,e){return e?i.scheduleArray(t,e):new n.Observable(o.subscribeToArray(t))}},{"../Observable":100,"../scheduled/scheduleArray":242,"../util/subscribeToArray":288}],122:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Observable"),s=t("../util/isArray"),u=t("../util/isFunction"),c=t("../operators/map");Object.prototype.toString;function p(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}function h(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}function d(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}r.fromEvent=function t(r,n,o,e){return u.isFunction(o)&&(e=o,o=void 0),e?t(r,n,o).pipe(c.map(function(t){return s.isArray(t)?e.apply(void 0,t):e(t)})):new i.Observable(function(e){!function t(e,r,n,o,i){var s;if(d(e)){var u=e;e.addEventListener(r,n,i),s=function(){return u.removeEventListener(r,n,i)}}else if(h(e)){var c=e;e.on(r,n),s=function(){return c.off(r,n)}}else if(p(e)){var a=e;e.addListener(r,n),s=function(){return a.removeListener(r,n)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var l=0,f=e.length;l<f;l++)t(e[l],r,n,o,i)}o.add(s)}(r,n,function(t){1<arguments.length?e.next(Array.prototype.slice.call(arguments)):e.next(t)},e,o)})}},{"../Observable":100,"../operators/map":178,"../util/isArray":273,"../util/isFunction":276}],123:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Observable"),s=t("../util/isArray"),u=t("../util/isFunction"),c=t("../operators/map");r.fromEventPattern=function t(n,o,e){return e?t(n,o).pipe(c.map(function(t){return s.isArray(t)?e.apply(void 0,t):e(t)})):new i.Observable(function(r){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.next(1===t.length?t[0]:t)}var e;try{e=n(t)}catch(t){return void r.error(t)}if(u.isFunction(o))return function(){return o(t,e)}})}},{"../Observable":100,"../operators/map":178,"../util/isArray":273,"../util/isFunction":276}],124:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var c=t("../Observable"),a=t("../util/identity"),l=t("../util/isScheduler");function f(t){var e,r=t.subscriber,n=t.condition;if(!r.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(t){return void r.error(t)}else t.needIterate=!0;if(n){var o=void 0;try{o=n(t.state)}catch(t){return void r.error(t)}if(!o)return void r.complete();if(r.closed)return}try{e=t.resultSelector(t.state)}catch(t){return void r.error(t)}if(!r.closed&&(r.next(e),!r.closed))return this.schedule(t)}}r.generate=function(t,n,o,e,i){var s,u;return 1==arguments.length?(u=t.initialState,n=t.condition,o=t.iterate,s=t.resultSelector||a.identity,i=t.scheduler):void 0===e||l.isScheduler(e)?(u=t,s=a.identity,i=e):(u=t,s=e),new c.Observable(function(e){var t=u;if(i)return i.schedule(f,0,{subscriber:e,iterate:o,condition:n,resultSelector:s,state:t});for(;;){if(n){var r=void 0;try{r=n(t)}catch(t){return void e.error(t)}if(!r){e.complete();break}}r=void 0;try{r=s(t)}catch(t){return void e.error(t)}if(e.next(r),e.closed)break;try{t=o(t)}catch(t){return void e.error(t)}}})}},{"../Observable":100,"../util/identity":272,"../util/isScheduler":283}],125:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./defer"),o=t("./empty");r.iif=function(t,e,r){return void 0===e&&(e=o.EMPTY),void 0===r&&(r=o.EMPTY),n.defer(function(){return t()?e:r})}},{"./defer":117,"./empty":118}],126:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Observable"),o=t("../scheduler/async"),i=t("../util/isNumeric");function s(t){var e=t.subscriber,r=t.counter,t=t.period;e.next(r),this.schedule({subscriber:e,counter:r+1,period:t},t)}r.interval=function(e,r){return void 0===r&&(r=o.async),(!i.isNumeric(e=void 0===e?0:e)||e<0)&&(e=0),r&&"function"==typeof r.schedule||(r=o.async),new n.Observable(function(t){return t.add(r.schedule(s,e,{subscriber:t,counter:0,period:e})),t})}},{"../Observable":100,"../scheduler/async":259,"../util/isNumeric":279}],127:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Observable"),s=t("../util/isScheduler"),u=t("../operators/mergeAll"),c=t("./fromArray");r.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Number.POSITIVE_INFINITY,n=null,o=t[t.length-1];return s.isScheduler(o)?(n=t.pop(),1<t.length&&"number"==typeof t[t.length-1]&&(r=t.pop())):"number"==typeof o&&(r=t.pop()),null===n&&1===t.length&&t[0]instanceof i.Observable?t[0]:u.mergeAll(r)(c.fromArray(t,n))}},{"../Observable":100,"../operators/mergeAll":183,"../util/isScheduler":283,"./fromArray":121}],128:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Observable"),t=t("../util/noop");r.NEVER=new n.Observable(t.noop),r.never=function(){return r.NEVER}},{"../Observable":100,"../util/noop":284}],129:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../util/isScheduler"),o=t("./fromArray"),i=t("../scheduled/scheduleArray");r.of=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return n.isScheduler(r)?(t.pop(),i.scheduleArray(t,r)):o.fromArray(t)}},{"../scheduled/scheduleArray":242,"../util/isScheduler":283,"./fromArray":121}],130:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Observable"),i=t("./from"),s=t("../util/isArray"),u=t("./empty");function c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return u.EMPTY;var r=t[0],n=t.slice(1);return 1===t.length&&s.isArray(r)?c.apply(void 0,r):new o.Observable(function(e){function t(){return e.add(c.apply(void 0,n).subscribe(e))}return i.from(r).subscribe({next:function(t){e.next(t)},error:t,complete:t})})}r.onErrorResumeNext=c},{"../Observable":100,"../util/isArray":273,"./empty":118,"./from":120}],131:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Observable"),s=t("../Subscription");function u(t){var e=t.keys,r=t.index,n=t.subscriber,o=t.subscription,i=t.obj;n.closed||(r<e.length?(t=e[r],n.next([t,i[t]]),o.add(this.schedule({keys:e,index:r+1,subscriber:n,subscription:o,obj:i}))):n.complete())}r.pairs=function(o,n){return n?new i.Observable(function(t){var e=Object.keys(o),r=new s.Subscription;return r.add(n.schedule(u,0,{keys:e,index:0,subscriber:t,subscription:r,obj:o})),r}):new i.Observable(function(t){for(var e=Object.keys(o),r=0;r<e.length&&!t.closed;r++){var n=e[r];o.hasOwnProperty(n)&&t.next([n,o[n]])}t.complete()})},r.dispatch=u},{"../Observable":100,"../Subscription":108}],132:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../util/not"),o=t("../util/subscribeTo"),i=t("../operators/filter"),s=t("../Observable");r.partition=function(t,e,r){return[i.filter(e,r)(new s.Observable(o.subscribeTo(t))),i.filter(n.not(e,r))(new s.Observable(o.subscribeTo(t)))]}},{"../Observable":100,"../operators/filter":169,"../util/not":285,"../util/subscribeTo":287}],133:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../util/isArray"),s=t("./fromArray"),u=t("../OuterSubscriber"),c=t("../util/subscribeToResult");r.race=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!i.isArray(t[0]))return t[0];t=t[0]}return s.fromArray(t,void 0).lift(new a)};var a=(l.prototype.call=function(t,e){return e.subscribe(new p(t))},l);function l(){}r.RaceOperator=a;var f,p=(f=u.OuterSubscriber,o(h,f),h.prototype._next=function(t){this.observables.push(t)},h.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var r=0;r<e&&!this.hasFirst;r++){var n=t[r],n=c.subscribeToResult(this,n,void 0,r);this.subscriptions&&this.subscriptions.push(n),this.add(n)}this.observables=null}},h.prototype.notifyNext=function(t,e,r){if(!this.hasFirst){this.hasFirst=!0;for(var n,o=0;o<this.subscriptions.length;o++)o!==r&&((n=this.subscriptions[o]).unsubscribe(),this.remove(n));this.subscriptions=null}this.destination.next(e)},h);function h(t){t=f.call(this,t)||this;return t.hasFirst=!1,t.observables=[],t.subscriptions=[],t}r.RaceSubscriber=p},{"../OuterSubscriber":102,"../util/isArray":273,"../util/subscribeToResult":292,"./fromArray":121}],134:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=t("../Observable");function u(t){var e=t.start,r=t.index,n=t.count,o=t.subscriber;n<=r?o.complete():(o.next(e),o.closed||(t.index=r+1,t.start=e+1,this.schedule(t)))}r.range=function(n,o,i){return void 0===n&&(n=0),new s.Observable(function(t){void 0===o&&(o=n,n=0);var e=0,r=n;if(i)return i.schedule(u,0,{index:e,count:o,start:n,subscriber:t});for(;;){if(e++>=o){t.complete();break}if(t.next(r++),t.closed)break}})},r.dispatch=u},{"../Observable":100}],135:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Observable");function o(t){var e=t.error;t.subscriber.error(e)}r.throwError=function(e,r){return r?new n.Observable(function(t){return r.schedule(o,0,{error:e,subscriber:t})}):new n.Observable(function(t){return t.error(e)})}},{"../Observable":100}],136:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Observable"),s=t("../scheduler/async"),u=t("../util/isNumeric"),c=t("../util/isScheduler");function a(t){var e=t.index,r=t.period,n=t.subscriber;if(n.next(e),!n.closed){if(-1===r)return n.complete();t.index=e+1,this.schedule(t,r)}}r.timer=function(r,t,n){void 0===r&&(r=0);var o=-1;return u.isNumeric(t)?o=Number(t)<1?1:Number(t):c.isScheduler(t)&&(n=t),c.isScheduler(n)||(n=s.async),new i.Observable(function(t){var e=u.isNumeric(r)?r:+r-n.now();return n.schedule(a,e,{index:0,period:o,subscriber:t})})}},{"../Observable":100,"../scheduler/async":259,"../util/isNumeric":279,"../util/isScheduler":283}],137:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Observable"),s=t("./from"),u=t("./empty");r.using=function(o,i){return new n.Observable(function(e){var t,r;try{t=o()}catch(t){return void e.error(t)}try{r=i(t)}catch(t){return void e.error(t)}var n=(r?s.from(r):u.EMPTY).subscribe(e);return function(){n.unsubscribe(),t&&t.unsubscribe()}})}},{"../Observable":100,"./empty":118,"./from":120}],138:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("./fromArray"),s=t("../util/isArray"),u=t("../Subscriber"),c=t("../../internal/symbol/iterator"),a=t("../innerSubscribe");r.zip=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return"function"==typeof r&&t.pop(),i.fromArray(t,void 0).lift(new l(r))};var l=(f.prototype.call=function(t,e){return e.subscribe(new h(t,this.resultSelector))},f);function f(t){this.resultSelector=t}r.ZipOperator=l;var p,h=(p=u.Subscriber,o(d,p),d.prototype._next=function(t){var e=this.iterators;s.isArray(t)?e.push(new y(t)):"function"==typeof t[c.iterator]?e.push(new b(t[c.iterator]())):e.push(new g(this.destination,this,t))},d.prototype._complete=function(){var t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(var r=0;r<e;r++){var n=t[r];n.stillUnsubscribed?this.destination.add(n.subscribe()):this.active--}}else this.destination.complete()},d.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},d.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,r=this.destination,n=0;n<e;n++)if("function"==typeof(s=t[n]).hasValue&&!s.hasValue())return;for(var o=!1,i=[],n=0;n<e;n++){var s,u=(s=t[n]).next();if(s.hasCompleted()&&(o=!0),u.done)return void r.complete();i.push(u.value)}this.resultSelector?this._tryresultSelector(i):r.next(i),o&&r.complete()},d.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},d);function d(t,e,r){void 0===r&&(r=Object.create(null));t=p.call(this,t)||this;return t.resultSelector=e,t.iterators=[],t.active=0,t.resultSelector="function"==typeof e?e:void 0,t}r.ZipSubscriber=h;var b=(_.prototype.hasValue=function(){return!0},_.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},_.prototype.hasCompleted=function(){var t=this.nextResult;return Boolean(t&&t.done)},_);function _(t){this.iterator=t,this.nextResult=t.next()}var y=(v.prototype[c.iterator]=function(){return this},v.prototype.next=function(t){var e=this.index++,r=this.array;return e<this.length?{value:r[e],done:!1}:{value:null,done:!0}},v.prototype.hasValue=function(){return this.array.length>this.index},v.prototype.hasCompleted=function(){return this.array.length===this.index},v);function v(t){this.array=t,this.index=0,this.length=0,this.length=t.length}var m,g=(m=a.SimpleOuterSubscriber,o(O,m),O.prototype[c.iterator]=function(){return this},O.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},O.prototype.hasValue=function(){return 0<this.buffer.length},O.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},O.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},O.prototype.notifyNext=function(t){this.buffer.push(t),this.parent.checkIterators()},O.prototype.subscribe=function(){return a.innerSubscribe(this.observable,new a.SimpleInnerSubscriber(this))},O);function O(t,e,r){t=m.call(this,t)||this;return t.parent=e,t.observable=r,t.stillUnsubscribed=!0,t.buffer=[],t.isComplete=!1,t}},{"../../internal/symbol/iterator":261,"../Subscriber":107,"../innerSubscribe":110,"../util/isArray":273,"./fromArray":121}],139:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../innerSubscribe");r.audit=function(e){return function(t){return t.lift(new s(e))}};var s=(u.prototype.call=function(t,e){return e.subscribe(new a(t,this.durationSelector))},u);function u(t){this.durationSelector=t}var c,a=(c=i.SimpleOuterSubscriber,o(l,c),l.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=void 0;try{e=(0,this.durationSelector)(t)}catch(t){return this.destination.error(t)}e=i.innerSubscribe(e,new i.SimpleInnerSubscriber(this));!e||e.closed?this.clearThrottle():this.add(this.throttled=e)}},l.prototype.clearThrottle=function(){var t=this.value,e=this.hasValue,r=this.throttled;r&&(this.remove(r),this.throttled=void 0,r.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))},l.prototype.notifyNext=function(){this.clearThrottle()},l.prototype.notifyComplete=function(){this.clearThrottle()},l);function l(t,e){t=c.call(this,t)||this;return t.durationSelector=e,t.hasValue=!1,t}},{"../innerSubscribe":110}],140:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../scheduler/async"),o=t("./audit"),i=t("../observable/timer");r.auditTime=function(t,e){return void 0===e&&(e=n.async),o.audit(function(){return i.timer(t,e)})}},{"../observable/timer":136,"../scheduler/async":259,"./audit":139}],141:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../innerSubscribe");r.buffer=function(e){return function(t){return t.lift(new s(e))}};var s=(u.prototype.call=function(t,e){return e.subscribe(new a(t,this.closingNotifier))},u);function u(t){this.closingNotifier=t}var c,a=(c=i.SimpleOuterSubscriber,o(l,c),l.prototype._next=function(t){this.buffer.push(t)},l.prototype.notifyNext=function(){var t=this.buffer;this.buffer=[],this.destination.next(t)},l);function l(t,e){t=c.call(this,t)||this;return t.buffer=[],t.add(i.innerSubscribe(e,new i.SimpleInnerSubscriber(t))),t}},{"../innerSubscribe":110}],142:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});t=t("../Subscriber");r.bufferCount=function(e,r){return void 0===r&&(r=null),function(t){return t.lift(new i(e,r))}};var i=(s.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},s);function s(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?f:c}var u,c=(u=t.Subscriber,o(a,u),a.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},a.prototype._complete=function(){var t=this.buffer;0<t.length&&this.destination.next(t),u.prototype._complete.call(this)},a);function a(t,e){t=u.call(this,t)||this;return t.bufferSize=e,t.buffer=[],t}var l,f=(l=t.Subscriber,o(p,l),p.prototype._next=function(t){var e=this.bufferSize,r=this.startBufferEvery,n=this.buffers,o=this.count;this.count++,o%r==0&&n.push([]);for(var i=n.length;i--;){var s=n[i];s.push(t),s.length===e&&(n.splice(i,1),this.destination.next(s))}},p.prototype._complete=function(){for(var t=this.buffers,e=this.destination;0<t.length;){var r=t.shift();0<r.length&&e.next(r)}l.prototype._complete.call(this)},p);function p(t,e,r){t=l.call(this,t)||this;return t.bufferSize=e,t.startBufferEvery=r,t.buffers=[],t.count=0,t}},{"../Subscriber":107}],143:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../scheduler/async"),s=t("../Subscriber"),u=t("../util/isScheduler");r.bufferTime=function(e){var t=arguments.length,r=i.async;u.isScheduler(arguments[arguments.length-1])&&(r=arguments[arguments.length-1],t--);var n=null;2<=t&&(n=arguments[1]);var o=Number.POSITIVE_INFINITY;return 3<=t&&(o=arguments[2]),function(t){return t.lift(new c(e,n,o,r))}};var c=(a.prototype.call=function(t,e){return e.subscribe(new p(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},a);function a(t,e,r,n){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=r,this.scheduler=n}var l,f=function(){this.buffer=[]},p=(l=s.Subscriber,o(h,l),h.prototype._next=function(t){for(var e,r=this.contexts,n=r.length,o=0;o<n;o++){var i=r[o],s=i.buffer;s.push(t),s.length==this.maxBufferSize&&(e=i)}e&&this.onBufferFull(e)},h.prototype._error=function(t){this.contexts.length=0,l.prototype._error.call(this,t)},h.prototype._complete=function(){for(var t=this.contexts,e=this.destination;0<t.length;){var r=t.shift();e.next(r.buffer)}l.prototype._complete.call(this)},h.prototype._unsubscribe=function(){this.contexts=null},h.prototype.onBufferFull=function(t){this.closeContext(t);var e=t.closeAction;e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly&&(t=this.openContext(),e=this.bufferTimeSpan,this.add(t.closeAction=this.scheduler.schedule(d,e,{subscriber:this,context:t,bufferTimeSpan:e})))},h.prototype.openContext=function(){var t=new f;return this.contexts.push(t),t},h.prototype.closeContext=function(t){this.destination.next(t.buffer);var e=this.contexts;0<=(e?e.indexOf(t):-1)&&e.splice(e.indexOf(t),1)},h);function h(t,e,r,n,o){var i=l.call(this,t)||this;i.bufferTimeSpan=e,i.bufferCreationInterval=r,i.maxBufferSize=n,i.scheduler=o,i.contexts=[];t=i.openContext();return i.timespanOnly=null==r||r<0,i.timespanOnly?i.add(t.closeAction=o.schedule(d,e,{subscriber:i,context:t,bufferTimeSpan:e})):(n={bufferTimeSpan:e,bufferCreationInterval:r,subscriber:i,scheduler:o},i.add(t.closeAction=o.schedule(_,e,{subscriber:i,context:t})),i.add(o.schedule(b,r,n))),i}function d(t){var e=t.subscriber,r=t.context;r&&e.closeContext(r),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function b(t){var e=t.bufferCreationInterval,r=t.bufferTimeSpan,n=t.subscriber,o=t.scheduler,i=n.openContext();n.closed||(n.add(i.closeAction=o.schedule(_,r,{subscriber:n,context:i})),this.schedule(t,e))}function _(t){var e=t.subscriber,t=t.context;e.closeContext(t)}},{"../Subscriber":107,"../scheduler/async":259,"../util/isScheduler":283}],144:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscription"),s=t("../util/subscribeToResult"),t=t("../OuterSubscriber");r.bufferToggle=function(e,r){return function(t){return t.lift(new u(e,r))}};var u=(c.prototype.call=function(t,e){return e.subscribe(new l(t,this.openings,this.closingSelector))},c);function c(t,e){this.openings=t,this.closingSelector=e}var a,l=(a=t.OuterSubscriber,o(f,a),f.prototype._next=function(t){for(var e=this.contexts,r=e.length,n=0;n<r;n++)e[n].buffer.push(t)},f.prototype._error=function(t){for(var e=this.contexts;0<e.length;){var r=e.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,a.prototype._error.call(this,t)},f.prototype._complete=function(){for(var t=this.contexts;0<t.length;){var e=t.shift();this.destination.next(e.buffer),e.subscription.unsubscribe(),e.buffer=null,e.subscription=null}this.contexts=null,a.prototype._complete.call(this)},f.prototype.notifyNext=function(t,e){t?this.closeBuffer(t):this.openBuffer(e)},f.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},f.prototype.openBuffer=function(t){try{var e=this.closingSelector.call(this,t);e&&this.trySubscribe(e)}catch(t){this._error(t)}},f.prototype.closeBuffer=function(t){var e,r,n=this.contexts;n&&t&&(e=t.buffer,r=t.subscription,this.destination.next(e),n.splice(n.indexOf(t),1),this.remove(r),r.unsubscribe())},f.prototype.trySubscribe=function(t){var e=this.contexts,r=new i.Subscription,n={buffer:[],subscription:r};e.push(n);t=s.subscribeToResult(this,t,n);!t||t.closed?this.closeBuffer(n):(t.context=n,this.add(t),r.add(t))},f);function f(t,e,r){t=a.call(this,t)||this;return t.closingSelector=r,t.contexts=[],t.add(s.subscribeToResult(t,e)),t}},{"../OuterSubscriber":102,"../Subscription":108,"../util/subscribeToResult":292}],145:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscription"),s=t("../innerSubscribe");r.bufferWhen=function(e){return function(t){return t.lift(new u(e))}};var u=(c.prototype.call=function(t,e){return e.subscribe(new l(t,this.closingSelector))},c);function c(t){this.closingSelector=t}var a,l=(a=s.SimpleOuterSubscriber,o(f,a),f.prototype._next=function(t){this.buffer.push(t)},f.prototype._complete=function(){var t=this.buffer;t&&this.destination.next(t),a.prototype._complete.call(this)},f.prototype._unsubscribe=function(){this.buffer=void 0,this.subscribing=!1},f.prototype.notifyNext=function(){this.openBuffer()},f.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},f.prototype.openBuffer=function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe());var e=this.buffer;this.buffer&&this.destination.next(e),this.buffer=[];try{var r=(0,this.closingSelector)()}catch(t){return this.error(t)}t=new i.Subscription,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(s.innerSubscribe(r,new s.SimpleInnerSubscriber(this))),this.subscribing=!1},f);function f(t,e){t=a.call(this,t)||this;return t.closingSelector=e,t.subscribing=!1,t.openBuffer(),t}},{"../Subscription":108,"../innerSubscribe":110}],146:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../innerSubscribe");r.catchError=function(r){return function(t){var e=new s(r),t=t.lift(e);return e.caught=t}};var s=(u.prototype.call=function(t,e){return e.subscribe(new a(t,this.selector,this.caught))},u);function u(t){this.selector=t}var c,a=(c=i.SimpleOuterSubscriber,o(l,c),l.prototype.error=function(t){if(!this.isStopped){var e=void 0;try{e=this.selector(t,this.caught)}catch(t){return void c.prototype.error.call(this,t)}this._unsubscribeAndRecycle();t=new i.SimpleInnerSubscriber(this);this.add(t);e=i.innerSubscribe(e,t);e!==t&&this.add(e)}},l);function l(t,e,r){t=c.call(this,t)||this;return t.selector=e,t.caught=r,t}},{"../innerSubscribe":110}],147:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../observable/combineLatest");r.combineAll=function(e){return function(t){return t.lift(new n.CombineLatestOperator(e))}}},{"../observable/combineLatest":115}],148:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../util/isArray"),o=t("../observable/combineLatest"),i=t("../observable/from");r.combineLatest=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=null;return"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&n.isArray(e[0])&&(e=e[0].slice()),function(t){return t.lift.call(i.from([t].concat(e)),new o.CombineLatestOperator(r))}}},{"../observable/combineLatest":115,"../observable/from":120,"../util/isArray":273}],149:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../observable/concat");r.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(n.concat.apply(void 0,[t].concat(e)))}}},{"../observable/concat":116}],150:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./mergeAll");r.concatAll=function(){return n.mergeAll(1)}},{"./mergeAll":183}],151:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./mergeMap");r.concatMap=function(t,e){return n.mergeMap(t,e,1)}},{"./mergeMap":184}],152:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./concatMap");r.concatMapTo=function(t,e){return n.concatMap(function(){return t},e)}},{"./concatMap":151}],153:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});t=t("../Subscriber");r.count=function(e){return function(t){return t.lift(new i(e,t))}};var i=(s.prototype.call=function(t,e){return e.subscribe(new c(t,this.predicate,this.source))},s);function s(t,e){this.predicate=t,this.source=e}var u,c=(u=t.Subscriber,o(a,u),a.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},a.prototype._tryPredicate=function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e&&this.count++},a.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},a);function a(t,e,r){t=u.call(this,t)||this;return t.predicate=e,t.source=r,t.count=0,t.index=0,t}},{"../Subscriber":107}],154:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../innerSubscribe");r.debounce=function(e){return function(t){return t.lift(new s(e))}};var s=(u.prototype.call=function(t,e){return e.subscribe(new a(t,this.durationSelector))},u);function u(t){this.durationSelector=t}var c,a=(c=i.SimpleOuterSubscriber,o(l,c),l.prototype._next=function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(t){this.destination.error(t)}},l.prototype._complete=function(){this.emitValue(),this.destination.complete()},l.prototype._tryNext=function(t,e){var r=this.durationSubscription;this.value=t,this.hasValue=!0,r&&(r.unsubscribe(),this.remove(r)),(r=i.innerSubscribe(e,new i.SimpleInnerSubscriber(this)))&&!r.closed&&this.add(this.durationSubscription=r)},l.prototype.notifyNext=function(){this.emitValue()},l.prototype.notifyComplete=function(){this.emitValue()},l.prototype.emitValue=function(){var t,e;this.hasValue&&(t=this.value,(e=this.durationSubscription)&&(this.durationSubscription=void 0,e.unsubscribe(),this.remove(e)),this.value=void 0,this.hasValue=!1,c.prototype._next.call(this,t))},l);function l(t,e){t=c.call(this,t)||this;return t.durationSelector=e,t.hasValue=!1,t}},{"../innerSubscribe":110}],155:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber"),s=t("../scheduler/async");r.debounceTime=function(e,r){return void 0===r&&(r=s.async),function(t){return t.lift(new u(e,r))}};var u=(c.prototype.call=function(t,e){return e.subscribe(new l(t,this.dueTime,this.scheduler))},c);function c(t,e){this.dueTime=t,this.scheduler=e}var a,l=(a=i.Subscriber,o(f,a),f.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(p,this.dueTime,this))},f.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},f.prototype.debouncedNext=function(){var t;this.clearDebounce(),this.hasValue&&(t=this.lastValue,this.lastValue=null,this.hasValue=!1,this.destination.next(t))},f.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},f);function f(t,e,r){t=a.call(this,t)||this;return t.dueTime=e,t.scheduler=r,t.debouncedSubscription=null,t.lastValue=null,t.hasValue=!1,t}function p(t){t.debouncedNext()}},{"../Subscriber":107,"../scheduler/async":259}],156:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});t=t("../Subscriber");r.defaultIfEmpty=function(e){return void 0===e&&(e=null),function(t){return t.lift(new i(e))}};var i=(s.prototype.call=function(t,e){return e.subscribe(new c(t,this.defaultValue))},s);function s(t){this.defaultValue=t}var u,c=(u=t.Subscriber,o(a,u),a.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},a.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},a);function a(t,e){t=u.call(this,t)||this;return t.defaultValue=e,t.isEmpty=!0,t}},{"../Subscriber":107}],157:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../scheduler/async"),s=t("../util/isDate"),u=t("../Subscriber"),c=t("../Notification");r.delay=function(t,e){void 0===e&&(e=i.async);var r=s.isDate(t)?+t-e.now():Math.abs(t);return function(t){return t.lift(new a(r,e))}};var a=(l.prototype.call=function(t,e){return e.subscribe(new p(t,this.delay,this.scheduler))},l);function l(t,e){this.delay=t,this.scheduler=e}var f,p=(f=u.Subscriber,o(h,f),h.dispatch=function(t){for(var e,r=t.source,n=r.queue,o=t.scheduler,i=t.destination;0<n.length&&n[0].time-o.now()<=0;)n.shift().notification.observe(i);0<n.length?(e=Math.max(0,n[0].time-o.now()),this.schedule(t,e)):(this.unsubscribe(),r.active=!1)},h.prototype._schedule=function(t){this.active=!0,this.destination.add(t.schedule(h.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},h.prototype.scheduleNotification=function(t){var e;!0!==this.errored&&(e=this.scheduler,t=new d(e.now()+this.delay,t),this.queue.push(t),!1===this.active&&this._schedule(e))},h.prototype._next=function(t){this.scheduleNotification(c.Notification.createNext(t))},h.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()},h.prototype._complete=function(){this.scheduleNotification(c.Notification.createComplete()),this.unsubscribe()},h);function h(t,e,r){t=f.call(this,t)||this;return t.delay=e,t.scheduler=r,t.queue=[],t.active=!1,t.errored=!1,t}var d=function(t,e){this.time=t,this.notification=e}},{"../Notification":99,"../Subscriber":107,"../scheduler/async":259,"../util/isDate":275}],158:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber"),s=t("../Observable"),u=t("../OuterSubscriber"),c=t("../util/subscribeToResult");r.delayWhen=function(e,r){return r?function(t){return new b(t,r).lift(new a(e))}:function(t){return t.lift(new a(e))}};var a=(l.prototype.call=function(t,e){return e.subscribe(new p(t,this.delayDurationSelector))},l);function l(t){this.delayDurationSelector=t}var f,p=(f=u.OuterSubscriber,o(h,f),h.prototype.notifyNext=function(t,e,r,n,o){this.destination.next(t),this.removeSubscription(o),this.tryComplete()},h.prototype.notifyError=function(t,e){this._error(t)},h.prototype.notifyComplete=function(t){t=this.removeSubscription(t);t&&this.destination.next(t),this.tryComplete()},h.prototype._next=function(t){var e=this.index++;try{var r=this.delayDurationSelector(t,e);r&&this.tryDelay(r,t)}catch(t){this.destination.error(t)}},h.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},h.prototype.removeSubscription=function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t);return-1!==e&&this.delayNotifierSubscriptions.splice(e,1),t.outerValue},h.prototype.tryDelay=function(t,e){e=c.subscribeToResult(this,t,e);e&&!e.closed&&(this.destination.add(e),this.delayNotifierSubscriptions.push(e))},h.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},h);function h(t,e){t=f.call(this,t)||this;return t.delayDurationSelector=e,t.completed=!1,t.delayNotifierSubscriptions=[],t.index=0,t}var d,b=(d=s.Observable,o(_,d),_.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new v(t,this.source))},_);function _(t,e){var r=d.call(this)||this;return r.source=t,r.subscriptionDelay=e,r}var y,v=(y=i.Subscriber,o(m,y),m.prototype._next=function(t){this.subscribeToSource()},m.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},m.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},m.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},m);function m(t,e){var r=y.call(this)||this;return r.parent=t,r.source=e,r.sourceSubscribed=!1,r}},{"../Observable":100,"../OuterSubscriber":102,"../Subscriber":107,"../util/subscribeToResult":292}],159:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});t=t("../Subscriber");r.dematerialize=function(){return function(t){return t.lift(new i)}};var i=(s.prototype.call=function(t,e){return e.subscribe(new c(t))},s);function s(){}var u,c=(u=t.Subscriber,o(a,u),a.prototype._next=function(t){t.observe(this.destination)},a);function a(t){return u.call(this,t)||this}},{"../Subscriber":107}],160:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../innerSubscribe");r.distinct=function(e,r){return function(t){return t.lift(new s(e,r))}};var s=(u.prototype.call=function(t,e){return e.subscribe(new a(t,this.keySelector,this.flushes))},u);function u(t,e){this.keySelector=t,this.flushes=e}var c,a=(c=i.SimpleOuterSubscriber,o(l,c),l.prototype.notifyNext=function(){this.values.clear()},l.prototype.notifyError=function(t){this._error(t)},l.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},l.prototype._useKeySelector=function(t){var e,r=this.destination;try{e=this.keySelector(t)}catch(t){return void r.error(t)}this._finalizeNext(e,t)},l.prototype._finalizeNext=function(t,e){var r=this.values;r.has(t)||(r.add(t),this.destination.next(e))},l);function l(t,e,r){t=c.call(this,t)||this;return t.keySelector=e,t.values=new Set,r&&t.add(i.innerSubscribe(r,new i.SimpleInnerSubscriber(t))),t}r.DistinctSubscriber=a},{"../innerSubscribe":110}],161:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});t=t("../Subscriber");r.distinctUntilChanged=function(e,r){return function(t){return t.lift(new i(e,r))}};var i=(s.prototype.call=function(t,e){return e.subscribe(new c(t,this.compare,this.keySelector))},s);function s(t,e){this.compare=t,this.keySelector=e}var u,c=(u=t.Subscriber,o(a,u),a.prototype.compare=function(t,e){return t===e},a.prototype._next=function(t){try{var e=this.keySelector,r=e?e(t):t}catch(t){return this.destination.error(t)}e=!1;if(this.hasKey)try{e=(0,this.compare)(this.key,r)}catch(t){return this.destination.error(t)}else this.hasKey=!0;e||(this.key=r,this.destination.next(t))},a);function a(t,e,r){t=u.call(this,t)||this;return t.keySelector=r,t.hasKey=!1,"function"==typeof e&&(t.compare=e),t}},{"../Subscriber":107}],162:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("./distinctUntilChanged");r.distinctUntilKeyChanged=function(r,n){return o.distinctUntilChanged(function(t,e){return n?n(t[r],e[r]):t[r]===e[r]})}},{"./distinctUntilChanged":161}],163:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("../util/ArgumentOutOfRangeError"),i=t("./filter"),s=t("./throwIfEmpty"),u=t("./defaultIfEmpty"),c=t("./take");r.elementAt=function(r,e){if(r<0)throw new o.ArgumentOutOfRangeError;var n=2<=arguments.length;return function(t){return t.pipe(i.filter(function(t,e){return e===r}),c.take(1),n?u.defaultIfEmpty(e):s.throwIfEmpty(function(){return new o.ArgumentOutOfRangeError}))}}},{"../util/ArgumentOutOfRangeError":264,"./defaultIfEmpty":156,"./filter":169,"./take":221,"./throwIfEmpty":228}],164:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../observable/concat"),o=t("../observable/of");r.endWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return n.concat(t,o.of.apply(void 0,e))}}},{"../observable/concat":116,"../observable/of":129}],165:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});t=t("../Subscriber");r.every=function(e,r){return function(t){return t.lift(new i(e,r,t))}};var i=(s.prototype.call=function(t,e){return e.subscribe(new c(t,this.predicate,this.thisArg,this.source))},s);function s(t,e,r){this.predicate=t,this.thisArg=e,this.source=r}var u,c=(u=t.Subscriber,o(a,u),a.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},a.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e||this.notifyComplete(!1)},a.prototype._complete=function(){this.notifyComplete(!0)},a);function a(t,e,r,n){t=u.call(this,t)||this;return t.predicate=e,t.thisArg=r,t.source=n,t.index=0,t.thisArg=r||t,t}},{"../Subscriber":107}],166:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../innerSubscribe");r.exhaust=function(){return function(t){return t.lift(new s)}};var s=(u.prototype.call=function(t,e){return e.subscribe(new a(t))},u);function u(){}var c,a=(c=i.SimpleOuterSubscriber,o(l,c),l.prototype._next=function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(i.innerSubscribe(t,new i.SimpleInnerSubscriber(this))))},l.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},l.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},l);function l(t){t=c.call(this,t)||this;return t.hasCompleted=!1,t.hasSubscription=!1,t}},{"../innerSubscribe":110}],167:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var s=t("./map"),u=t("../observable/from"),i=t("../innerSubscribe");r.exhaustMap=function e(o,i){return i?function(t){return t.pipe(e(function(r,n){return u.from(o(r,n)).pipe(s.map(function(t,e){return i(r,t,n,e)}))}))}:function(t){return t.lift(new c(o))}};var c=(a.prototype.call=function(t,e){return e.subscribe(new f(t,this.project))},a);function a(t){this.project=t}var l,f=(l=i.SimpleOuterSubscriber,o(p,l),p.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},p.prototype.tryNext=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this.hasSubscription=!0,this._innerSub(e)},p.prototype._innerSub=function(t){var e=new i.SimpleInnerSubscriber(this),r=this.destination;r.add(e);t=i.innerSubscribe(t,e);t!==e&&r.add(t)},p.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},p.prototype.notifyNext=function(t){this.destination.next(t)},p.prototype.notifyError=function(t){this.destination.error(t)},p.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},p);function p(t,e){t=l.call(this,t)||this;return t.project=e,t.hasSubscription=!1,t.hasCompleted=!1,t.index=0,t}},{"../innerSubscribe":110,"../observable/from":120,"./map":178}],168:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../innerSubscribe");r.expand=function(e,r,n){return r=((r=void 0===r?Number.POSITIVE_INFINITY:r)||0)<1?Number.POSITIVE_INFINITY:r,function(t){return t.lift(new s(e,r,n))}};var s=(u.prototype.call=function(t,e){return e.subscribe(new a(t,this.project,this.concurrent,this.scheduler))},u);function u(t,e,r){this.project=t,this.concurrent=e,this.scheduler=r}r.ExpandOperator=s;var c,a=(c=i.SimpleOuterSubscriber,o(l,c),l.dispatch=function(t){var e=t.subscriber,r=t.result,n=t.value,t=t.index;e.subscribeToProjection(r,n,t)},l.prototype._next=function(t){var e=this.destination;if(e.closed)this._complete();else{var r=this.index++;if(this.active<this.concurrent){e.next(t);try{var n,o=(0,this.project)(t,r);this.scheduler?(n={subscriber:this,result:o,value:t,index:r},this.destination.add(this.scheduler.schedule(l.dispatch,0,n))):this.subscribeToProjection(o,t,r)}catch(t){e.error(t)}}else this.buffer.push(t)}},l.prototype.subscribeToProjection=function(t,e,r){this.active++,this.destination.add(i.innerSubscribe(t,new i.SimpleInnerSubscriber(this)))},l.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete(),this.unsubscribe()},l.prototype.notifyNext=function(t){this._next(t)},l.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t&&0<t.length&&this._next(t.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},l);function l(t,e,r,n){t=c.call(this,t)||this;return t.project=e,t.concurrent=r,t.scheduler=n,t.index=0,t.active=0,t.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(t.buffer=[]),t}r.ExpandSubscriber=a},{"../innerSubscribe":110}],169:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});t=t("../Subscriber");r.filter=function(e,r){return function(t){return t.lift(new i(e,r))}};var i=(s.prototype.call=function(t,e){return e.subscribe(new c(t,this.predicate,this.thisArg))},s);function s(t,e){this.predicate=t,this.thisArg=e}var u,c=(u=t.Subscriber,o(a,u),a.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},a);function a(t,e,r){t=u.call(this,t)||this;return t.predicate=e,t.thisArg=r,t.count=0,t}},{"../Subscriber":107}],170:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber"),s=t("../Subscription");r.finalize=function(e){return function(t){return t.lift(new u(e))}};var u=(c.prototype.call=function(t,e){return e.subscribe(new l(t,this.callback))},c);function c(t){this.callback=t}var a,l=(a=i.Subscriber,o(f,a),f);function f(t,e){t=a.call(this,t)||this;return t.add(new s.Subscription(e)),t}},{"../Subscriber":107,"../Subscription":108}],171:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});t=t("../Subscriber");r.find=function(e,r){if("function"!=typeof e)throw new TypeError("predicate is not a function");return function(t){return t.lift(new i(e,t,!1,r))}};var i=(s.prototype.call=function(t,e){return e.subscribe(new c(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},s);function s(t,e,r,n){this.predicate=t,this.source=e,this.yieldIndex=r,this.thisArg=n}r.FindValueOperator=i;var u,c=(u=t.Subscriber,o(a,u),a.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete(),this.unsubscribe()},a.prototype._next=function(t){var e=this.predicate,r=this.thisArg,n=this.index++;try{e.call(r||this,t,n,this.source)&&this.notifyComplete(this.yieldIndex?n:t)}catch(t){this.destination.error(t)}},a.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},a);function a(t,e,r,n,o){t=u.call(this,t)||this;return t.predicate=e,t.source=r,t.yieldIndex=n,t.thisArg=o,t.index=0,t}r.FindValueSubscriber=c},{"../Subscriber":107}],172:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../operators/find");r.findIndex=function(e,r){return function(t){return t.lift(new n.FindValueOperator(e,t,!0,r))}}},{"../operators/find":171}],173:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("../util/EmptyError"),i=t("./filter"),s=t("./take"),u=t("./defaultIfEmpty"),c=t("./throwIfEmpty"),a=t("../util/identity");r.first=function(n,t){var e=2<=arguments.length;return function(r){return r.pipe(n?i.filter(function(t,e){return n(t,e,r)}):a.identity,s.take(1),e?u.defaultIfEmpty(t):c.throwIfEmpty(function(){return new o.EmptyError}))}}},{"../util/EmptyError":265,"../util/identity":272,"./defaultIfEmpty":156,"./filter":169,"./take":221,"./throwIfEmpty":228}],174:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber"),s=t("../Subscription"),u=t("../Observable"),c=t("../Subject");r.groupBy=function(e,r,n,o){return function(t){return t.lift(new a(e,r,n,o))}};var a=(l.prototype.call=function(t,e){return e.subscribe(new p(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},l);function l(t,e,r,n){this.keySelector=t,this.elementSelector=e,this.durationSelector=r,this.subjectSelector=n}var f,p=(f=i.Subscriber,o(h,f),h.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(t){return void this.error(t)}this._group(t,e)},h.prototype._group=function(t,e){var r,n=this.groups,o=(n=n||(this.groups=new Map)).get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(t){this.error(t)}else r=t;if(!o){o=this.subjectSelector?this.subjectSelector():new c.Subject,n.set(e,o);n=new v(e,o,this);if(this.destination.next(n),this.durationSelector){n=void 0;try{n=this.durationSelector(new v(e,o))}catch(t){return void this.error(t)}this.add(n.subscribe(new b(e,o,this)))}}o.closed||o.next(r)},h.prototype._error=function(r){var t=this.groups;t&&(t.forEach(function(t,e){t.error(r)}),t.clear()),this.destination.error(r)},h.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(t,e){t.complete()}),t.clear()),this.destination.complete()},h.prototype.removeGroup=function(t){this.groups.delete(t)},h.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&f.prototype.unsubscribe.call(this))},h);function h(t,e,r,n,o){t=f.call(this,t)||this;return t.keySelector=e,t.elementSelector=r,t.durationSelector=n,t.subjectSelector=o,t.groups=null,t.attemptedToUnsubscribe=!1,t.count=0,t}var d,b=(d=i.Subscriber,o(_,d),_.prototype._next=function(t){this.complete()},_.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},_);function _(t,e,r){var n=d.call(this,e)||this;return n.key=t,n.group=e,n.parent=r,n}var y,v=(y=u.Observable,o(m,y),m.prototype._subscribe=function(t){var e=new s.Subscription,r=this.refCountSubscription,n=this.groupSubject;return r&&!r.closed&&e.add(new O(r)),e.add(n.subscribe(t)),e},m);function m(t,e,r){var n=y.call(this)||this;return n.key=t,n.groupSubject=e,n.refCountSubscription=r,n}r.GroupedObservable=v;var g,O=(g=s.Subscription,o(w,g),w.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(g.prototype.unsubscribe.call(this),--t.count,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},w);function w(t){var e=g.call(this)||this;return(e.parent=t).count++,e}},{"../Observable":100,"../Subject":105,"../Subscriber":107,"../Subscription":108}],175:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});t=t("../Subscriber");r.ignoreElements=function(){return function(t){return t.lift(new i)}};var i=(s.prototype.call=function(t,e){return e.subscribe(new c(t))},s);function s(){}var u,c=(u=t.Subscriber,o(a,u),a.prototype._next=function(t){},a);function a(){return null!==u&&u.apply(this,arguments)||this}},{"../Subscriber":107}],176:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});t=t("../Subscriber");r.isEmpty=function(){return function(t){return t.lift(new i)}};var i=(s.prototype.call=function(t,e){return e.subscribe(new c(t))},s);function s(){}var u,c=(u=t.Subscriber,o(a,u),a.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},a.prototype._next=function(t){this.notifyComplete(!1)},a.prototype._complete=function(){this.notifyComplete(!0)},a);function a(t){return u.call(this,t)||this}},{"../Subscriber":107}],177:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("../util/EmptyError"),i=t("./filter"),s=t("./takeLast"),u=t("./throwIfEmpty"),c=t("./defaultIfEmpty"),a=t("../util/identity");r.last=function(n,t){var e=2<=arguments.length;return function(r){return r.pipe(n?i.filter(function(t,e){return n(t,e,r)}):a.identity,s.takeLast(1),e?c.defaultIfEmpty(t):u.throwIfEmpty(function(){return new o.EmptyError}))}}},{"../util/EmptyError":265,"../util/identity":272,"./defaultIfEmpty":156,"./filter":169,"./takeLast":222,"./throwIfEmpty":228}],178:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});t=t("../Subscriber");r.map=function(e,r){return function(t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return t.lift(new i(e,r))}};var i=(s.prototype.call=function(t,e){return e.subscribe(new c(t,this.project,this.thisArg))},s);function s(t,e){this.project=t,this.thisArg=e}r.MapOperator=i;var u,c=(u=t.Subscriber,o(a,u),a.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},a);function a(t,e,r){t=u.call(this,t)||this;return t.project=e,t.count=0,t.thisArg=r||t,t}},{"../Subscriber":107}],179:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});t=t("../Subscriber");r.mapTo=function(e){return function(t){return t.lift(new i(e))}};var i=(s.prototype.call=function(t,e){return e.subscribe(new c(t,this.value))},s);function s(t){this.value=t}var u,c=(u=t.Subscriber,o(a,u),a.prototype._next=function(t){this.destination.next(this.value)},a);function a(t,e){t=u.call(this,t)||this;return t.value=e,t}},{"../Subscriber":107}],180:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber"),s=t("../Notification");r.materialize=function(){return function(t){return t.lift(new u)}};var u=(c.prototype.call=function(t,e){return e.subscribe(new l(t))},c);function c(){}var a,l=(a=i.Subscriber,o(f,a),f.prototype._next=function(t){this.destination.next(s.Notification.createNext(t))},f.prototype._error=function(t){var e=this.destination;e.next(s.Notification.createError(t)),e.complete()},f.prototype._complete=function(){var t=this.destination;t.next(s.Notification.createComplete()),t.complete()},f);function f(t){return a.call(this,t)||this}},{"../Notification":99,"../Subscriber":107}],181:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./reduce");r.max=function(r){return n.reduce("function"==typeof r?function(t,e){return 0<r(t,e)?t:e}:function(t,e){return e<t?t:e})}},{"./reduce":199}],182:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../observable/merge");r.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(n.merge.apply(void 0,[t].concat(e)))}}},{"../observable/merge":127}],183:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./mergeMap"),o=t("../util/identity");r.mergeAll=function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),n.mergeMap(o.identity,t)}},{"../util/identity":272,"./mergeMap":184}],184:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("./map"),s=t("../observable/from"),u=t("../innerSubscribe");function c(e,o,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof o?function(t){return t.pipe(c(function(r,n){return s.from(e(r,n)).pipe(i.map(function(t,e){return o(r,t,n,e)}))},r))}:("number"==typeof o&&(r=o),function(t){return t.lift(new a(e,r))})}r.mergeMap=c;var a=(l.prototype.call=function(t,e){return e.subscribe(new p(t,this.project,this.concurrent))},l);function l(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}r.MergeMapOperator=a;var f,p=(f=u.SimpleOuterSubscriber,o(h,f),h.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},h.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e)},h.prototype._innerSub=function(t){var e=new u.SimpleInnerSubscriber(this),r=this.destination;r.add(e);t=u.innerSubscribe(t,e);t!==e&&r.add(t)},h.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},h.prototype.notifyNext=function(t){this.destination.next(t)},h.prototype.notifyComplete=function(){var t=this.buffer;this.active--,0<t.length?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},h);function h(t,e,r){void 0===r&&(r=Number.POSITIVE_INFINITY);t=f.call(this,t)||this;return t.project=e,t.concurrent=r,t.hasCompleted=!1,t.buffer=[],t.active=0,t.index=0,t}r.MergeMapSubscriber=p,r.flatMap=c},{"../innerSubscribe":110,"../observable/from":120,"./map":178}],185:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./mergeMap");r.mergeMapTo=function(t,e,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof e?n.mergeMap(function(){return t},e,r):n.mergeMap(function(){return t},r="number"==typeof e?e:r)}},{"./mergeMap":184}],186:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../innerSubscribe");r.mergeScan=function(e,r,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(t){return t.lift(new s(e,r,n))}};var s=(u.prototype.call=function(t,e){return e.subscribe(new a(t,this.accumulator,this.seed,this.concurrent))},u);function u(t,e,r){this.accumulator=t,this.seed=e,this.concurrent=r}r.MergeScanOperator=s;var c,a=(c=i.SimpleOuterSubscriber,o(l,c),l.prototype._next=function(t){if(this.active<this.concurrent){var e=this.index++,r=this.destination,n=void 0;try{n=(0,this.accumulator)(this.acc,t,e)}catch(t){return r.error(t)}this.active++,this._innerSub(n)}else this.buffer.push(t)},l.prototype._innerSub=function(t){var e=new i.SimpleInnerSubscriber(this),r=this.destination;r.add(e);t=i.innerSubscribe(t,e);t!==e&&r.add(t)},l.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()},l.prototype.notifyNext=function(t){var e=this.destination;this.acc=t,this.hasValue=!0,e.next(t)},l.prototype.notifyComplete=function(){var t=this.buffer;this.active--,0<t.length?this._next(t.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},l);function l(t,e,r,n){t=c.call(this,t)||this;return t.accumulator=e,t.acc=r,t.concurrent=n,t.hasValue=!1,t.hasCompleted=!1,t.buffer=[],t.active=0,t.index=0,t}r.MergeScanSubscriber=a},{"../innerSubscribe":110}],187:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./reduce");r.min=function(r){return n.reduce("function"==typeof r?function(t,e){return r(t,e)<0?t:e}:function(t,e){return t<e?t:e})}},{"./reduce":199}],188:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("../observable/ConnectableObservable");r.multicast=function(n,o){return function(t){var e="function"==typeof n?n:function(){return n};if("function"==typeof o)return t.lift(new s(e,o));var r=Object.create(t,i.connectableObservableDescriptor);return r.source=t,r.subjectFactory=e,r}};var s=(n.prototype.call=function(t,e){var r=this.selector,n=this.subjectFactory(),t=r(n).subscribe(t);return t.add(e.subscribe(n)),t},n);function n(t,e){this.subjectFactory=t,this.selector=e}r.MulticastOperator=s},{"../observable/ConnectableObservable":111}],189:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber"),s=t("../Notification");r.observeOn=function(e,r){return void 0===r&&(r=0),function(t){return t.lift(new u(e,r))}};var u=(c.prototype.call=function(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))},c);function c(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}r.ObserveOnOperator=u;var a,l=(a=i.Subscriber,o(f,a),f.dispatch=function(t){var e=t.notification,t=t.destination;e.observe(t),this.unsubscribe()},f.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(f.dispatch,this.delay,new p(t,this.destination)))},f.prototype._next=function(t){this.scheduleMessage(s.Notification.createNext(t))},f.prototype._error=function(t){this.scheduleMessage(s.Notification.createError(t)),this.unsubscribe()},f.prototype._complete=function(){this.scheduleMessage(s.Notification.createComplete()),this.unsubscribe()},f);function f(t,e,r){void 0===r&&(r=0);t=a.call(this,t)||this;return t.scheduler=e,t.delay=r,t}r.ObserveOnSubscriber=l;var p=function(t,e){this.notification=t,this.destination=e};r.ObserveOnMessage=p},{"../Notification":99,"../Subscriber":107}],190:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../observable/from"),s=t("../util/isArray"),u=t("../innerSubscribe");r.onErrorResumeNext=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length&&s.isArray(e[0])&&(e=e[0]),function(t){return t.lift(new c(e))}},r.onErrorResumeNextStatic=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=(t=1===t.length&&s.isArray(t[0])?t[0]:t).shift();return i.from(r).lift(new c(t))};var c=(a.prototype.call=function(t,e){return e.subscribe(new f(t,this.nextSources))},a);function a(t){this.nextSources=t}var l,f=(l=u.SimpleOuterSubscriber,o(p,l),p.prototype.notifyError=function(){this.subscribeToNextSource()},p.prototype.notifyComplete=function(){this.subscribeToNextSource()},p.prototype._error=function(t){this.subscribeToNextSource(),this.unsubscribe()},p.prototype._complete=function(){this.subscribeToNextSource(),this.unsubscribe()},p.prototype.subscribeToNextSource=function(){var t,e,r=this.nextSources.shift();r?(t=new u.SimpleInnerSubscriber(this),(e=this.destination).add(t),(r=u.innerSubscribe(r,t))!==t&&e.add(r)):this.destination.complete()},p);function p(t,e){var r=l.call(this,t)||this;return r.destination=t,r.nextSources=e,r}},{"../innerSubscribe":110,"../observable/from":120,"../util/isArray":273}],191:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});t=t("../Subscriber");r.pairwise=function(){return function(t){return t.lift(new i)}};var i=(s.prototype.call=function(t,e){return e.subscribe(new c(t))},s);function s(){}var u,c=(u=t.Subscriber,o(a,u),a.prototype._next=function(t){var e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)},a);function a(t){t=u.call(this,t)||this;return t.hasPrev=!1,t}},{"../Subscriber":107}],192:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../util/not"),o=t("./filter");r.partition=function(e,r){return function(t){return[o.filter(e,r)(t),o.filter(n.not(e,r))(t)]}}},{"../util/not":285,"./filter":169}],193:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./map");r.pluck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.length;if(0===r)throw new Error("list of properties cannot be empty.");return function(t){return n.map((o=e,i=r,function(t){for(var e=t,r=0;r<i;r++){var n=null!=e?e[o[r]]:void 0;if(void 0===n)return;e=n}return e}))(t);var o,i}}},{"./map":178}],194:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Subject"),o=t("./multicast");r.publish=function(t){return t?o.multicast(function(){return new n.Subject},t):o.multicast(new n.Subject)}},{"../Subject":105,"./multicast":188}],195:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../BehaviorSubject"),o=t("./multicast");r.publishBehavior=function(e){return function(t){return o.multicast(new n.BehaviorSubject(e))(t)}}},{"../BehaviorSubject":97,"./multicast":188}],196:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../AsyncSubject"),o=t("./multicast");r.publishLast=function(){return function(t){return o.multicast(new n.AsyncSubject)(t)}}},{"../AsyncSubject":96,"./multicast":188}],197:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=t("../ReplaySubject"),u=t("./multicast");r.publishReplay=function(t,e,r,n){var o="function"==typeof r?r:void 0,i=new s.ReplaySubject(t,e,n=r&&"function"!=typeof r?r:n);return function(t){return u.multicast(function(){return i},o)(t)}}},{"../ReplaySubject":103,"./multicast":188}],198:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../util/isArray"),o=t("../observable/race");r.race=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return 1===e.length&&n.isArray(e[0])&&(e=e[0]),t.lift.call(o.race.apply(void 0,[t].concat(e)))}}},{"../observable/race":133,"../util/isArray":273}],199:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("./scan"),i=t("./takeLast"),s=t("./defaultIfEmpty"),u=t("../util/pipe");r.reduce=function(n,e){return 2<=arguments.length?function(t){return u.pipe(o.scan(n,e),i.takeLast(1),s.defaultIfEmpty(e))(t)}:function(t){return u.pipe(o.scan(function(t,e,r){return n(t,e,r+1)}),i.takeLast(1))(t)}}},{"../util/pipe":286,"./defaultIfEmpty":156,"./scan":207,"./takeLast":222}],200:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});t=t("../Subscriber");r.refCount=function(){return function(t){return t.lift(new i(t))}};var i=(s.prototype.call=function(t,e){var r=this.connectable;r._refCount++;t=new c(t,r),e=e.subscribe(t);return t.closed||(t.connection=r.connect()),e},s);function s(t){this.connectable=t}var u,c=(u=t.Subscriber,o(a,u),a.prototype._unsubscribe=function(){var t,e=this.connectable;e?(this.connectable=null,(t=e._refCount)<=0?this.connection=null:(e._refCount=t-1,1<t?this.connection=null:(t=this.connection,e=e._connection,this.connection=null,!e||t&&e!==t||e.unsubscribe()))):this.connection=null},a);function a(t,e){t=u.call(this,t)||this;return t.connectable=e,t}},{"../Subscriber":107}],201:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber"),s=t("../observable/empty");r.repeat=function(e){return void 0===e&&(e=-1),function(t){return 0===e?s.empty():e<0?t.lift(new u(-1,t)):t.lift(new u(e-1,t))}};var u=(c.prototype.call=function(t,e){return e.subscribe(new l(t,this.count,this.source))},c);function c(t,e){this.count=t,this.source=e}var a,l=(a=i.Subscriber,o(f,a),f.prototype.complete=function(){if(!this.isStopped){var t=this.source,e=this.count;if(0===e)return a.prototype.complete.call(this);-1<e&&(this.count=e-1),t.subscribe(this._unsubscribeAndRecycle())}},f);function f(t,e,r){t=a.call(this,t)||this;return t.count=e,t.source=r,t}},{"../Subscriber":107,"../observable/empty":118}],202:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subject"),s=t("../innerSubscribe");r.repeatWhen=function(e){return function(t){return t.lift(new u(e))}};var u=(c.prototype.call=function(t,e){return e.subscribe(new l(t,this.notifier,e))},c);function c(t){this.notifier=t}var a,l=(a=s.SimpleOuterSubscriber,o(f,a),f.prototype.notifyNext=function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},f.prototype.notifyComplete=function(){if(!1===this.sourceIsBeingSubscribedTo)return a.prototype.complete.call(this)},f.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return a.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}},f.prototype._unsubscribe=function(){var t=this.notifications,e=this.retriesSubscription;t&&(t.unsubscribe(),this.notifications=void 0),e&&(e.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},f.prototype._unsubscribeAndRecycle=function(){var t=this._unsubscribe;return this._unsubscribe=null,a.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=t,this},f.prototype.subscribeToRetries=function(){this.notifications=new i.Subject;try{var t=(0,this.notifier)(this.notifications)}catch(t){return a.prototype.complete.call(this)}this.retries=t,this.retriesSubscription=s.innerSubscribe(t,new s.SimpleInnerSubscriber(this))},f);function f(t,e,r){t=a.call(this,t)||this;return t.notifier=e,t.source=r,t.sourceIsBeingSubscribedTo=!0,t}},{"../Subject":105,"../innerSubscribe":110}],203:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});t=t("../Subscriber");r.retry=function(e){return void 0===e&&(e=-1),function(t){return t.lift(new i(e,t))}};var i=(s.prototype.call=function(t,e){return e.subscribe(new c(t,this.count,this.source))},s);function s(t,e){this.count=t,this.source=e}var u,c=(u=t.Subscriber,o(a,u),a.prototype.error=function(t){if(!this.isStopped){var e=this.source,r=this.count;if(0===r)return u.prototype.error.call(this,t);-1<r&&(this.count=r-1),e.subscribe(this._unsubscribeAndRecycle())}},a);function a(t,e,r){t=u.call(this,t)||this;return t.count=e,t.source=r,t}},{"../Subscriber":107}],204:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subject"),s=t("../innerSubscribe");r.retryWhen=function(e){return function(t){return t.lift(new u(e,t))}};var u=(c.prototype.call=function(t,e){return e.subscribe(new l(t,this.notifier,this.source))},c);function c(t,e){this.notifier=t,this.source=e}var a,l=(a=s.SimpleOuterSubscriber,o(f,a),f.prototype.error=function(t){if(!this.isStopped){var e=this.errors,r=this.retries,n=this.retriesSubscription;if(r)this.errors=void 0,this.retriesSubscription=void 0;else{e=new i.Subject;try{r=(0,this.notifier)(e)}catch(t){return a.prototype.error.call(this,t)}n=s.innerSubscribe(r,new s.SimpleInnerSubscriber(this))}this._unsubscribeAndRecycle(),this.errors=e,this.retries=r,this.retriesSubscription=n,e.next(t)}},f.prototype._unsubscribe=function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=void 0),e&&(e.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},f.prototype.notifyNext=function(){var t=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=t,this.source.subscribe(this)},f);function f(t,e,r){t=a.call(this,t)||this;return t.notifier=e,t.source=r,t}},{"../Subject":105,"../innerSubscribe":110}],205:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../innerSubscribe");r.sample=function(e){return function(t){return t.lift(new s(e))}};var s=(u.prototype.call=function(t,e){t=new a(t),e=e.subscribe(t);return e.add(i.innerSubscribe(this.notifier,new i.SimpleInnerSubscriber(t))),e},u);function u(t){this.notifier=t}var c,a=(c=i.SimpleOuterSubscriber,o(l,c),l.prototype._next=function(t){this.value=t,this.hasValue=!0},l.prototype.notifyNext=function(){this.emitValue()},l.prototype.notifyComplete=function(){this.emitValue()},l.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},l);function l(){var t=null!==c&&c.apply(this,arguments)||this;return t.hasValue=!1,t}},{"../innerSubscribe":110}],206:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber"),s=t("../scheduler/async");r.sampleTime=function(e,r){return void 0===r&&(r=s.async),function(t){return t.lift(new u(e,r))}};var u=(c.prototype.call=function(t,e){return e.subscribe(new l(t,this.period,this.scheduler))},c);function c(t,e){this.period=t,this.scheduler=e}var a,l=(a=i.Subscriber,o(f,a),f.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},f.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},f);function f(t,e,r){t=a.call(this,t)||this;return t.period=e,t.scheduler=r,t.hasValue=!1,t.add(r.schedule(p,e,{subscriber:t,period:e})),t}function p(t){var e=t.subscriber,r=t.period;e.notifyNext(),this.schedule(t,r)}},{"../Subscriber":107,"../scheduler/async":259}],207:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});t=t("../Subscriber");r.scan=function(e,r){var n=2<=arguments.length?!0:!1;return function(t){return t.lift(new i(e,r,n))}};var i=(s.prototype.call=function(t,e){return e.subscribe(new c(t,this.accumulator,this.seed,this.hasSeed))},s);function s(t,e,r){void 0===r&&(r=!1),this.accumulator=t,this.seed=e,this.hasSeed=r}var u,c=(u=t.Subscriber,o(a,u),Object.defineProperty(a.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),a.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},a.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.accumulator(this.seed,t,r)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},a);function a(t,e,r,n){t=u.call(this,t)||this;return t.accumulator=e,t._seed=r,t.hasSeed=n,t.index=0,t}},{"../Subscriber":107}],208:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});t=t("../Subscriber");r.sequenceEqual=function(e,r){return function(t){return t.lift(new i(e,r))}};var i=(s.prototype.call=function(t,e){return e.subscribe(new c(t,this.compareTo,this.comparator))},s);function s(t,e){this.compareTo=t,this.comparator=e}r.SequenceEqualOperator=i;var u,c=(u=t.Subscriber,o(a,u),a.prototype._next=function(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())},a.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()},a.prototype.checkValues=function(){for(var t=this._a,e=this._b,r=this.comparator;0<t.length&&0<e.length;){var n=t.shift(),o=e.shift(),i=!1;try{i=r?r(n,o):n===o}catch(t){this.destination.error(t)}i||this.emit(!1)}},a.prototype.emit=function(t){var e=this.destination;e.next(t),e.complete()},a.prototype.nextB=function(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())},a.prototype.completeB=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},a);function a(t,e,r){var n=u.call(this,t)||this;return n.compareTo=e,n.comparator=r,n._a=[],n._b=[],n._oneComplete=!1,n.destination.add(e.subscribe(new f(t,n))),n}r.SequenceEqualSubscriber=c;var l,f=(l=t.Subscriber,o(p,l),p.prototype._next=function(t){this.parent.nextB(t)},p.prototype._error=function(t){this.parent.error(t),this.unsubscribe()},p.prototype._complete=function(){this.parent.completeB(),this.unsubscribe()},p);function p(t,e){t=l.call(this,t)||this;return t.parent=e,t}},{"../Subscriber":107}],209:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./multicast"),o=t("./refCount"),i=t("../Subject");function s(){return new i.Subject}r.share=function(){return function(t){return o.refCount()(n.multicast(s)(t))}}},{"../Subject":105,"./multicast":188,"./refCount":200}],210:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var p=t("../ReplaySubject");r.shareReplay=function(t,e,r){var f=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:r};return function(t){return t.lift((t=(e=f).bufferSize,o=void 0===t?Number.POSITIVE_INFINITY:t,t=e.windowTime,i=void 0===t?Number.POSITIVE_INFINITY:t,s=e.refCount,u=e.scheduler,c=0,l=a=!1,function(t){var e;c++,!r||a?(a=!1,r=new p.ReplaySubject(o,i,u),e=r.subscribe(this),n=t.subscribe({next:function(t){r.next(t)},error:function(t){a=!0,r.error(t)},complete:function(){l=!0,n=void 0,r.complete()}}),l&&(n=void 0)):e=r.subscribe(this),this.add(function(){c--,e.unsubscribe(),e=void 0,n&&!l&&s&&0===c&&(n.unsubscribe(),r=n=void 0)})}));var e,r,n,o,i,s,u,c,a,l}}},{"../ReplaySubject":103}],211:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber"),s=t("../util/EmptyError");r.single=function(e){return function(t){return t.lift(new u(e,t))}};var u=(c.prototype.call=function(t,e){return e.subscribe(new l(t,this.predicate,this.source))},c);function c(t,e){this.predicate=t,this.source=e}var a,l=(a=i.Subscriber,o(f,a),f.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},f.prototype._next=function(t){var e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)},f.prototype.tryNext=function(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(t){this.destination.error(t)}},f.prototype._complete=function(){var t=this.destination;0<this.index?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new s.EmptyError)},f);function f(t,e,r){t=a.call(this,t)||this;return t.predicate=e,t.source=r,t.seenValue=!1,t.index=0,t}},{"../Subscriber":107,"../util/EmptyError":265}],212:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});t=t("../Subscriber");r.skip=function(e){return function(t){return t.lift(new i(e))}};var i=(s.prototype.call=function(t,e){return e.subscribe(new c(t,this.total))},s);function s(t){this.total=t}var u,c=(u=t.Subscriber,o(a,u),a.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},a);function a(t,e){t=u.call(this,t)||this;return t.total=e,t.count=0,t}},{"../Subscriber":107}],213:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber"),s=t("../util/ArgumentOutOfRangeError");r.skipLast=function(e){return function(t){return t.lift(new u(e))}};var u=(c.prototype.call=function(t,e){return 0===this._skipCount?e.subscribe(new i.Subscriber(t)):e.subscribe(new l(t,this._skipCount))},c);function c(t){if(this._skipCount=t,this._skipCount<0)throw new s.ArgumentOutOfRangeError}var a,l=(a=i.Subscriber,o(f,a),f.prototype._next=function(t){var e,r=this._skipCount,n=this._count++;n<r?this._ring[n]=t:(r=(e=this._ring)[n=n%r],e[n]=t,this.destination.next(r))},f);function f(t,e){t=a.call(this,t)||this;return t._skipCount=e,t._count=0,t._ring=new Array(e),t}},{"../Subscriber":107,"../util/ArgumentOutOfRangeError":264}],214:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../innerSubscribe");r.skipUntil=function(e){return function(t){return t.lift(new s(e))}};var s=(u.prototype.call=function(t,e){return e.subscribe(new a(t,this.notifier))},u);function u(t){this.notifier=t}var c,a=(c=i.SimpleOuterSubscriber,o(l,c),l.prototype._next=function(t){this.hasValue&&c.prototype._next.call(this,t)},l.prototype.notifyNext=function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},l.prototype.notifyComplete=function(){},l);function l(t,e){var r=c.call(this,t)||this;r.hasValue=!1;t=new i.SimpleInnerSubscriber(r);r.add(t),r.innerSubscription=t;e=i.innerSubscribe(e,t);return e!==t&&(r.add(e),r.innerSubscription=e),r}},{"../innerSubscribe":110}],215:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});t=t("../Subscriber");r.skipWhile=function(e){return function(t){return t.lift(new i(e))}};var i=(s.prototype.call=function(t,e){return e.subscribe(new c(t,this.predicate))},s);function s(t){this.predicate=t}var u,c=(u=t.Subscriber,o(a,u),a.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},a.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(t){this.destination.error(t)}},a);function a(t,e){t=u.call(this,t)||this;return t.predicate=e,t.skipping=!0,t.index=0,t}},{"../Subscriber":107}],216:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../observable/concat"),o=t("../util/isScheduler");r.startWith=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[e.length-1];return o.isScheduler(r)?(e.pop(),function(t){return n.concat(e,t,r)}):function(t){return n.concat(e,t)}}},{"../observable/concat":116,"../util/isScheduler":283}],217:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../observable/SubscribeOnObservable");r.subscribeOn=function(e,r){return void 0===r&&(r=0),function(t){return t.lift(new o(e,r))}};var o=(i.prototype.call=function(t,e){return new n.SubscribeOnObservable(e,this.delay,this.scheduler).subscribe(t)},i);function i(t,e){this.scheduler=t,this.delay=e}},{"../observable/SubscribeOnObservable":112}],218:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./switchMap"),o=t("../util/identity");r.switchAll=function(){return n.switchMap(o.identity)}},{"../util/identity":272,"./switchMap":219}],219:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var s=t("./map"),u=t("../observable/from"),i=t("../innerSubscribe");r.switchMap=function e(o,i){return"function"==typeof i?function(t){return t.pipe(e(function(r,n){return u.from(o(r,n)).pipe(s.map(function(t,e){return i(r,t,n,e)}))}))}:function(t){return t.lift(new c(o))}};var c=(a.prototype.call=function(t,e){return e.subscribe(new f(t,this.project))},a);function a(t){this.project=t}var l,f=(l=i.SimpleOuterSubscriber,o(p,l),p.prototype._next=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this._innerSub(e)},p.prototype._innerSub=function(t){var e=this.innerSubscription;e&&e.unsubscribe();var r=new i.SimpleInnerSubscriber(this),e=this.destination;e.add(r),this.innerSubscription=i.innerSubscribe(t,r),this.innerSubscription!==r&&e.add(this.innerSubscription)},p.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||l.prototype._complete.call(this),this.unsubscribe()},p.prototype._unsubscribe=function(){this.innerSubscription=void 0},p.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&l.prototype._complete.call(this)},p.prototype.notifyNext=function(t){this.destination.next(t)},p);function p(t,e){t=l.call(this,t)||this;return t.project=e,t.index=0,t}},{"../innerSubscribe":110,"../observable/from":120,"./map":178}],220:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./switchMap");r.switchMapTo=function(t,e){return e?n.switchMap(function(){return t},e):n.switchMap(function(){return t})}},{"./switchMap":219}],221:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber"),s=t("../util/ArgumentOutOfRangeError"),u=t("../observable/empty");r.take=function(e){return function(t){return 0===e?u.empty():t.lift(new c(e))}};var c=(a.prototype.call=function(t,e){return e.subscribe(new f(t,this.total))},a);function a(t){if(this.total=t,this.total<0)throw new s.ArgumentOutOfRangeError}var l,f=(l=i.Subscriber,o(p,l),p.prototype._next=function(t){var e=this.total,r=++this.count;r<=e&&(this.destination.next(t),r===e&&(this.destination.complete(),this.unsubscribe()))},p);function p(t,e){t=l.call(this,t)||this;return t.total=e,t.count=0,t}},{"../Subscriber":107,"../observable/empty":118,"../util/ArgumentOutOfRangeError":264}],222:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber"),s=t("../util/ArgumentOutOfRangeError"),u=t("../observable/empty");r.takeLast=function(e){return function(t){return 0===e?u.empty():t.lift(new c(e))}};var c=(a.prototype.call=function(t,e){return e.subscribe(new f(t,this.total))},a);function a(t){if(this.total=t,this.total<0)throw new s.ArgumentOutOfRangeError}var l,f=(l=i.Subscriber,o(p,l),p.prototype._next=function(t){var e=this.ring,r=this.total,n=this.count++;e.length<r?e.push(t):e[n%r]=t},p.prototype._complete=function(){var t=this.destination,e=this.count;if(0<e)for(var r=this.count>=this.total?this.total:this.count,n=this.ring,o=0;o<r;o++){var i=e++%r;t.next(n[i])}t.complete()},p);function p(t,e){t=l.call(this,t)||this;return t.total=e,t.ring=new Array,t.count=0,t}},{"../Subscriber":107,"../observable/empty":118,"../util/ArgumentOutOfRangeError":264}],223:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../innerSubscribe");r.takeUntil=function(e){return function(t){return t.lift(new s(e))}};var s=(u.prototype.call=function(t,e){var r=new a(t),t=i.innerSubscribe(this.notifier,new i.SimpleInnerSubscriber(r));return t&&!r.seenValue?(r.add(t),e.subscribe(r)):r},u);function u(t){this.notifier=t}var c,a=(c=i.SimpleOuterSubscriber,o(l,c),l.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},l.prototype.notifyComplete=function(){},l);function l(t){t=c.call(this,t)||this;return t.seenValue=!1,t}},{"../innerSubscribe":110}],224:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});t=t("../Subscriber");r.takeWhile=function(e,r){return void 0===r&&(r=!1),function(t){return t.lift(new i(e,r))}};var i=(s.prototype.call=function(t,e){return e.subscribe(new c(t,this.predicate,this.inclusive))},s);function s(t,e){this.predicate=t,this.inclusive=e}var u,c=(u=t.Subscriber,o(a,u),a.prototype._next=function(t){var e,r=this.destination;try{e=this.predicate(t,this.index++)}catch(t){return void r.error(t)}this.nextOrComplete(t,e)},a.prototype.nextOrComplete=function(t,e){var r=this.destination;Boolean(e)?r.next(t):(this.inclusive&&r.next(t),r.complete())},a);function a(t,e,r){t=u.call(this,t)||this;return t.predicate=e,t.inclusive=r,t.index=0,t}},{"../Subscriber":107}],225:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber"),s=t("../util/noop"),u=t("../util/isFunction");r.tap=function(e,r,n){return function(t){return t.lift(new c(e,r,n))}};var c=(a.prototype.call=function(t,e){return e.subscribe(new f(t,this.nextOrObserver,this.error,this.complete))},a);function a(t,e,r){this.nextOrObserver=t,this.error=e,this.complete=r}var l,f=(l=i.Subscriber,o(p,l),p.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},p.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},p.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},p);function p(t,e,r,n){t=l.call(this,t)||this;return t._tapNext=s.noop,t._tapError=s.noop,t._tapComplete=s.noop,t._tapError=r||s.noop,t._tapComplete=n||s.noop,u.isFunction(e)?(t._context=t)._tapNext=e:e&&(t._context=e,t._tapNext=e.next||s.noop,t._tapError=e.error||s.noop,t._tapComplete=e.complete||s.noop),t}},{"../Subscriber":107,"../util/isFunction":276,"../util/noop":284}],226:[function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(n,"__esModule",{value:!0});var i=t("../innerSubscribe");n.defaultThrottleConfig={leading:!0,trailing:!1},n.throttle=function(e,r){return void 0===r&&(r=n.defaultThrottleConfig),function(t){return t.lift(new s(e,!!r.leading,!!r.trailing))}};var s=(u.prototype.call=function(t,e){return e.subscribe(new a(t,this.durationSelector,this.leading,this.trailing))},u);function u(t,e,r){this.durationSelector=t,this.leading=e,this.trailing=r}var c,a=(c=i.SimpleOuterSubscriber,r(l,c),l.prototype._next=function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))},l.prototype.send=function(){var t=this._hasValue,e=this._sendValue;t&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=void 0},l.prototype.throttle=function(t){t=this.tryDurationSelector(t);t&&this.add(this._throttled=i.innerSubscribe(t,new i.SimpleInnerSubscriber(this)))},l.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(t){return this.destination.error(t),null}},l.prototype.throttlingDone=function(){var t=this._throttled,e=this._trailing;t&&t.unsubscribe(),this._throttled=void 0,e&&this.send()},l.prototype.notifyNext=function(){this.throttlingDone()},l.prototype.notifyComplete=function(){this.throttlingDone()},l);function l(t,e,r,n){var o=c.call(this,t)||this;return o.destination=t,o.durationSelector=e,o._leading=r,o._trailing=n,o._hasValue=!1,o}},{"../innerSubscribe":110}],227:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber"),s=t("../scheduler/async"),u=t("./throttle");r.throttleTime=function(e,r,n){return void 0===r&&(r=s.async),void 0===n&&(n=u.defaultThrottleConfig),function(t){return t.lift(new c(e,r,n.leading,n.trailing))}};var c=(a.prototype.call=function(t,e){return e.subscribe(new f(t,this.duration,this.scheduler,this.leading,this.trailing))},a);function a(t,e,r,n){this.duration=t,this.scheduler=e,this.leading=r,this.trailing=n}var l,f=(l=i.Subscriber,o(p,l),p.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(h,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))},p.prototype._complete=function(){this._hasTrailingValue&&this.destination.next(this._trailingValue),this.destination.complete()},p.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},p);function p(t,e,r,n,o){t=l.call(this,t)||this;return t.duration=e,t.scheduler=r,t.leading=n,t.trailing=o,t._hasTrailingValue=!1,t._trailingValue=null,t}function h(t){t.subscriber.clearThrottle()}},{"../Subscriber":107,"../scheduler/async":259,"./throttle":226}],228:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../util/EmptyError"),t=t("../Subscriber");r.throwIfEmpty=function(e){return void 0===e&&(e=f),function(t){return t.lift(new s(e))}};var s=(u.prototype.call=function(t,e){return e.subscribe(new a(t,this.errorFactory))},u);function u(t){this.errorFactory=t}var c,a=(c=t.Subscriber,o(l,c),l.prototype._next=function(t){this.hasValue=!0,this.destination.next(t)},l.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)},l);function l(t,e){t=c.call(this,t)||this;return t.errorFactory=e,t.hasValue=!1,t}function f(){return new i.EmptyError}},{"../Subscriber":107,"../util/EmptyError":265}],229:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../scheduler/async"),o=t("./scan"),i=t("../observable/defer"),s=t("./map");r.timeInterval=function(r){return void 0===r&&(r=n.async),function(t){return i.defer(function(){return t.pipe(o.scan(function(t,e){t=t.current;return{value:e,current:r.now(),last:t}},{current:r.now(),value:void 0,last:void 0}),s.map(function(t){var e=t.current,r=t.last,t=t.value;return new u(t,e-r)}))})}};var u=function(t,e){this.value=t,this.interval=e};r.TimeInterval=u},{"../observable/defer":117,"../scheduler/async":259,"./map":178,"./scan":207}],230:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../scheduler/async"),o=t("../util/TimeoutError"),i=t("./timeoutWith"),s=t("../observable/throwError");r.timeout=function(t,e){return void 0===e&&(e=n.async),i.timeoutWith(t,s.throwError(new o.TimeoutError),e)}},{"../observable/throwError":135,"../scheduler/async":259,"../util/TimeoutError":268,"./timeoutWith":231}],231:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var s=t("../scheduler/async"),u=t("../util/isDate"),i=t("../innerSubscribe");r.timeoutWith=function(n,o,i){return void 0===i&&(i=s.async),function(t){var e=u.isDate(n),r=e?+n-i.now():Math.abs(n);return t.lift(new c(r,e,o,i))}};var c=(a.prototype.call=function(t,e){return e.subscribe(new f(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},a);function a(t,e,r,n){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=r,this.scheduler=n}var l,f=(l=i.SimpleOuterSubscriber,o(p,l),p.dispatchTimeout=function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(i.innerSubscribe(e,new i.SimpleInnerSubscriber(t)))},p.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(p.dispatchTimeout,this.waitFor,this))},p.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),l.prototype._next.call(this,t)},p.prototype._unsubscribe=function(){this.action=void 0,this.scheduler=null,this.withObservable=null},p);function p(t,e,r,n,o){t=l.call(this,t)||this;return t.absoluteTimeout=e,t.waitFor=r,t.withObservable=n,t.scheduler=o,t.scheduleTimeout(),t}},{"../innerSubscribe":110,"../scheduler/async":259,"../util/isDate":275}],232:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../scheduler/async"),o=t("./map");r.timestamp=function(e){return void 0===e&&(e=n.async),o.map(function(t){return new i(t,e.now())})};var i=function(t,e){this.value=t,this.timestamp=e};r.Timestamp=i},{"../scheduler/async":259,"./map":178}],233:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./reduce");function o(t,e,r){return 0===r?[e]:(t.push(e),t)}r.toArray=function(){return n.reduce(o,[])}},{"./reduce":199}],234:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subject"),s=t("../innerSubscribe");r.window=function(e){return function(t){return t.lift(new u(e))}};var u=(c.prototype.call=function(t,e){t=new l(t),e=e.subscribe(t);return e.closed||t.add(s.innerSubscribe(this.windowBoundaries,new s.SimpleInnerSubscriber(t))),e},c);function c(t){this.windowBoundaries=t}var a,l=(a=s.SimpleOuterSubscriber,o(f,a),f.prototype.notifyNext=function(){this.openWindow()},f.prototype.notifyError=function(t){this._error(t)},f.prototype.notifyComplete=function(){this._complete()},f.prototype._next=function(t){this.window.next(t)},f.prototype._error=function(t){this.window.error(t),this.destination.error(t)},f.prototype._complete=function(){this.window.complete(),this.destination.complete()},f.prototype._unsubscribe=function(){this.window=null},f.prototype.openWindow=function(){var t=this.window;t&&t.complete();var e=this.destination,t=this.window=new i.Subject;e.next(t)},f);function f(t){var e=a.call(this,t)||this;return e.window=new i.Subject,t.next(e.window),e}},{"../Subject":105,"../innerSubscribe":110}],235:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subscriber"),u=t("../Subject");r.windowCount=function(e,r){return void 0===r&&(r=0),function(t){return t.lift(new s(e,r))}};var s=(c.prototype.call=function(t,e){return e.subscribe(new l(t,this.windowSize,this.startWindowEvery))},c);function c(t,e){this.windowSize=t,this.startWindowEvery=e}var a,l=(a=i.Subscriber,o(f,a),f.prototype._next=function(t){for(var e=0<this.startWindowEvery?this.startWindowEvery:this.windowSize,r=this.destination,n=this.windowSize,o=this.windows,i=o.length,s=0;s<i&&!this.closed;s++)o[s].next(t);n=this.count-n+1;0<=n&&n%e==0&&!this.closed&&o.shift().complete(),++this.count%e!=0||this.closed||(e=new u.Subject,o.push(e),r.next(e))},f.prototype._error=function(t){var e=this.windows;if(e)for(;0<e.length&&!this.closed;)e.shift().error(t);this.destination.error(t)},f.prototype._complete=function(){var t=this.windows;if(t)for(;0<t.length&&!this.closed;)t.shift().complete();this.destination.complete()},f.prototype._unsubscribe=function(){this.count=0,this.windows=null},f);function f(t,e,r){var n=a.call(this,t)||this;return n.destination=t,n.windowSize=e,n.startWindowEvery=r,n.windows=[new u.Subject],n.count=0,t.next(n.windows[0]),n}},{"../Subject":105,"../Subscriber":107}],236:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subject"),s=t("../scheduler/async"),u=t("../Subscriber"),c=t("../util/isNumeric"),a=t("../util/isScheduler");r.windowTime=function(e){var r=s.async,n=null,o=Number.POSITIVE_INFINITY;return a.isScheduler(arguments[3])&&(r=arguments[3]),a.isScheduler(arguments[2])?r=arguments[2]:c.isNumeric(arguments[2])&&(o=Number(arguments[2])),a.isScheduler(arguments[1])?r=arguments[1]:c.isNumeric(arguments[1])&&(n=Number(arguments[1])),function(t){return t.lift(new l(e,n,o,r))}};var l=(f.prototype.call=function(t,e){return e.subscribe(new _(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},f);function f(t,e,r,n){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=r,this.scheduler=n}var p,h=(p=i.Subject,o(d,p),d.prototype.next=function(t){this._numberOfNextedValues++,p.prototype.next.call(this,t)},Object.defineProperty(d.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),d);function d(){var t=null!==p&&p.apply(this,arguments)||this;return t._numberOfNextedValues=0,t}var b,_=(b=u.Subscriber,o(y,b),y.prototype._next=function(t){for(var e=this.windows,r=e.length,n=0;n<r;n++){var o=e[n];o.closed||(o.next(t),o.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(o))}},y.prototype._error=function(t){for(var e=this.windows;0<e.length;)e.shift().error(t);this.destination.error(t)},y.prototype._complete=function(){for(var t=this.windows;0<t.length;){var e=t.shift();e.closed||e.complete()}this.destination.complete()},y.prototype.openWindow=function(){var t=new h;return this.windows.push(t),this.destination.next(t),t},y.prototype.closeWindow=function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)},y);function y(t,e,r,n,o){var i=b.call(this,t)||this;i.destination=t,i.windowTimeSpan=e,i.windowCreationInterval=r,i.maxWindowSize=n,i.scheduler=o,i.windows=[];t=i.openWindow();return null!==r&&0<=r?(n={windowTimeSpan:e,windowCreationInterval:r,subscriber:i,scheduler:o},i.add(o.schedule(g,e,{subscriber:i,window:t,context:null})),i.add(o.schedule(m,r,n))):i.add(o.schedule(v,e,{subscriber:i,window:t,windowTimeSpan:e})),i}function v(t){var e=t.subscriber,r=t.windowTimeSpan,n=t.window;n&&e.closeWindow(n),t.window=e.openWindow(),this.schedule(t,r)}function m(t){var e=t.windowTimeSpan,r=t.subscriber,n=t.scheduler,o=t.windowCreationInterval,i=r.openWindow(),s={action:this,subscription:null};s.subscription=n.schedule(g,e,{subscriber:r,window:i,context:s}),this.add(s.subscription),this.schedule(t,o)}function g(t){var e=t.subscriber,r=t.window,t=t.context;t&&t.action&&t.subscription&&t.action.remove(t.subscription),e.closeWindow(r)}},{"../Subject":105,"../Subscriber":107,"../scheduler/async":259,"../util/isNumeric":279,"../util/isScheduler":283}],237:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var c=t("../Subject"),a=t("../Subscription"),i=t("../OuterSubscriber"),l=t("../util/subscribeToResult");r.windowToggle=function(e,r){return function(t){return t.lift(new s(e,r))}};var s=(u.prototype.call=function(t,e){return e.subscribe(new p(t,this.openings,this.closingSelector))},u);function u(t,e){this.openings=t,this.closingSelector=e}var f,p=(f=i.OuterSubscriber,o(h,f),h.prototype._next=function(t){var e=this.contexts;if(e)for(var r=e.length,n=0;n<r;n++)e[n].window.next(t)},h.prototype._error=function(t){var e=this.contexts;if(this.contexts=null,e)for(var r=e.length,n=-1;++n<r;){var o=e[n];o.window.error(t),o.subscription.unsubscribe()}f.prototype._error.call(this,t)},h.prototype._complete=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,r=-1;++r<e;){var n=t[r];n.window.complete(),n.subscription.unsubscribe()}f.prototype._complete.call(this)},h.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,r=-1;++r<e;){var n=t[r];n.window.unsubscribe(),n.subscription.unsubscribe()}},h.prototype.notifyNext=function(t,e,r,n,o){if(t===this.openings){var i=void 0;try{i=(0,this.closingSelector)(e)}catch(t){return this.error(t)}var s=new c.Subject,u=new a.Subscription,e={window:s,subscription:u};this.contexts.push(e);i=l.subscribeToResult(this,i,e);i.closed?this.closeWindow(this.contexts.length-1):(i.context=e,u.add(i)),this.destination.next(s)}else this.closeWindow(this.contexts.indexOf(t))},h.prototype.notifyError=function(t){this.error(t)},h.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},h.prototype.closeWindow=function(t){var e,r,n;-1!==t&&(r=(n=(e=this.contexts)[t]).window,n=n.subscription,e.splice(t,1),r.complete(),n.unsubscribe())},h);function h(t,e,r){t=f.call(this,t)||this;return t.openings=e,t.closingSelector=r,t.contexts=[],t.add(t.openSubscription=l.subscribeToResult(t,e,e)),t}},{"../OuterSubscriber":102,"../Subject":105,"../Subscription":108,"../util/subscribeToResult":292}],238:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Subject"),s=t("../OuterSubscriber"),u=t("../util/subscribeToResult");r.windowWhen=function(e){return function(t){return t.lift(new c(e))}};var c=(a.prototype.call=function(t,e){return e.subscribe(new f(t,this.closingSelector))},a);function a(t){this.closingSelector=t}var l,f=(l=s.OuterSubscriber,o(p,l),p.prototype.notifyNext=function(t,e,r,n,o){this.openWindow(o)},p.prototype.notifyError=function(t){this._error(t)},p.prototype.notifyComplete=function(t){this.openWindow(t)},p.prototype._next=function(t){this.window.next(t)},p.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},p.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},p.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},p.prototype.openWindow=function(t){(t=void 0===t?null:t)&&(this.remove(t),t.unsubscribe());t=this.window;t&&t.complete();t=this.window=new i.Subject;this.destination.next(t);try{var e=(0,this.closingSelector)()}catch(t){return this.destination.error(t),void this.window.error(t)}this.add(this.closingNotification=u.subscribeToResult(this,e))},p);function p(t,e){var r=l.call(this,t)||this;return r.destination=t,r.closingSelector=e,r.openWindow(),r}},{"../OuterSubscriber":102,"../Subject":105,"../util/subscribeToResult":292}],239:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=t("../OuterSubscriber"),u=t("../util/subscribeToResult");r.withLatestFrom=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return function(t){var e;"function"==typeof r[r.length-1]&&(e=r.pop());return t.lift(new s(r,e))}};var s=(c.prototype.call=function(t,e){return e.subscribe(new l(t,this.observables,this.project))},c);function c(t,e){this.observables=t,this.project=e}var a,l=(a=i.OuterSubscriber,o(f,a),f.prototype.notifyNext=function(t,e,r){this.values[r]=e;e=this.toRespond;0<e.length&&(-1!==(r=e.indexOf(r))&&e.splice(r,1))},f.prototype.notifyComplete=function(){},f.prototype._next=function(t){0===this.toRespond.length&&(t=[t].concat(this.values),this.project?this._tryProject(t):this.destination.next(t))},f.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},f);function f(t,e,r){var n=a.call(this,t)||this;n.observables=e,n.project=r,n.toRespond=[];var o=e.length;n.values=new Array(o);for(var i=0;i<o;i++)n.toRespond.push(i);for(i=0;i<o;i++){var s=e[i];n.add(u.subscribeToResult(n,s,void 0,i))}return n}},{"../OuterSubscriber":102,"../util/subscribeToResult":292}],240:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../observable/zip");r.zip=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return t.lift.call(n.zip.apply(void 0,[t].concat(e)))}}},{"../observable/zip":138}],241:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../observable/zip");r.zipAll=function(e){return function(t){return t.lift(new n.ZipOperator(e))}}},{"../observable/zip":138}],242:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Observable"),s=t("../Subscription");r.scheduleArray=function(n,o){return new i.Observable(function(t){var e=new s.Subscription,r=0;return e.add(o.schedule(function(){r!==n.length?(t.next(n[r++]),t.closed||e.add(this.schedule())):t.complete()})),e})}},{"../Observable":100,"../Subscription":108}],243:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Observable"),i=t("../Subscription"),s=t("../symbol/iterator");r.scheduleIterable=function(e,r){if(!e)throw new Error("Iterable cannot be null");return new n.Observable(function(n){var o,t=new i.Subscription;return t.add(function(){o&&"function"==typeof o.return&&o.return()}),t.add(r.schedule(function(){o=e[s.iterator](),t.add(r.schedule(function(){if(!n.closed){try{var t=o.next(),e=t.value,r=t.done}catch(t){return void n.error(t)}r?n.complete():(n.next(e),this.schedule())}}))})),t})}},{"../Observable":100,"../Subscription":108,"../symbol/iterator":261}],244:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("../Observable"),s=t("../Subscription"),u=t("../symbol/observable");r.scheduleObservable=function(n,o){return new i.Observable(function(e){var r=new s.Subscription;return r.add(o.schedule(function(){var t=n[u.observable]();r.add(t.subscribe({next:function(t){r.add(o.schedule(function(){return e.next(t)}))},error:function(t){r.add(o.schedule(function(){return e.error(t)}))},complete:function(){r.add(o.schedule(function(){return e.complete()}))}}))})),r})}},{"../Observable":100,"../Subscription":108,"../symbol/observable":262}],245:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Observable"),i=t("../Subscription");r.schedulePromise=function(t,n){return new o.Observable(function(e){var r=new i.Subscription;return r.add(n.schedule(function(){return t.then(function(t){r.add(n.schedule(function(){e.next(t),r.add(n.schedule(function(){return e.complete()}))}))},function(t){r.add(n.schedule(function(){return e.error(t)}))})})),r})}},{"../Observable":100,"../Subscription":108}],246:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./scheduleObservable"),o=t("./schedulePromise"),i=t("./scheduleArray"),s=t("./scheduleIterable"),u=t("../util/isInteropObservable"),c=t("../util/isPromise"),a=t("../util/isArrayLike"),l=t("../util/isIterable");r.scheduled=function(t,e){if(null!=t){if(u.isInteropObservable(t))return n.scheduleObservable(t,e);if(c.isPromise(t))return o.schedulePromise(t,e);if(a.isArrayLike(t))return i.scheduleArray(t,e);if(l.isIterable(t)||"string"==typeof t)return s.scheduleIterable(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}},{"../util/isArrayLike":274,"../util/isInteropObservable":277,"../util/isIterable":278,"../util/isPromise":282,"./scheduleArray":242,"./scheduleIterable":243,"./scheduleObservable":244,"./schedulePromise":245}],247:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,t=t("../Subscription"),o=(i=t.Subscription,o(s,i),s.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},s);function s(t,e){return i.call(this)||this}r.Action=o},{"../Subscription":108}],248:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,t=t("./AsyncAction"),o=(i=t.AsyncAction,o(s,i),s.prototype.requestAsyncId=function(t,e,r){return null!==(r=void 0===r?0:r)&&0<r?i.prototype.requestAsyncId.call(this,t,e,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(function(){return t.flush(null)})))},s.prototype.recycleAsyncId=function(t,e,r){if(null!==(r=void 0===r?0:r)&&0<r||null===r&&0<this.delay)return i.prototype.recycleAsyncId.call(this,t,e,r);0===t.actions.length&&(cancelAnimationFrame(e),t.scheduled=void 0)},s);function s(t,e){var r=i.call(this,t,e)||this;return r.scheduler=t,r.work=e,r}r.AnimationFrameAction=o},{"./AsyncAction":252}],249:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,t=t("./AsyncScheduler"),o=(i=t.AsyncScheduler,o(s,i),s.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,r=this.actions,n=-1,o=r.length;t=t||r.shift();do{if(e=t.execute(t.state,t.delay))break}while(++n<o&&(t=r.shift()));if(this.active=!1,e){for(;++n<o&&(t=r.shift());)t.unsubscribe();throw e}},s);function s(){return null!==i&&i.apply(this,arguments)||this}r.AnimationFrameScheduler=o},{"./AsyncScheduler":253}],250:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,s=t("../util/Immediate"),t=t("./AsyncAction"),o=(i=t.AsyncAction,o(u,i),u.prototype.requestAsyncId=function(t,e,r){return null!==(r=void 0===r?0:r)&&0<r?i.prototype.requestAsyncId.call(this,t,e,r):(t.actions.push(this),t.scheduled||(t.scheduled=s.Immediate.setImmediate(t.flush.bind(t,null))))},u.prototype.recycleAsyncId=function(t,e,r){if(null!==(r=void 0===r?0:r)&&0<r||null===r&&0<this.delay)return i.prototype.recycleAsyncId.call(this,t,e,r);0===t.actions.length&&(s.Immediate.clearImmediate(e),t.scheduled=void 0)},u);function u(t,e){var r=i.call(this,t,e)||this;return r.scheduler=t,r.work=e,r}r.AsapAction=o},{"../util/Immediate":266,"./AsyncAction":252}],251:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,t=t("./AsyncScheduler"),o=(i=t.AsyncScheduler,o(s,i),s.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,r=this.actions,n=-1,o=r.length;t=t||r.shift();do{if(e=t.execute(t.state,t.delay))break}while(++n<o&&(t=r.shift()));if(this.active=!1,e){for(;++n<o&&(t=r.shift());)t.unsubscribe();throw e}},s);function s(){return null!==i&&i.apply(this,arguments)||this}r.AsapScheduler=o},{"./AsyncScheduler":253}],252:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,t=t("./Action"),o=(i=t.Action,o(s,i),s.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var r=this.id,t=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(t,r,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(t,this.id,e),this},s.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),setInterval(t.flush.bind(t,this),r)},s.prototype.recycleAsyncId=function(t,e,r){if(null!==(r=void 0===r?0:r)&&this.delay===r&&!1===this.pending)return e;clearInterval(e)},s.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;e=this._execute(t,e);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},s.prototype._execute=function(t,e){var r=!1,n=void 0;try{this.work(t)}catch(t){r=!0,n=!!t&&t||new Error(t)}if(r)return this.unsubscribe(),n},s.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,r=e.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},s);function s(t,e){var r=i.call(this,t,e)||this;return r.scheduler=t,r.work=e,r.pending=!1,r}r.AsyncAction=o},{"./Action":247}],253:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,s=t("../Scheduler"),o=(i=s.Scheduler,o(u,i),u.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),u.delegate&&u.delegate!==this?u.delegate.schedule(t,e,r):i.prototype.schedule.call(this,t,e,r)},u.prototype.flush=function(t){var e,r=this.actions;if(this.active)r.push(t);else{this.active=!0;do{if(e=t.execute(t.state,t.delay))break}while(t=r.shift());if(this.active=!1,e){for(;t=r.shift();)t.unsubscribe();throw e}}},u);function u(t,e){void 0===e&&(e=s.Scheduler.now);var r=i.call(this,t,function(){return u.delegate&&u.delegate!==r?u.delegate.now():e()})||this;return r.actions=[],r.active=!1,r.scheduled=void 0,r}r.AsyncScheduler=o},{"../Scheduler":104}],254:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,t=t("./AsyncAction"),o=(i=t.AsyncAction,o(s,i),s.prototype.schedule=function(t,e){return 0<(e=void 0===e?0:e)?i.prototype.schedule.call(this,t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)},s.prototype.execute=function(t,e){return 0<e||this.closed?i.prototype.execute.call(this,t,e):this._execute(t,e)},s.prototype.requestAsyncId=function(t,e,r){return null!==(r=void 0===r?0:r)&&0<r||null===r&&0<this.delay?i.prototype.requestAsyncId.call(this,t,e,r):t.flush(this)},s);function s(t,e){var r=i.call(this,t,e)||this;return r.scheduler=t,r.work=e,r}r.QueueAction=o},{"./AsyncAction":252}],255:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,t=t("./AsyncScheduler"),o=(i=t.AsyncScheduler,o(s,i),s);function s(){return null!==i&&i.apply(this,arguments)||this}r.QueueScheduler=o},{"./AsyncScheduler":253}],256:[function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,s=t("./AsyncAction"),t=t("./AsyncScheduler"),t=(i=t.AsyncScheduler,o(u,i),u.prototype.flush=function(){for(var t,e,r=this.actions,n=this.maxFrames;(e=r[0])&&e.delay<=n&&(r.shift(),this.frame=e.delay,!(t=e.execute(e.state,e.delay))););if(t){for(;e=r.shift();)e.unsubscribe();throw t}},u.frameTimeFactor=10,u);function u(t,e){void 0===t&&(t=a),void 0===e&&(e=Number.POSITIVE_INFINITY);var r=i.call(this,t,function(){return r.frame})||this;return r.maxFrames=e,r.frame=0,r.index=-1,r}r.VirtualTimeScheduler=t;var c,a=(c=s.AsyncAction,o(l,c),l.prototype.schedule=function(t,e){if(void 0===e&&(e=0),!this.id)return c.prototype.schedule.call(this,t,e);this.active=!1;var r=new l(this.scheduler,this.work);return this.add(r),r.schedule(t,e)},l.prototype.requestAsyncId=function(t,e,r){this.delay=t.frame+(r=void 0===r?0:r);t=t.actions;return t.push(this),t.sort(l.sortActions),!0},l.prototype.recycleAsyncId=function(t,e,r){void 0===r&&(r=0)},l.prototype._execute=function(t,e){if(!0===this.active)return c.prototype._execute.call(this,t,e)},l.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},l);function l(t,e,r){void 0===r&&(r=t.index+=1);var n=c.call(this,t,e)||this;return n.scheduler=t,n.work=e,n.index=r,n.active=!0,n.index=t.index=r,n}r.VirtualAction=a},{"./AsyncAction":252,"./AsyncScheduler":253}],257:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./AnimationFrameAction"),t=t("./AnimationFrameScheduler");r.animationFrameScheduler=new t.AnimationFrameScheduler(n.AnimationFrameAction),r.animationFrame=r.animationFrameScheduler},{"./AnimationFrameAction":248,"./AnimationFrameScheduler":249}],258:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./AsapAction"),t=t("./AsapScheduler");r.asapScheduler=new t.AsapScheduler(n.AsapAction),r.asap=r.asapScheduler},{"./AsapAction":250,"./AsapScheduler":251}],259:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./AsyncAction"),t=t("./AsyncScheduler");r.asyncScheduler=new t.AsyncScheduler(n.AsyncAction),r.async=r.asyncScheduler},{"./AsyncAction":252,"./AsyncScheduler":253}],260:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./QueueAction"),t=t("./QueueScheduler");r.queueScheduler=new t.QueueScheduler(n.QueueAction),r.queue=r.queueScheduler},{"./QueueAction":254,"./QueueScheduler":255}],261:[function(t,e,r){"use strict";function n(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}Object.defineProperty(r,"__esModule",{value:!0}),r.getSymbolIterator=n,r.iterator=n(),r.$$iterator=r.iterator},{}],262:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},{}],263:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),r.$$rxSubscriber=r.rxSubscriber},{}],264:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.prototype=Object.create(Error.prototype),o);function o(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}r.ArgumentOutOfRangeError=n},{}],265:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.prototype=Object.create(Error.prototype),o);function o(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}r.EmptyError=n},{}],266:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=1,o=Promise.resolve(),i={};function s(t){return t in i&&(delete i[t],!0)}r.Immediate={setImmediate:function(t){var e=n++;return i[e]=!0,o.then(function(){return s(e)&&t()}),e},clearImmediate:function(t){s(t)}},r.TestTools={pending:function(){return Object.keys(i).length}}},{}],267:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.prototype=Object.create(Error.prototype),o);function o(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}r.ObjectUnsubscribedError=n},{}],268:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.prototype=Object.create(Error.prototype),o);function o(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}r.TimeoutError=n},{}],269:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.prototype=Object.create(Error.prototype),o);function o(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}r.UnsubscriptionError=n},{}],270:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("../Subscriber");r.canReportError=function(t){for(;t;){var e=t.closed,r=t.destination,n=t.isStopped;if(e||n)return!1;t=r&&r instanceof o.Subscriber?r:null}return!0}},{"../Subscriber":107}],271:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hostReportError=function(t){setTimeout(function(){throw t},0)}},{}],272:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.identity=function(t){return t}},{}],273:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},{}],274:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isArrayLike=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},{}],275:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isDate=function(t){return t instanceof Date&&!isNaN(+t)}},{}],276:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isFunction=function(t){return"function"==typeof t}},{}],277:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../symbol/observable");r.isInteropObservable=function(t){return t&&"function"==typeof t[n.observable]}},{"../symbol/observable":262}],278:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../symbol/iterator");r.isIterable=function(t){return t&&"function"==typeof t[n.iterator]}},{"../symbol/iterator":261}],279:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./isArray");r.isNumeric=function(t){return!n.isArray(t)&&0<=t-parseFloat(t)+1}},{"./isArray":273}],280:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isObject=function(t){return null!==t&&"object"==typeof t}},{}],281:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Observable");r.isObservable=function(t){return!!t&&(t instanceof n.Observable||"function"==typeof t.lift&&"function"==typeof t.subscribe)}},{"../Observable":100}],282:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}},{}],283:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isScheduler=function(t){return t&&"function"==typeof t.schedule}},{}],284:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.noop=function(){}},{}],285:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.not=function(t,e){function r(){return!r.pred.apply(r.thisArg,arguments)}return r.pred=t,r.thisArg=e,r}},{}],286:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./identity");function o(e){return 0===e.length?n.identity:1===e.length?e[0]:function(t){return e.reduce(function(t,e){return e(t)},t)}}r.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(t)},r.pipeFromArray=o},{"./identity":272}],287:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./subscribeToArray"),o=t("./subscribeToPromise"),i=t("./subscribeToIterable"),s=t("./subscribeToObservable"),u=t("./isArrayLike"),c=t("./isPromise"),a=t("./isObject"),l=t("../symbol/iterator"),f=t("../symbol/observable");r.subscribeTo=function(t){if(t&&"function"==typeof t[f.observable])return s.subscribeToObservable(t);if(u.isArrayLike(t))return n.subscribeToArray(t);if(c.isPromise(t))return o.subscribeToPromise(t);if(t&&"function"==typeof t[l.iterator])return i.subscribeToIterable(t);t=a.isObject(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},{"../symbol/iterator":261,"../symbol/observable":262,"./isArrayLike":274,"./isObject":280,"./isPromise":282,"./subscribeToArray":288,"./subscribeToIterable":289,"./subscribeToObservable":290,"./subscribeToPromise":291}],288:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.subscribeToArray=function(n){return function(t){for(var e=0,r=n.length;e<r&&!t.closed;e++)t.next(n[e]);t.complete()}}},{}],289:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t("../symbol/iterator");r.subscribeToIterable=function(n){return function(e){for(var t=n[o.iterator]();;){var r=void 0;try{r=t.next()}catch(t){return e.error(t),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof t.return&&e.add(function(){t.return&&t.return()}),e}}},{"../symbol/iterator":261}],290:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../symbol/observable");r.subscribeToObservable=function(r){return function(t){var e=r[n.observable]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)}}},{"../symbol/observable":262}],291:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("./hostReportError");r.subscribeToPromise=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,n.hostReportError),e}}},{"./hostReportError":271}],292:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t("../InnerSubscriber"),s=t("./subscribeTo"),u=t("../Observable");r.subscribeToResult=function(t,e,r,n,o){if(!(o=void 0===o?new i.InnerSubscriber(t,r,n):o).closed)return e instanceof u.Observable?e.subscribe(o):s.subscribeTo(e)(o)}},{"../InnerSubscriber":98,"../Observable":100,"./subscribeTo":287}],293:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../Subscriber"),o=t("../symbol/rxSubscriber"),i=t("../Observer");r.toSubscriber=function(t,e,r){if(t){if(t instanceof n.Subscriber)return t;if(t[o.rxSubscriber])return t[o.rxSubscriber]()}return t||e||r?new n.Subscriber(t,e,r):new n.Subscriber(i.empty)}},{"../Observer":101,"../Subscriber":107,"../symbol/rxSubscriber":263}],294:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t("../internal/operators/audit");r.audit=n.audit;n=t("../internal/operators/auditTime");r.auditTime=n.auditTime;n=t("../internal/operators/buffer");r.buffer=n.buffer;n=t("../internal/operators/bufferCount");r.bufferCount=n.bufferCount;n=t("../internal/operators/bufferTime");r.bufferTime=n.bufferTime;n=t("../internal/operators/bufferToggle");r.bufferToggle=n.bufferToggle;n=t("../internal/operators/bufferWhen");r.bufferWhen=n.bufferWhen;n=t("../internal/operators/catchError");r.catchError=n.catchError;n=t("../internal/operators/combineAll");r.combineAll=n.combineAll;n=t("../internal/operators/combineLatest");r.combineLatest=n.combineLatest;n=t("../internal/operators/concat");r.concat=n.concat;n=t("../internal/operators/concatAll");r.concatAll=n.concatAll;n=t("../internal/operators/concatMap");r.concatMap=n.concatMap;n=t("../internal/operators/concatMapTo");r.concatMapTo=n.concatMapTo;n=t("../internal/operators/count");r.count=n.count;n=t("../internal/operators/debounce");r.debounce=n.debounce;n=t("../internal/operators/debounceTime");r.debounceTime=n.debounceTime;n=t("../internal/operators/defaultIfEmpty");r.defaultIfEmpty=n.defaultIfEmpty;n=t("../internal/operators/delay");r.delay=n.delay;n=t("../internal/operators/delayWhen");r.delayWhen=n.delayWhen;n=t("../internal/operators/dematerialize");r.dematerialize=n.dematerialize;n=t("../internal/operators/distinct");r.distinct=n.distinct;n=t("../internal/operators/distinctUntilChanged");r.distinctUntilChanged=n.distinctUntilChanged;n=t("../internal/operators/distinctUntilKeyChanged");r.distinctUntilKeyChanged=n.distinctUntilKeyChanged;n=t("../internal/operators/elementAt");r.elementAt=n.elementAt;n=t("../internal/operators/endWith");r.endWith=n.endWith;n=t("../internal/operators/every");r.every=n.every;n=t("../internal/operators/exhaust");r.exhaust=n.exhaust;n=t("../internal/operators/exhaustMap");r.exhaustMap=n.exhaustMap;n=t("../internal/operators/expand");r.expand=n.expand;n=t("../internal/operators/filter");r.filter=n.filter;n=t("../internal/operators/finalize");r.finalize=n.finalize;n=t("../internal/operators/find");r.find=n.find;n=t("../internal/operators/findIndex");r.findIndex=n.findIndex;n=t("../internal/operators/first");r.first=n.first;n=t("../internal/operators/groupBy");r.groupBy=n.groupBy;n=t("../internal/operators/ignoreElements");r.ignoreElements=n.ignoreElements;n=t("../internal/operators/isEmpty");r.isEmpty=n.isEmpty;n=t("../internal/operators/last");r.last=n.last;n=t("../internal/operators/map");r.map=n.map;n=t("../internal/operators/mapTo");r.mapTo=n.mapTo;n=t("../internal/operators/materialize");r.materialize=n.materialize;n=t("../internal/operators/max");r.max=n.max;n=t("../internal/operators/merge");r.merge=n.merge;n=t("../internal/operators/mergeAll");r.mergeAll=n.mergeAll;n=t("../internal/operators/mergeMap");r.mergeMap=n.mergeMap,r.flatMap=n.flatMap;n=t("../internal/operators/mergeMapTo");r.mergeMapTo=n.mergeMapTo;n=t("../internal/operators/mergeScan");r.mergeScan=n.mergeScan;n=t("../internal/operators/min");r.min=n.min;n=t("../internal/operators/multicast");r.multicast=n.multicast;n=t("../internal/operators/observeOn");r.observeOn=n.observeOn;n=t("../internal/operators/onErrorResumeNext");r.onErrorResumeNext=n.onErrorResumeNext;n=t("../internal/operators/pairwise");r.pairwise=n.pairwise;n=t("../internal/operators/partition");r.partition=n.partition;n=t("../internal/operators/pluck");r.pluck=n.pluck;n=t("../internal/operators/publish");r.publish=n.publish;n=t("../internal/operators/publishBehavior");r.publishBehavior=n.publishBehavior;n=t("../internal/operators/publishLast");r.publishLast=n.publishLast;n=t("../internal/operators/publishReplay");r.publishReplay=n.publishReplay;n=t("../internal/operators/race");r.race=n.race;n=t("../internal/operators/reduce");r.reduce=n.reduce;n=t("../internal/operators/repeat");r.repeat=n.repeat;n=t("../internal/operators/repeatWhen");r.repeatWhen=n.repeatWhen;n=t("../internal/operators/retry");r.retry=n.retry;n=t("../internal/operators/retryWhen");r.retryWhen=n.retryWhen;n=t("../internal/operators/refCount");r.refCount=n.refCount;n=t("../internal/operators/sample");r.sample=n.sample;n=t("../internal/operators/sampleTime");r.sampleTime=n.sampleTime;n=t("../internal/operators/scan");r.scan=n.scan;n=t("../internal/operators/sequenceEqual");r.sequenceEqual=n.sequenceEqual;n=t("../internal/operators/share");r.share=n.share;n=t("../internal/operators/shareReplay");r.shareReplay=n.shareReplay;n=t("../internal/operators/single");r.single=n.single;n=t("../internal/operators/skip");r.skip=n.skip;n=t("../internal/operators/skipLast");r.skipLast=n.skipLast;n=t("../internal/operators/skipUntil");r.skipUntil=n.skipUntil;n=t("../internal/operators/skipWhile");r.skipWhile=n.skipWhile;n=t("../internal/operators/startWith");r.startWith=n.startWith;n=t("../internal/operators/subscribeOn");r.subscribeOn=n.subscribeOn;n=t("../internal/operators/switchAll");r.switchAll=n.switchAll;n=t("../internal/operators/switchMap");r.switchMap=n.switchMap;n=t("../internal/operators/switchMapTo");r.switchMapTo=n.switchMapTo;n=t("../internal/operators/take");r.take=n.take;n=t("../internal/operators/takeLast");r.takeLast=n.takeLast;n=t("../internal/operators/takeUntil");r.takeUntil=n.takeUntil;n=t("../internal/operators/takeWhile");r.takeWhile=n.takeWhile;n=t("../internal/operators/tap");r.tap=n.tap;n=t("../internal/operators/throttle");r.throttle=n.throttle;n=t("../internal/operators/throttleTime");r.throttleTime=n.throttleTime;n=t("../internal/operators/throwIfEmpty");r.throwIfEmpty=n.throwIfEmpty;n=t("../internal/operators/timeInterval");r.timeInterval=n.timeInterval;n=t("../internal/operators/timeout");r.timeout=n.timeout;n=t("../internal/operators/timeoutWith");r.timeoutWith=n.timeoutWith;n=t("../internal/operators/timestamp");r.timestamp=n.timestamp;n=t("../internal/operators/toArray");r.toArray=n.toArray;n=t("../internal/operators/window");r.window=n.window;n=t("../internal/operators/windowCount");r.windowCount=n.windowCount;n=t("../internal/operators/windowTime");r.windowTime=n.windowTime;n=t("../internal/operators/windowToggle");r.windowToggle=n.windowToggle;n=t("../internal/operators/windowWhen");r.windowWhen=n.windowWhen;n=t("../internal/operators/withLatestFrom");r.withLatestFrom=n.withLatestFrom;n=t("../internal/operators/zip");r.zip=n.zip;t=t("../internal/operators/zipAll");r.zipAll=t.zipAll},{"../internal/operators/audit":139,"../internal/operators/auditTime":140,"../internal/operators/buffer":141,"../internal/operators/bufferCount":142,"../internal/operators/bufferTime":143,"../internal/operators/bufferToggle":144,"../internal/operators/bufferWhen":145,"../internal/operators/catchError":146,"../internal/operators/combineAll":147,"../internal/operators/combineLatest":148,"../internal/operators/concat":149,"../internal/operators/concatAll":150,"../internal/operators/concatMap":151,"../internal/operators/concatMapTo":152,"../internal/operators/count":153,"../internal/operators/debounce":154,"../internal/operators/debounceTime":155,"../internal/operators/defaultIfEmpty":156,"../internal/operators/delay":157,"../internal/operators/delayWhen":158,"../internal/operators/dematerialize":159,"../internal/operators/distinct":160,"../internal/operators/distinctUntilChanged":161,"../internal/operators/distinctUntilKeyChanged":162,"../internal/operators/elementAt":163,"../internal/operators/endWith":164,"../internal/operators/every":165,"../internal/operators/exhaust":166,"../internal/operators/exhaustMap":167,"../internal/operators/expand":168,"../internal/operators/filter":169,"../internal/operators/finalize":170,"../internal/operators/find":171,"../internal/operators/findIndex":172,"../internal/operators/first":173,"../internal/operators/groupBy":174,"../internal/operators/ignoreElements":175,"../internal/operators/isEmpty":176,"../internal/operators/last":177,"../internal/operators/map":178,"../internal/operators/mapTo":179,"../internal/operators/materialize":180,"../internal/operators/max":181,"../internal/operators/merge":182,"../internal/operators/mergeAll":183,"../internal/operators/mergeMap":184,"../internal/operators/mergeMapTo":185,"../internal/operators/mergeScan":186,"../internal/operators/min":187,"../internal/operators/multicast":188,"../internal/operators/observeOn":189,"../internal/operators/onErrorResumeNext":190,"../internal/operators/pairwise":191,"../internal/operators/partition":192,"../internal/operators/pluck":193,"../internal/operators/publish":194,"../internal/operators/publishBehavior":195,"../internal/operators/publishLast":196,"../internal/operators/publishReplay":197,"../internal/operators/race":198,"../internal/operators/reduce":199,"../internal/operators/refCount":200,"../internal/operators/repeat":201,"../internal/operators/repeatWhen":202,"../internal/operators/retry":203,"../internal/operators/retryWhen":204,"../internal/operators/sample":205,"../internal/operators/sampleTime":206,"../internal/operators/scan":207,"../internal/operators/sequenceEqual":208,"../internal/operators/share":209,"../internal/operators/shareReplay":210,"../internal/operators/single":211,"../internal/operators/skip":212,"../internal/operators/skipLast":213,"../internal/operators/skipUntil":214,"../internal/operators/skipWhile":215,"../internal/operators/startWith":216,"../internal/operators/subscribeOn":217,"../internal/operators/switchAll":218,"../internal/operators/switchMap":219,"../internal/operators/switchMapTo":220,"../internal/operators/take":221,"../internal/operators/takeLast":222,"../internal/operators/takeUntil":223,"../internal/operators/takeWhile":224,"../internal/operators/tap":225,"../internal/operators/throttle":226,"../internal/operators/throttleTime":227,"../internal/operators/throwIfEmpty":228,"../internal/operators/timeInterval":229,"../internal/operators/timeout":230,"../internal/operators/timeoutWith":231,"../internal/operators/timestamp":232,"../internal/operators/toArray":233,"../internal/operators/window":234,"../internal/operators/windowCount":235,"../internal/operators/windowTime":236,"../internal/operators/windowToggle":237,"../internal/operators/windowWhen":238,"../internal/operators/withLatestFrom":239,"../internal/operators/zip":240,"../internal/operators/zipAll":241}],295:[function(t,e,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.WRITE=r.READ=r.Driver=void 0;var o=n(t("@babel/runtime/helpers/classCallCheck")),i=n(t("@babel/runtime/helpers/createClass")),s=n(t("@babel/runtime/helpers/inherits")),u=n(t("@babel/runtime/helpers/possibleConstructorReturn")),c=n(t("@babel/runtime/helpers/getPrototypeOf")),a=t("neo4j-driver-core"),l=n(t("./session-rx"));function f(r){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=(0,c.default)(r);return e=n?(t=(0,c.default)(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),(0,u.default)(this,e)}}var p=a.internal.constants.FETCH_ALL,t=a.driver.READ,h=a.driver.WRITE;r.WRITE=h,r.READ=t;a=function(t){(0,s.default)(r,t);var e=f(r);function r(){return(0,o.default)(this,r),e.apply(this,arguments)}return(0,i.default)(r,[{key:"rxSession",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.defaultAccessMode,r=t.bookmarks,n=t.database,t=t.fetchSize;return new l.default({session:this._newSession({defaultAccessMode:void 0===e?h:e,bookmarks:r,database:void 0===n?"":n,reactive:!0,fetchSize:function(t,e){t=parseInt(t,10);{if(0<t||t===p)return t;if(0===t||t<0)throw new Error("The fetch size can only be a positive value or ".concat(p," for ALL. However fetchSize = ").concat(t));return e}}(t,this._config.fetchSize)}),config:this._config})}}]),r}(a.Driver);r.Driver=a,r.default=a},{"./session-rx":299,"@babel/runtime/helpers/classCallCheck":87,"@babel/runtime/helpers/createClass":88,"@babel/runtime/helpers/getPrototypeOf":89,"@babel/runtime/helpers/inherits":90,"@babel/runtime/helpers/interopRequireDefault":91,"@babel/runtime/helpers/possibleConstructorReturn":92,"neo4j-driver-core":58}],296:[function(g,t,O){!function(m){!function(){"use strict";var t=g("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(O,"__esModule",{value:!0}),O.driver=o,Object.defineProperty(O,"Neo4jError",{enumerable:!0,get:function(){return r.Neo4jError}}),Object.defineProperty(O,"error",{enumerable:!0,get:function(){return r.error}}),Object.defineProperty(O,"int",{enumerable:!0,get:function(){return r.int}}),Object.defineProperty(O,"isInt",{enumerable:!0,get:function(){return r.isInt}}),Object.defineProperty(O,"isPoint",{enumerable:!0,get:function(){return r.isPoint}}),Object.defineProperty(O,"isDate",{enumerable:!0,get:function(){return r.isDate}}),Object.defineProperty(O,"isDateTime",{enumerable:!0,get:function(){return r.isDateTime}}),Object.defineProperty(O,"isDuration",{enumerable:!0,get:function(){return r.isDuration}}),Object.defineProperty(O,"isLocalDateTime",{enumerable:!0,get:function(){return r.isLocalDateTime}}),Object.defineProperty(O,"isLocalTime",{enumerable:!0,get:function(){return r.isLocalTime}}),Object.defineProperty(O,"isTime",{enumerable:!0,get:function(){return r.isTime}}),O.default=O.temporal=O.spatial=O.session=O.types=O.logging=O.auth=O.integer=void 0;var c=g("./driver"),e=t(g("./version")),r=g("neo4j-driver-core"),a=g("neo4j-driver-bolt-connection"),n=r.internal.util,l=n.ENCRYPTION_ON,f=(n.ENCRYPTION_OFF,n.assertString),p=n.isEmptyObjectOrNull,h=r.internal.serverAddress.ServerAddress,d=r.internal.urlUtil;function o(t,o){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};f(t,"Bolt URL");var r,i=d.parseDatabaseUrl(t),n=!1,s=!1;switch(i.scheme){case"bolt":break;case"bolt+s":s=!0,r="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":s=!0,r="TRUST_ALL_CERTIFICATES";break;case"neo4j":n=!0;break;case"neo4j+s":r="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",n=s=!0;break;case"neo4j+ssc":r="TRUST_ALL_CERTIFICATES",n=s=!0;break;default:throw new Error("Unknown scheme: ".concat(i.scheme))}if(s){if("encrypted"in e||"trust"in e)throw new Error("Encryption/trust can only be configured either through URL or config, not both");e.encrypted=l,e.trust=r}(o=o||{}).scheme=o.scheme||"none",e.userAgent=e.userAgent||b;var u=h.fromUrl(i.hostAndPort);return new c.Driver({address:u,typename:n?"Routing":"Direct",routing:n},e,function(){{if(n)return function(t,e,r,n){return new a.RoutingConnectionProvider({id:t,config:e,log:r,hostNameResolver:n,authToken:o,address:u,userAgent:e.userAgent,routingContext:i.query})};if(!p(i.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(t,"'"));return function(t,e,r){return new a.DirectConnectionProvider({id:t,config:e,log:r,authToken:o,address:u,userAgent:e.userAgent})}}}())}var i={basic:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;return r?{scheme:"basic",principal:t,credentials:e,realm:r}:{scheme:"basic",principal:t,credentials:e}},kerberos:function(t){return{scheme:"kerberos",principal:"",credentials:t}},custom:function(t,e,r,n){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:void 0;return o?{scheme:n,principal:t,credentials:e,realm:r,parameters:o}:{scheme:n,principal:t,credentials:e,realm:r}}};O.auth=i;var s,b="neo4j-javascript/"+e.default,u={console:(s=function(t){return{level:t,logger:function(t,e){return console.log("".concat(m.Date.now()," ").concat(t.toUpperCase()," ").concat(e))}}},_.toString=function(){return s.toString()},_)};function _(t){return s.apply(this,arguments)}O.logging=u;var y={Node:r.Node,Relationship:r.Relationship,UnboundRelationship:r.UnboundRelationship,PathSegment:r.PathSegment,Path:r.Path,Result:r.Result,ResultSummary:r.ResultSummary,Record:r.Record,Point:r.Point,Date:r.Date,DateTime:r.DateTime,Duration:r.Duration,LocalDateTime:r.LocalDateTime,LocalTime:r.LocalTime,Time:r.Time,Integer:r.Integer};O.types=y;var v={READ:c.READ,WRITE:c.WRITE};O.session=v;t={toNumber:r.toNumber,toString:r.toString,inSafeRange:r.inSafeRange};O.integer=t;n={isPoint:r.isPoint};O.spatial=n;e={isDuration:r.isDuration,isLocalTime:r.isLocalTime,isTime:r.isTime,isDate:r.isDate,isLocalDateTime:r.isLocalDateTime,isDateTime:r.isDateTime};O.temporal=e;e={driver:o,int:r.int,isInt:r.isInt,isPoint:r.isPoint,isDuration:r.isDuration,isLocalTime:r.isLocalTime,isTime:r.isTime,isDate:r.isDate,isLocalDateTime:r.isLocalDateTime,isDateTime:r.isDateTime,integer:t,Neo4jError:r.Neo4jError,auth:i,logging:u,types:y,session:v,error:r.error,spatial:n,temporal:e};O.default=e}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./driver":295,"./version":301,"@babel/runtime/helpers/interopRequireDefault":91,"neo4j-driver-bolt-connection":37,"neo4j-driver-core":58}],297:[function(t,e,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=n(t("@babel/runtime/helpers/classCallCheck")),o=n(t("@babel/runtime/helpers/createClass")),u=t("neo4j-driver-core"),c=t("rxjs"),a=t("rxjs/operators"),l=(u.internal.logger.Logger,u.internal.retryStrategy.canRetryOn),f=u.error.SERVICE_UNAVAILABLE,p=(u.error.SESSION_EXPIRED,3e4),h=1e3,d=2,b=.2;function _(t,e){return t||0===t?t:e}r.default=function(){function i(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.maxRetryTimeout,r=void 0===e?p:e,n=t.initialDelay,o=void 0===n?h:n,e=t.delayMultiplier,n=void 0===e?d:e,e=t.delayJitter,e=void 0===e?b:e,t=t.logger,t=void 0===t?null:t;(0,s.default)(this,i),this._maxRetryTimeout=_(r,p),this._initialDelay=_(o,h),this._delayMultiplier=_(n,d),this._delayJitter=_(e,b),this._logger=t}return(0,o.default)(i,[{key:"retry",value:function(t){var s=this;return t.pipe((0,a.retryWhen)(function(t){var r=[],n=Date.now(),o=1,i=s._initialDelay;return t.pipe((0,a.flatMap)(function(t){if(!l(t))return(0,c.throwError)(t);if(r.push(t),2<=o&&Date.now()-n>=s._maxRetryTimeout){var e=(0,u.newError)("Failed after retried for ".concat(o," times in ").concat(s._maxRetryTimeout," ms. Make sure that your database is online and retry again."),f);return e.seenErrors=r,(0,c.throwError)(e)}e=s._computeNextDelay(i);return i*=s._delayMultiplier,o++,s._logger&&s._logger.warn("Transaction failed and will be retried in ".concat(e)),(0,c.of)(1).pipe((0,a.delay)(e))}))}))}},{key:"_computeNextDelay",value:function(t){var e=t*this._delayJitter;return t-e+2*e*Math.random()}}]),i}()},{"@babel/runtime/helpers/classCallCheck":87,"@babel/runtime/helpers/createClass":88,"@babel/runtime/helpers/interopRequireDefault":91,"neo4j-driver-core":58,rxjs:95,"rxjs/operators":294}],298:[function(t,e,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(t("@babel/runtime/helpers/classCallCheck")),i=n(t("@babel/runtime/helpers/createClass")),s=t("neo4j-driver-core"),u=t("rxjs"),c=t("rxjs/operators"),a={READY:0,STREAMING:1,COMPLETED:2};r.default=function(){function e(t){(0,o.default)(this,e);t=t.pipe((0,c.publishReplay)(1),(0,c.refCount)());this._result=t,this._keys=t.pipe((0,c.flatMap)(function(t){return(0,u.from)(t.keys())}),(0,c.publishReplay)(1),(0,c.refCount)()),this._records=new u.Subject,this._summary=new u.ReplaySubject,this._state=a.READY}return(0,i.default)(e,[{key:"keys",value:function(){return this._keys}},{key:"records",value:function(){var r=this;return this._result.pipe((0,c.flatMap)(function(e){return new u.Observable(function(t){return r._startStreaming({result:e,recordsObserver:t})})}))}},{key:"consume",value:function(){var r=this;return this._result.pipe((0,c.flatMap)(function(e){return new u.Observable(function(t){return r._startStreaming({result:e,summaryObserver:t})})}))}},{key:"_startStreaming",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=t.result,n=t.recordsObserver,n=void 0===n?null:n,t=t.summaryObserver,t=void 0===t?null:t,o=[];return t&&o.push(this._summary.subscribe(t)),this._state<a.STREAMING?(this._state=a.STREAMING,n&&o.push(this._records.subscribe(n)),o.push({unsubscribe:function(){r._cancel&&r._cancel()}}),0===this._records.observers.length&&r._cancel(),r.subscribe({onNext:function(t){e._records.next(t)},onCompleted:function(t){e._records.complete(),e._summary.next(t),e._summary.complete(),e._state=a.COMPLETED},onError:function(t){e._records.error(t),e._summary.error(t),e._state=a.COMPLETED}})):n&&n.error((0,s.newError)("Streaming has already started/consumed with a previous records or summary subscription.")),function(){o.forEach(function(t){return t.unsubscribe()})}}}]),e}()},{"@babel/runtime/helpers/classCallCheck":87,"@babel/runtime/helpers/createClass":88,"@babel/runtime/helpers/interopRequireDefault":91,"neo4j-driver-core":58,rxjs:95,"rxjs/operators":294}],299:[function(t,e,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(t("@babel/runtime/helpers/classCallCheck")),i=n(t("@babel/runtime/helpers/createClass")),s=t("rxjs"),u=t("rxjs/operators"),c=n(t("./result-rx")),a=t("neo4j-driver-core"),l=n(t("./transaction-rx")),f=n(t("./internal/retry-logic-rx")),t=a.internal.constants,p=t.ACCESS_MODE_READ,h=t.ACCESS_MODE_WRITE,d=a.internal.txConfig.TxConfig;r.default=function(){function r(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.session,t=t.config;(0,o.default)(this,r),this._session=e,this._retryLogic=function(t){t=t&&t.maxTransactionRetryTime?t.maxTransactionRetryTime:null;return new f.default({maxRetryTimeout:t})}(t)}return(0,i.default)(r,[{key:"run",value:function(t,r,n){var o=this;return new c.default(new s.Observable(function(e){try{e.next(o._session.run(t,r,n)),e.complete()}catch(t){e.error(t)}return function(){}}))}},{key:"beginTransaction",value:function(t){return this._beginTransaction(this._session._mode,t)}},{key:"readTransaction",value:function(t,e){return this._runTransaction(p,t,e)}},{key:"writeTransaction",value:function(t,e){return this._runTransaction(h,t,e)}},{key:"close",value:function(){var t=this;return new s.Observable(function(e){t._session.close().then(function(){e.complete()}).catch(function(t){return e.error(t)})})}},{key:"lastBookmark",value:function(){return this._session.lastBookmark()}},{key:"_beginTransaction",value:function(t,e){var r=this,n=d.empty();return e&&(n=new d(e)),new s.Observable(function(e){try{e.next(new l.default(r._session._beginTransaction(t,n))),e.complete()}catch(t){e.error(t)}return function(){}})}},{key:"_runTransaction",value:function(t,r,e){d.empty();return e&&new d(e),this._retryLogic.retry(this._beginTransaction(t,e).pipe((0,u.flatMap)(function(e){return(0,s.defer)(function(){try{return r(e)}catch(t){return(0,s.throwError)(t)}}).pipe((0,u.catchError)(function(t){return e.rollback().pipe((0,u.concat)((0,s.throwError)(t)))}),(0,u.concat)(e.commit()))})))}}]),r}()},{"./internal/retry-logic-rx":297,"./result-rx":298,"./transaction-rx":300,"@babel/runtime/helpers/classCallCheck":87,"@babel/runtime/helpers/createClass":88,"@babel/runtime/helpers/interopRequireDefault":91,"neo4j-driver-core":58,rxjs:95,"rxjs/operators":294}],300:[function(t,e,r){"use strict";var n=t("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=n(t("@babel/runtime/helpers/classCallCheck")),i=n(t("@babel/runtime/helpers/createClass")),s=t("rxjs"),u=n(t("./result-rx"));n(t("neo4j-driver-core"));r.default=function(){function e(t){(0,o.default)(this,e),this._txc=t}return(0,i.default)(e,[{key:"run",value:function(t,r){var n=this;return new u.default(new s.Observable(function(e){try{e.next(n._txc.run(t,r)),e.complete()}catch(t){e.error(t)}return function(){}}))}},{key:"commit",value:function(){var t=this;return new s.Observable(function(e){t._txc.commit().then(function(){e.complete()}).catch(function(t){return e.error(t)})})}},{key:"rollback",value:function(){var t=this;return new s.Observable(function(e){t._txc.rollback().then(function(){e.complete()}).catch(function(t){return e.error(t)})})}}]),e}()},{"./result-rx":298,"@babel/runtime/helpers/classCallCheck":87,"@babel/runtime/helpers/createClass":88,"@babel/runtime/helpers/interopRequireDefault":91,"neo4j-driver-core":58,rxjs:95}],301:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="4.3.3"},{}]},{},[296])(296)});